import{D as We,G as Ve,r as y,a3 as Xe,aG as Ze,p as e,X as _,S as Ge,O as re,aZ as Je,z as ve,B as we,y as ne,P as W,a2 as Ee,U as Oe,aH as Ke,ak as Qe,C as $e,ad as et,H as tt,R as st,J as at,x as qe,K as nt,T as rt,a_ as lt}from"./index-WAoT78o_.js";import{u as Be}from"./settingsApi-CbNzY-DL.js";import{A as Ae}from"./alert-circle-ipmQBT-s.js";import{P as De}from"./plus-CNtrfzq0.js";import{P as Ye}from"./printer-CLmMJmx9.js";import{C as H}from"./check-circle-Bs4hD_Mn.js";import{X as Re}from"./x-circle-B_We_keY.js";import{M as Ue}from"./message-square-B3B6AV4c.js";import{P as Ce}from"./phone-ehtvFRIM.js";import{P as it}from"./pen-square-BWW9zxzE.js";import{F as dt}from"./filter-BTES_dtq.js";import{E as ot}from"./eye-DhWj5Adg.js";import{T as ct}from"./trash-2-DLkCb2w3.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=We("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),xt=Ve.injectEndpoints({endpoints:n=>({getReturns:n.query({query:r=>({url:"returns",method:"get",params:r}),providesTags:r=>{var d;return(d=r==null?void 0:r.data)!=null&&d.returns||r!=null&&r.data?[...(r.data.returns||r.data).map(({_id:m,id:f})=>({type:"Returns",id:m||f})),{type:"Returns",id:"LIST"}]:[{type:"Returns",id:"LIST"}]}}),getReturn:n.query({query:r=>({url:`returns/${r}`,method:"get"}),providesTags:(r,d,m)=>[{type:"Returns",id:m}]}),createReturn:n.mutation({query:r=>({url:"returns",method:"post",data:r}),invalidatesTags:[{type:"Returns",id:"LIST"}]}),updateReturnStatus:n.mutation({query:({returnId:r,...d})=>({url:`returns/${r}/status`,method:"put",data:d}),invalidatesTags:(r,d,{returnId:m})=>[{type:"Returns",id:m},{type:"Returns",id:"LIST"}]}),updateInspection:n.mutation({query:({returnId:r,...d})=>({url:`returns/${r}/inspection`,method:"put",data:d}),invalidatesTags:(r,d,{returnId:m})=>[{type:"Returns",id:m},{type:"Returns",id:"LIST"}]}),addNote:n.mutation({query:({returnId:r,...d})=>({url:`returns/${r}/notes`,method:"post",data:d}),invalidatesTags:(r,d,{returnId:m})=>[{type:"Returns",id:m}]}),addCommunication:n.mutation({query:({returnId:r,...d})=>({url:`returns/${r}/communication`,method:"post",data:d}),invalidatesTags:(r,d,{returnId:m})=>[{type:"Returns",id:m}]}),getReturnStats:n.query({query:r=>({url:"returns/stats",method:"get",params:r}),providesTags:[{type:"Returns",id:"STATS"}]}),getReturnTrends:n.query({query:r=>({url:"returns/trends",method:"get",params:r}),providesTags:[{type:"Returns",id:"TRENDS"}]}),getEligibleItems:n.query({query:r=>({url:`returns/order/${r}/eligible-items`,method:"get"}),providesTags:(r,d,m)=>[{type:"Returns",id:`ELIGIBLE_${m}`}]}),deleteReturn:n.mutation({query:r=>({url:`returns/${r}`,method:"delete"}),invalidatesTags:(r,d,m)=>[{type:"Returns",id:m},{type:"Returns",id:"LIST"}]})}),overrideExisting:!1}),{useGetReturnsQuery:ut,useGetReturnQuery:He,useCreateReturnMutation:ht,useUpdateReturnStatusMutation:pt,useAddNoteMutation:gt,useAddCommunicationMutation:bt,useGetReturnStatsQuery:jt,useGetEligibleItemsQuery:yt,useDeleteReturnMutation:ft}=xt,Nt=({isOpen:n,onClose:r,onSuccess:d,defaultReturnType:m="sales"})=>{var le;const f=m==="purchase",[c,b]=y.useState({originalOrder:"",returnType:"return",priority:"normal",refundMethod:"original_payment",items:[],generalNotes:"",origin:m}),[x,j]=y.useState(null),[$,R]=y.useState(""),[V,M]=y.useState(!1),{data:w,isLoading:L}=f?Xe({search:$,limit:10},{skip:$.length<=2}):Ze({search:$,limit:10,type:"sales"},{skip:$.length<=2}),{data:C,isLoading:E}=yt(x==null?void 0:x._id,{skip:!(x!=null&&x._id)}),[g,{isLoading:X}]=ht();y.useEffect(()=>{n&&(b({originalOrder:"",returnType:"return",priority:"normal",refundMethod:"original_payment",items:[],generalNotes:"",origin:m}),j(null),R(""),M(!1))},[n,m]);const Z=t=>{j(t),b(s=>({...s,originalOrder:t._id})),M(!1),R("")},te=(t,s)=>{const u={product:t.product._id,originalOrderItem:t._id,quantity:1,originalPrice:t.price||0,returnReason:"changed_mind",condition:"good",action:"refund",returnReasonDetail:"",refundAmount:0,restockingFee:0};b(p=>({...p,items:[...p.items,{...u,maxQuantity:s}]}))},se=t=>{b(s=>({...s,items:s.items.filter((u,p)=>p!==t)}))},O=(t,s,u)=>{b(p=>({...p,items:p.items.map((F,z)=>z===t?{...F,[s]:u}:F)}))},P=async t=>{if(t.preventDefault(),!x){ve("Please select an order");return}if(c.items.length===0){ve("Please add at least one item to return");return}for(const s of c.items){if(!s.returnReason){ve("Please select a return reason for all items");return}if(!s.condition){ve("Please select a condition for all items");return}if(s.quantity<1||s.quantity>s.maxQuantity){ve("Invalid quantity for one or more items");return}}try{await g(c).unwrap(),we("Return request created successfully"),d()}catch(s){ne(s,"Create Return")}},A=y.useMemo(()=>{var t,s;return w?f?((t=w.data)==null?void 0:t.purchaseInvoices)||w.purchaseInvoices||w.data||[]:w.items||((s=w.data)==null?void 0:s.orders)||w.data||[]:[]},[w,f]),D=((le=C==null?void 0:C.data)==null?void 0:le.eligibleItems)||(C==null?void 0:C.eligibleItems)||[];return n?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Create Return Request"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Original Order *"}),x?e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x.orderNumber}),e.jsx("div",{className:"text-sm text-gray-500",children:(()=>{var z,q,U;const t=x.supplier||((z=x.purchaseInvoice)==null?void 0:z.supplier),s=x.customer||((q=x.salesOrder)==null?void 0:q.customer),u=f?(t==null?void 0:t.companyName)||(t==null?void 0:t.name)||(t==null?void 0:t.businessName)||((U=t==null?void 0:t.contactPerson)==null?void 0:U.name)||"Unknown supplier":(s==null?void 0:s.businessName)||[s==null?void 0:s.firstName,s==null?void 0:s.lastName].filter(Boolean).join(" ")||(s==null?void 0:s.email)||"Unknown customer",p=x.total??x.grandTotal??x.amount??0,F=x.createdAt||x.invoiceDate||x.orderDate;return`${u} • $${p.toFixed(2)} • ${F?new Date(F).toLocaleDateString():"—"}`})()})]}),e.jsx("button",{type:"button",onClick:()=>{j(null),b(t=>({...t,originalOrder:""}))},className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-4 w-4"})})]})}):e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:f?"Search purchase orders by order number, supplier name...":"Search orders by order number, customer name...",value:$,onChange:t=>{R(t.target.value),M(!0)},onFocus:()=>M(!0),className:"input pl-10"}),V&&$&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none",children:L?e.jsx("div",{className:"px-4 py-2 text-gray-500",children:"Searching..."}):A.length===0?e.jsx("div",{className:"px-4 py-2 text-gray-500",children:"No orders found"}):A.map(t=>{var q,U,J;const s=t.supplier||((q=t.purchaseInvoice)==null?void 0:q.supplier),u=t.customer||((U=t.salesOrder)==null?void 0:U.customer),p=f?(s==null?void 0:s.companyName)||(s==null?void 0:s.name)||(s==null?void 0:s.businessName)||((J=s==null?void 0:s.contactPerson)==null?void 0:J.name)||"Unknown supplier":(u==null?void 0:u.businessName)||[u==null?void 0:u.firstName,u==null?void 0:u.lastName].filter(Boolean).join(" ")||(u==null?void 0:u.email)||"Unknown customer",F=t.total??t.grandTotal??t.amount??0,z=t.createdAt||t.invoiceDate||t.orderDate;return e.jsx("button",{type:"button",onClick:()=>Z(t),className:"w-full text-left px-4 py-2 hover:bg-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("span",{className:"text-sm text-gray-500",children:z?new Date(z).toLocaleDateString():"—"}),e.jsx("span",{className:"font-medium flex-1",children:p}),e.jsx("span",{className:"text-sm text-gray-600",children:t.orderNumber}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",F.toFixed(2)]})]})},t._id)})})]})]}),x&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Return Type *"}),e.jsxs("select",{value:c.returnType,onChange:t=>b(s=>({...s,returnType:t.target.value})),className:"input",required:!0,children:[e.jsx("option",{value:"return",children:"Return"}),e.jsx("option",{value:"exchange",children:"Exchange"}),e.jsx("option",{value:"warranty",children:"Warranty"}),e.jsx("option",{value:"recall",children:"Recall"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{value:c.priority,onChange:t=>b(s=>({...s,priority:t.target.value})),className:"input",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Items to Return *"}),E?e.jsx(re,{message:"Loading eligible items..."}):D.length===0?e.jsxs("div",{className:"p-4 text-center text-gray-500 bg-gray-50 rounded-lg",children:[e.jsx(Ae,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),e.jsx("p",{children:"No items are eligible for return from this order"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Available Items"}),e.jsx("div",{className:"space-y-2",children:D.map((t,s)=>{var u;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:t.orderItem.product.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Available: ",t.availableQuantity," • Price: $",(u=t.orderItem.price)==null?void 0:u.toFixed(2)]})]}),e.jsxs("button",{type:"button",onClick:()=>te(t.orderItem,t.availableQuantity),className:"btn btn-primary btn-sm",disabled:c.items.some(p=>p.originalOrderItem===t.orderItem._id),children:[e.jsx(De,{className:"h-4 w-4 mr-1"}),"Add"]})]},t.orderItem._id)})})]}),c.items.length>0&&e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Selected Items"}),e.jsx("div",{className:"space-y-4",children:c.items.map((t,s)=>{var u;return e.jsxs("div",{className:"p-3 bg-gray-50 rounded border",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:(u=D.find(p=>p.orderItem._id===t.originalOrderItem))==null?void 0:u.orderItem.product.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Max quantity: ",t.maxQuantity]})]}),e.jsx("button",{type:"button",onClick:()=>se(s),className:"text-red-500 hover:text-red-700",children:e.jsx(Je,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity *"}),e.jsx("input",{type:"number",min:"1",max:t.maxQuantity,value:t.quantity,onChange:p=>O(s,"quantity",parseInt(p.target.value)||1),className:"input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Return Reason *"}),e.jsxs("select",{value:t.returnReason,onChange:p=>O(s,"returnReason",p.target.value),className:"input",required:!0,children:[e.jsx("option",{value:"",children:"Select reason"}),e.jsx("option",{value:"defective",children:"Defective"}),e.jsx("option",{value:"wrong_item",children:"Wrong Item"}),e.jsx("option",{value:"not_as_described",children:"Not as Described"}),e.jsx("option",{value:"damaged_shipping",children:"Damaged in Shipping"}),e.jsx("option",{value:"changed_mind",children:"Changed Mind"}),e.jsx("option",{value:"duplicate_order",children:"Duplicate Order"}),e.jsx("option",{value:"size_issue",children:"Size Issue"}),e.jsx("option",{value:"quality_issue",children:"Quality Issue"}),e.jsx("option",{value:"late_delivery",children:"Late Delivery"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Condition *"}),e.jsxs("select",{value:t.condition,onChange:p=>O(s,"condition",p.target.value),className:"input",required:!0,children:[e.jsx("option",{value:"",children:"Select condition"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"like_new",children:"Like New"}),e.jsx("option",{value:"good",children:"Good"}),e.jsx("option",{value:"fair",children:"Fair"}),e.jsx("option",{value:"poor",children:"Poor"}),e.jsx("option",{value:"damaged",children:"Damaged"})]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Return Reason Details"}),e.jsx("textarea",{value:t.returnReasonDetail,onChange:p=>O(s,"returnReasonDetail",p.target.value),placeholder:"Additional details about the return reason...",className:"input",rows:2})]})]},s)})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Refund Method"}),e.jsxs("select",{value:c.refundMethod,onChange:t=>b(s=>({...s,refundMethod:t.target.value})),className:"input",children:[e.jsx("option",{value:"original_payment",children:"Original Payment Method"}),e.jsx("option",{value:"store_credit",children:"Store Credit"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"check",children:"Check"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:c.generalNotes,onChange:t=>b(s=>({...s,generalNotes:t.target.value})),placeholder:"Additional notes about this return request...",className:"input",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:X||!x||c.items.length===0,className:"btn btn-primary",children:X?e.jsx(re,{size:"sm"}):"Create Return Request"})]})]})]})}):null},vt=({return:n,isOpen:r,onClose:d,onStatusUpdate:m,onAddNote:f,onAddCommunication:c,isLoading:b})=>{var de,l,h,o,S,K,G,Q,oe,ce,me,xe,ue;const[x,j]=y.useState("details"),[$,R]=y.useState(!1),[V,M]=y.useState(!1),[w,L]=y.useState(!1),[C,E]=y.useState(""),[g,X]=y.useState(""),[Z,te]=y.useState(""),[se,O]=y.useState(!1),[P,A]=y.useState({type:"email",message:"",recipient:""}),{data:D,isLoading:le}=He(n==null?void 0:n._id,{skip:!(n!=null&&n._id)||!r}),{data:t}=Be(),s=(D==null?void 0:D.data)||D||n,u=a=>{switch(a){case"pending":return e.jsx($e,{className:"h-5 w-5 text-yellow-500"});case"approved":return e.jsx(H,{className:"h-5 w-5 text-blue-500"});case"rejected":return e.jsx(Re,{className:"h-5 w-5 text-red-500"});case"processing":return e.jsx(W,{className:"h-5 w-5 text-blue-500"});case"received":return e.jsx(W,{className:"h-5 w-5 text-green-500"});case"completed":return e.jsx(H,{className:"h-5 w-5 text-green-600"});case"cancelled":return e.jsx(Re,{className:"h-5 w-5 text-gray-500"});default:return e.jsx(Ae,{className:"h-5 w-5 text-gray-500"})}},p=a=>{switch(a){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"processing":return"bg-blue-100 text-blue-800";case"received":return"bg-green-100 text-green-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},F=a=>{switch(a){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"normal":return"bg-blue-100 text-blue-800";case"low":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},z=()=>{m(C,g),R(!1),E(""),X("")},q=()=>{f(Z,se),M(!1),te(""),O(!1)},U=()=>{c(P.type,P.message,P.recipient),L(!1),A({type:"email",message:"",recipient:""})},J=()=>{var Y,he,pe,ge,be,je,ye,v,T,fe,Ne,Se,Te,_e,Pe,Fe,ze,Me;const a=window.open("","_blank"),i=s,B=((Y=t==null?void 0:t.data)==null?void 0:Y.companyName)||(t==null?void 0:t.companyName)||"Your Company Name",ee=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Return Document - ${i.returnNumber}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 10px; font-size: 12px; }
          .header { text-align: center; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px; }
          .company-name { font-size: 16px; font-weight: bold; color: #333; }
          .document-title { font-size: 14px; color: #666; margin-top: 5px; }
          .return-info { margin-bottom: 15px; }
          .info-row { display: flex; justify-content: space-between; margin-bottom: 3px; padding: 2px 0; border-bottom: 1px solid #eee; font-size: 11px; }
          .info-label { font-weight: bold; color: #333; }
          .info-value { color: #666; }
          .items-table { width: 100%; border-collapse: collapse; margin: 10px 0; font-size: 10px; }
          .items-table th, .items-table td { border: 1px solid #ddd; padding: 4px; text-align: left; }
          .items-table th { background-color: #f5f5f5; font-weight: bold; font-size: 10px; }
          .items-table tr:nth-child(even) { background-color: #f9f9f9; }
          .totals { margin-top: 15px; text-align: right; }
          .total-row { display: flex; justify-content: space-between; margin-bottom: 3px; padding: 2px 0; font-size: 11px; }
          .total-label { font-weight: bold; }
          .total-value { font-weight: bold; font-size: 12px; }
          .footer { margin-top: 20px; text-align: center; color: #666; font-size: 10px; }
          @media print {
            body { margin: 5px; font-size: 10px; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="company-name">${B}</div>
          <div class="company-details" style="font-size: 10px; color: #666; margin-top: 5px;">
            ${((he=t==null?void 0:t.data)==null?void 0:he.address)||(t==null?void 0:t.address)||""} | ${((pe=t==null?void 0:t.data)==null?void 0:pe.contactNumber)||(t==null?void 0:t.contactNumber)||""} | ${((ge=t==null?void 0:t.data)==null?void 0:ge.email)||(t==null?void 0:t.email)||""}
          </div>
          <div class="document-title">RETURN DOCUMENT</div>
        </div>
        
        <div class="return-info" style="display: flex; gap: 20px; margin-bottom: 15px;">
          <div style="flex: 1;">
            <h3 style="color: #333; margin-bottom: 8px; font-size: 12px; border-bottom: 1px solid #ddd; padding-bottom: 3px;">CUSTOMER DETAILS</h3>
            <div class="info-row">
              <span class="info-label">Customer Name:</span>
              <span class="info-value">${(be=i.customer)!=null&&be.firstName&&((je=i.customer)!=null&&je.lastName)?`${i.customer.firstName} ${i.customer.lastName}`:((ye=i.customer)==null?void 0:ye.name)||((v=i.customer)==null?void 0:v.businessName)||"N/A"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Email:</span>
              <span class="info-value">${((T=i.customer)==null?void 0:T.email)||"N/A"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Phone:</span>
              <span class="info-value">${((fe=i.customer)==null?void 0:fe.phone)||"N/A"}</span>
            </div>
          </div>
          <div style="flex: 1;">
            <h3 style="color: #333; margin-bottom: 8px; font-size: 12px; border-bottom: 1px solid #ddd; padding-bottom: 3px;">RETURN DETAILS</h3>
            <div class="info-row">
              <span class="info-label">Return Number:</span>
              <span class="info-value">${i.returnNumber}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Original Order:</span>
              <span class="info-value">${((Ne=i.originalOrder)==null?void 0:Ne.orderNumber)||"N/A"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Status:</span>
              <span class="info-value">${((Se=i.status)==null?void 0:Se.toUpperCase())||"PENDING"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Priority:</span>
              <span class="info-value">${((Te=i.priority)==null?void 0:Te.toUpperCase())||"NORMAL"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Return Date:</span>
              <span class="info-value">${new Date(i.returnDate).toLocaleDateString()}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Refund Method:</span>
              <span class="info-value">${((_e=i.refundMethod)==null?void 0:_e.replace("_"," ").toUpperCase())||"ORIGINAL PAYMENT"}</span>
            </div>
          </div>
        </div>
        
        <table class="items-table">
          <thead>
            <tr>
              <th>Product</th>
              <th>Quantity</th>
              <th>Original Price</th>
              <th>Return Reason</th>
              <th>Condition</th>
              <th>Refund Amount</th>
              <th>Restocking Fee</th>
            </tr>
          </thead>
          <tbody>
            ${((Pe=i.items)==null?void 0:Pe.map(k=>{var I,Le,Ie;return`
              <tr>
                <td>${((I=k.product)==null?void 0:I.name)||"N/A"}</td>
                <td>${k.quantity||0}</td>
                <td>$${(k.originalPrice||0).toFixed(2)}</td>
                <td>${((Le=k.returnReason)==null?void 0:Le.replace("_"," ").toUpperCase())||"N/A"}</td>
                <td>${((Ie=k.condition)==null?void 0:Ie.toUpperCase())||"N/A"}</td>
                <td>$${(k.refundAmount||0).toFixed(2)}</td>
                <td>$${(k.restockingFee||0).toFixed(2)}</td>
              </tr>
            `}).join(""))||'<tr><td colspan="7">No items found</td></tr>'}
          </tbody>
        </table>
        
        <div class="totals">
          <div class="total-row">
            <span class="total-label">Total Refund Amount:</span>
            <span class="total-value">$${i.totalRefundAmount?i.totalRefundAmount.toFixed(2):i.items?i.items.reduce((k,I)=>k+(I.refundAmount||0),0).toFixed(2):"0.00"}</span>
          </div>
          <div class="total-row">
            <span class="total-label">Total Restocking Fee:</span>
            <span class="total-value">$${i.totalRestockingFee?i.totalRestockingFee.toFixed(2):i.items?i.items.reduce((k,I)=>k+(I.restockingFee||0),0).toFixed(2):"0.00"}</span>
          </div>
          <div class="total-row">
            <span class="total-label">Net Refund Amount:</span>
            <span class="total-value">$${i.netRefundAmount?i.netRefundAmount.toFixed(2):i.items?(i.items.reduce((k,I)=>k+(I.refundAmount||0),0)-i.items.reduce((k,I)=>k+(I.restockingFee||0),0)).toFixed(2):"0.00"}</span>
          </div>
        </div>
        
        ${i.generalNotes?`
          <div style="margin-top: 30px;">
            <h3 style="color: #333; margin-bottom: 10px;">Notes:</h3>
            <p style="color: #666; line-height: 1.5;">${i.generalNotes}</p>
          </div>
        `:""}
        
        <div class="footer">
          <p>Generated on ${new Date().toLocaleString()}</p>
          <p>This is a computer-generated document.</p>
          <p style="margin-top: 10px; font-weight: bold;">${B}</p>
          <p>${((Fe=t==null?void 0:t.data)==null?void 0:Fe.address)||""}</p>
          <p>Phone: ${((ze=t==null?void 0:t.data)==null?void 0:ze.contactNumber)||""} | Email: ${((Me=t==null?void 0:t.data)==null?void 0:Me.email)||""}</p>
        </div>
      </body>
      </html>
    `;a.document.write(ee),a.document.close(),a.onload=()=>{a.print(),a.close()}},N=a=>{switch(a){case"pending":return["approved","rejected"];case"approved":return["processing","rejected"];case"processing":return["received","rejected"];case"received":return["completed","rejected"];default:return[]}};if(!r||!s)return null;const ae=[{id:"details",label:"Details",icon:Ee},{id:"items",label:"Items",icon:W},{id:"notes",label:"Notes",icon:Ue},{id:"communication",label:"Communication",icon:Ce}],ie=N(s.status);return e.jsxs("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:[e.jsxs("div",{className:"relative top-10 mx-auto p-5 border w-11/12 max-w-6xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-medium text-gray-900",children:["Return ",s.returnNumber]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created ",new Date(s.returnDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:J,className:"text-gray-400 hover:text-gray-600",title:"Print Return Document",children:e.jsx(Ye,{className:"h-6 w-6"})}),e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-6 w-6"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${p(s.status)}`,children:[u(s.status),e.jsx("span",{className:"ml-2 capitalize",children:s.status})]}),e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${F(s.priority)}`,children:[s.priority||"normal"," priority"]})]}),ie.length>0&&e.jsx("div",{className:"flex space-x-2",children:ie.map(a=>e.jsxs("button",{onClick:()=>{E(a),R(!0)},disabled:b,className:`btn btn-sm ${a==="approved"||a==="completed"?"btn-primary":a==="rejected"?"btn-danger":"btn-secondary"}`,children:[a==="approved"&&e.jsx(H,{className:"h-4 w-4 mr-1"}),a==="rejected"&&e.jsx(Re,{className:"h-4 w-4 mr-1"}),a==="processing"&&e.jsx(W,{className:"h-4 w-4 mr-1"}),a==="received"&&e.jsx(W,{className:"h-4 w-4 mr-1"}),a==="completed"&&e.jsx(H,{className:"h-4 w-4 mr-1"}),a.charAt(0).toUpperCase()+a.slice(1)]},a))})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:ae.map(a=>{const i=a.icon;return e.jsxs("button",{onClick:()=>j(a.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${x===a.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(i,{className:"h-4 w-4 mr-2"}),a.label]},a.id)})})}),e.jsxs("div",{className:"min-h-[400px]",children:[x==="details"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Customer Information"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oe,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[(de=s.customer)==null?void 0:de.firstName," ",(l=s.customer)==null?void 0:l.lastName]}),e.jsx("div",{className:"text-sm text-gray-500",children:(h=s.customer)==null?void 0:h.email})]})]}),((o=s.customer)==null?void 0:o.phone)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ce,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsx("span",{children:s.customer.phone})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Order Information"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ee,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:(S=s.originalOrder)==null?void 0:S.orderNumber}),e.jsx("div",{className:"text-sm text-gray-500",children:"Original order"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ke,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsx("span",{children:new Date((K=s.originalOrder)==null?void 0:K.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qe,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsxs("span",{children:["$",(Q=(G=s.originalOrder)==null?void 0:G.total)==null?void 0:Q.toFixed(2)]})]})]})})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Return Details"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Return Type"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:s.returnType})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Refund Method"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:(oe=s.refundMethod)==null?void 0:oe.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Refund"}),e.jsxs("p",{className:"mt-1 text-lg font-semibold text-gray-900",children:["$",((ce=s.netRefundAmount)==null?void 0:ce.toFixed(2))||"0.00"]})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Timeline"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx($e,{className:"h-4 w-4 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Return Requested"}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(s.returnDate).toLocaleString()})]})]}),s.approvalDate&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(H,{className:"h-4 w-4 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Approved"}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(s.approvalDate).toLocaleString()})]})]}),s.completionDate&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(H,{className:"h-4 w-4 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Completed"}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(s.completionDate).toLocaleString()})]})]})]})})]})]}),x==="items"&&e.jsx("div",{className:"space-y-4",children:(me=s.items)==null?void 0:me.map((a,i)=>{var B,ee,Y;return e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:(B=a.product)==null?void 0:B.name})}),e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.quantity})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Return Reason"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:(ee=a.returnReason)==null?void 0:ee.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Condition"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:a.condition})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Refund Amount"}),e.jsxs("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:["$",((Y=a.refundAmount)==null?void 0:Y.toFixed(2))||"0.00"]})]})]}),a.returnReasonDetail&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Reason Details"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.returnReasonDetail})]})]})]},i)})}),x==="notes"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Notes"}),e.jsxs("button",{onClick:()=>M(!0),className:"btn btn-primary btn-sm",children:[e.jsx(it,{className:"h-4 w-4 mr-1"}),"Add Note"]})]}),((xe=s.notes)==null?void 0:xe.length)>0?e.jsx("div",{className:"space-y-3",children:s.notes.map((a,i)=>e.jsxs("div",{className:`p-3 rounded-lg ${a.isInternal?"bg-blue-50":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-sm text-gray-900",children:a.note}),e.jsx("div",{className:"text-xs text-gray-500 ml-3",children:new Date(a.addedAt).toLocaleDateString()})]}),a.addedBy&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Added by ",a.addedBy.firstName," ",a.addedBy.lastName,a.isInternal&&" (Internal)"]})]},i))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ue,{className:"mx-auto h-12 w-12 text-gray-400 mb-2"}),e.jsx("p",{children:"No notes added yet"})]})]}),x==="communication"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Communication Log"}),e.jsxs("button",{onClick:()=>L(!0),className:"btn btn-primary btn-sm",children:[e.jsx(mt,{className:"h-4 w-4 mr-1"}),"Log Communication"]})]}),((ue=s.communication)==null?void 0:ue.length)>0?e.jsx("div",{className:"space-y-3",children:s.communication.map((a,i)=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[a.type==="email"&&e.jsx(et,{className:"h-4 w-4 text-gray-400"}),a.type==="phone"&&e.jsx(Ce,{className:"h-4 w-4 text-gray-400"}),a.type==="in_person"&&e.jsx(Oe,{className:"h-4 w-4 text-gray-400"}),a.type==="system"&&e.jsx(Ae,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:a.type.replace("_"," ")}),a.recipient&&e.jsxs("span",{className:"text-sm text-gray-500",children:["to ",a.recipient]})]}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:a.message})]}),e.jsx("div",{className:"text-xs text-gray-500 ml-3",children:new Date(a.sentAt).toLocaleDateString()})]}),a.sentBy&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Sent by ",a.sentBy.firstName," ",a.sentBy.lastName]})]},i))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ce,{className:"mx-auto h-12 w-12 text-gray-400 mb-2"}),e.jsx("p",{children:"No communication logged yet"})]})]})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:e.jsx("button",{onClick:d,className:"btn btn-secondary",children:"Close"})})]}),$&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-60",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:["Update Status to ",C.charAt(0).toUpperCase()+C.slice(1)]}),e.jsx("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:g,onChange:a=>X(a.target.value),placeholder:"Add any notes about this status change...",className:"input",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>R(!1),className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:z,disabled:b,className:`btn ${C==="approved"||C==="completed"?"btn-primary":C==="rejected"?"btn-danger":"btn-secondary"}`,children:b?e.jsx(re,{size:"sm"}):"Update Status"})]})]})}),V&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-60",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Add Note"}),e.jsx("button",{onClick:()=>M(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note"}),e.jsx("textarea",{value:Z,onChange:a=>te(a.target.value),placeholder:"Enter your note...",className:"input",rows:4,required:!0})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:se,onChange:a=>O(a.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Internal note (not visible to customer)"})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>M(!1),className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:q,disabled:b||!Z.trim(),className:"btn btn-primary",children:b?e.jsx(re,{size:"sm"}):"Add Note"})]})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-60",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Log Communication"}),e.jsx("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),e.jsxs("select",{value:P.type,onChange:a=>A(i=>({...i,type:a.target.value})),className:"input",children:[e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"phone",children:"Phone"}),e.jsx("option",{value:"in_person",children:"In Person"}),e.jsx("option",{value:"system",children:"System"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),e.jsx("textarea",{value:P.message,onChange:a=>A(i=>({...i,message:a.target.value})),placeholder:"Enter communication details...",className:"input",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recipient (Optional)"}),e.jsx("input",{type:"text",value:P.recipient,onChange:a=>A(i=>({...i,recipient:a.target.value})),placeholder:"e.g., customer email or phone",className:"input"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>L(!1),className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:U,disabled:b||!P.message.trim(),className:"btn btn-primary",children:b?e.jsx(re,{size:"sm"}):"Log Communication"})]})]})})]})},ke=({title:n,value:r,icon:d,color:m="blue",subtitle:f,trend:c})=>{const b={blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",yellow:"bg-yellow-50 text-yellow-600",red:"bg-red-50 text-red-600",purple:"bg-purple-50 text-purple-600",indigo:"bg-indigo-50 text-indigo-600",pink:"bg-pink-50 text-pink-600",gray:"bg-gray-50 text-gray-600"};return e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`p-3 rounded-md ${b[m]}`,children:d})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:n}),e.jsxs("dd",{className:"flex items-baseline",children:[e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:r}),c&&e.jsxs("div",{className:`ml-2 flex items-baseline text-sm font-semibold ${c.direction==="up"?"text-green-600":"text-red-600"}`,children:[c.direction==="up"?e.jsx("svg",{className:"self-center flex-shrink-0 h-5 w-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}):e.jsx("svg",{className:"self-center flex-shrink-0 h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsxs("span",{className:"sr-only",children:[c.direction==="up"?"Increased":"Decreased"," by"]}),c.percentage,"%"]})]}),f&&e.jsx("dd",{className:"text-sm text-gray-500",children:f})]})})]})})})},wt=({filters:n,onFilterChange:r,isLoading:d})=>{const[m,f]=y.useState(!1),c=(j,$)=>{r({[j]:$})},b=()=>{r({status:"",returnType:"",priority:"",search:"",startDate:"",endDate:"",page:1})},x=n.status||n.returnType||n.priority||n.search||n.startDate||n.endDate;return e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters"}),x&&e.jsxs("button",{onClick:b,className:"text-sm text-gray-500 hover:text-gray-700 flex items-center",children:[e.jsx(_,{className:"h-4 w-4 mr-1"}),"Clear filters"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Return #, customer...",value:n.search,onChange:j=>c("search",j.target.value),className:"input pl-10",disabled:d})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:n.status,onChange:j=>c("status",j.target.value),className:"input",disabled:d,children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"received",children:"Received"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:n.returnType,onChange:j=>c("returnType",j.target.value),className:"input",disabled:d,children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"return",children:"Return"}),e.jsx("option",{value:"exchange",children:"Exchange"}),e.jsx("option",{value:"warranty",children:"Warranty"}),e.jsx("option",{value:"recall",children:"Recall"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{value:n.priority,onChange:j=>c("priority",j.target.value),className:"input",disabled:d,children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("button",{onClick:()=>f(!m),className:"flex items-center text-sm text-gray-600 hover:text-gray-800",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),m?"Hide":"Show"," Advanced Filters"]}),m&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:n.startDate,onChange:j=>c("startDate",j.target.value),className:"input",disabled:d})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:n.endDate,onChange:j=>c("endDate",j.target.value),className:"input",disabled:d})]})]})]}),x&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[n.status&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Status: ",n.status,e.jsx("button",{onClick:()=>c("status",""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-blue-400 hover:bg-blue-200 hover:text-blue-500",children:e.jsx(_,{className:"h-3 w-3"})})]}),n.returnType&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:["Type: ",n.returnType,e.jsx("button",{onClick:()=>c("returnType",""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-green-400 hover:bg-green-200 hover:text-green-500",children:e.jsx(_,{className:"h-3 w-3"})})]}),n.priority&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:["Priority: ",n.priority,e.jsx("button",{onClick:()=>c("priority",""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-orange-400 hover:bg-orange-200 hover:text-orange-500",children:e.jsx(_,{className:"h-3 w-3"})})]}),n.search&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:["Search: ",n.search,e.jsx("button",{onClick:()=>c("search",""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-purple-400 hover:bg-purple-200 hover:text-purple-500",children:e.jsx(_,{className:"h-3 w-3"})})]}),(n.startDate||n.endDate)&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:["Date: ",n.startDate||"Start"," - ",n.endDate||"End",e.jsx("button",{onClick:()=>{c("startDate",""),c("endDate","")},className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-gray-400 hover:bg-gray-200 hover:text-gray-500",children:e.jsx(_,{className:"h-3 w-3"})})]})]})]})})},Lt=()=>{var ie,de;const[n,r]=y.useState({page:1,limit:10,status:"",returnType:"",priority:"",search:"",startDate:"",endDate:""}),[d,m]=y.useState(null),[f,c]=y.useState(!1),[b,x]=y.useState("sales"),[j,$]=y.useState(!1);tt();const{data:R,isLoading:V,error:M,refetch:w}=ut(n,{onError:l=>{ne(l,"Fetch Returns")}}),{data:L,isLoading:C}=jt({startDate:n.startDate,endDate:n.endDate},{skip:!n.startDate||!n.endDate}),{data:E}=Be(),g=(E==null?void 0:E.data)||E,[X]=pt(),[Z]=ft(),te=async(l,h,o)=>{try{await X({returnId:l,status:h,notes:o}).unwrap(),we(`Return status updated to ${h}`),$(!1),m(null),w()}catch(S){ne(S,"Update Return Status")}},[se]=gt(),O=async(l,h,o)=>{try{await se({returnId:l,note:h,isInternal:o}).unwrap(),we("Note added successfully"),w()}catch(S){ne(S,"Add Note")}},P=async l=>{try{await Z(l).unwrap(),we("Return deleted successfully"),w()}catch(h){ne(h,"Delete Return")}},A=l=>{r(h=>({...h,...l,page:1}))},{data:D}=He(d==null?void 0:d._id,{skip:!(d!=null&&d._id)}),le=l=>{m({_id:l}),$(!0)};st.useEffect(()=>{D!=null&&D.data&&m(D.data)},[D]);const t=async(l,h="")=>{d&&await te(d._id,l,h)},[s]=bt(),u=async(l,h,o=null)=>{if(d)try{await s({returnId:d._id,type:l,message:h,recipient:o}).unwrap(),we("Communication logged successfully"),w()}catch(S){ne(S,"Add Communication")}},p=async l=>{window.confirm("Are you sure you want to delete this return? This action cannot be undone.")&&await P(l)},F=l=>{var G,Q,oe,ce,me,xe,ue,a,i,B,ee,Y,he,pe,ge,be,je,ye;const h=window.open("","_blank"),o=l,S=((G=g==null?void 0:g.data)==null?void 0:G.companyName)||"Your Company Name",K=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Return Document - ${o.returnNumber}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 10px; font-size: 12px; }
          .header { text-align: center; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px; }
          .company-name { font-size: 16px; font-weight: bold; color: #333; }
          .document-title { font-size: 14px; color: #666; margin-top: 5px; }
          .return-info { margin-bottom: 15px; }
          .info-row { display: flex; justify-content: space-between; margin-bottom: 3px; padding: 2px 0; border-bottom: 1px solid #eee; font-size: 11px; }
          .info-label { font-weight: bold; color: #333; }
          .info-value { color: #666; }
          .items-table { width: 100%; border-collapse: collapse; margin: 10px 0; font-size: 10px; }
          .items-table th, .items-table td { border: 1px solid #ddd; padding: 4px; text-align: left; }
          .items-table th { background-color: #f5f5f5; font-weight: bold; font-size: 10px; }
          .items-table tr:nth-child(even) { background-color: #f9f9f9; }
          .totals { margin-top: 15px; text-align: right; }
          .total-row { display: flex; justify-content: space-between; margin-bottom: 3px; padding: 2px 0; font-size: 11px; }
          .total-label { font-weight: bold; }
          .total-value { font-weight: bold; font-size: 12px; }
          .footer { margin-top: 20px; text-align: center; color: #666; font-size: 10px; }
          @media print {
            body { margin: 5px; font-size: 10px; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="company-name">${S}</div>
          <div class="company-details" style="font-size: 10px; color: #666; margin-top: 5px;">
            ${((Q=g==null?void 0:g.data)==null?void 0:Q.address)||""} | ${((oe=g==null?void 0:g.data)==null?void 0:oe.contactNumber)||""} | ${((ce=g==null?void 0:g.data)==null?void 0:ce.email)||""}
          </div>
          <div class="document-title">RETURN DOCUMENT</div>
        </div>
        
        <div class="return-info" style="display: flex; gap: 20px; margin-bottom: 15px;">
          <div style="flex: 1;">
            <h3 style="color: #333; margin-bottom: 8px; font-size: 12px; border-bottom: 1px solid #ddd; padding-bottom: 3px;">CUSTOMER DETAILS</h3>
            <div class="info-row">
              <span class="info-label">Customer Name:</span>
              <span class="info-value">${(me=o.customer)!=null&&me.firstName&&((xe=o.customer)!=null&&xe.lastName)?`${o.customer.firstName} ${o.customer.lastName}`:((ue=o.customer)==null?void 0:ue.name)||((a=o.customer)==null?void 0:a.businessName)||"N/A"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Email:</span>
              <span class="info-value">${((i=o.customer)==null?void 0:i.email)||"N/A"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Phone:</span>
              <span class="info-value">${((B=o.customer)==null?void 0:B.phone)||"N/A"}</span>
            </div>
          </div>
          <div style="flex: 1;">
            <h3 style="color: #333; margin-bottom: 8px; font-size: 12px; border-bottom: 1px solid #ddd; padding-bottom: 3px;">RETURN DETAILS</h3>
            <div class="info-row">
              <span class="info-label">Return Number:</span>
              <span class="info-value">${o.returnNumber}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Original Order:</span>
              <span class="info-value">${((ee=o.originalOrder)==null?void 0:ee.orderNumber)||"N/A"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Status:</span>
              <span class="info-value">${((Y=o.status)==null?void 0:Y.toUpperCase())||"PENDING"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Priority:</span>
              <span class="info-value">${((he=o.priority)==null?void 0:he.toUpperCase())||"NORMAL"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Return Date:</span>
              <span class="info-value">${new Date(o.returnDate).toLocaleDateString()}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Refund Method:</span>
              <span class="info-value">${((pe=o.refundMethod)==null?void 0:pe.replace("_"," ").toUpperCase())||"ORIGINAL PAYMENT"}</span>
            </div>
          </div>
        </div>
        
        <table class="items-table">
          <thead>
            <tr>
              <th>Product</th>
              <th>Quantity</th>
              <th>Original Price</th>
              <th>Return Reason</th>
              <th>Condition</th>
              <th>Refund Amount</th>
              <th>Restocking Fee</th>
            </tr>
          </thead>
          <tbody>
            ${((ge=o.items)==null?void 0:ge.map(v=>{var T,fe,Ne;return`
              <tr>
                <td>${((T=v.product)==null?void 0:T.name)||"N/A"}</td>
                <td>${v.quantity||0}</td>
                <td>$${(v.originalPrice||0).toFixed(2)}</td>
                <td>${((fe=v.returnReason)==null?void 0:fe.replace("_"," ").toUpperCase())||"N/A"}</td>
                <td>${((Ne=v.condition)==null?void 0:Ne.toUpperCase())||"N/A"}</td>
                <td>$${(v.refundAmount||0).toFixed(2)}</td>
                <td>$${(v.restockingFee||0).toFixed(2)}</td>
              </tr>
            `}).join(""))||'<tr><td colspan="7">No items found</td></tr>'}
          </tbody>
        </table>
        
        <div class="totals">
          <div class="total-row">
            <span class="total-label">Total Refund Amount:</span>
            <span class="total-value">$${o.totalRefundAmount?o.totalRefundAmount.toFixed(2):o.items?o.items.reduce((v,T)=>v+(T.refundAmount||0),0).toFixed(2):"0.00"}</span>
          </div>
          <div class="total-row">
            <span class="total-label">Total Restocking Fee:</span>
            <span class="total-value">$${o.totalRestockingFee?o.totalRestockingFee.toFixed(2):o.items?o.items.reduce((v,T)=>v+(T.restockingFee||0),0).toFixed(2):"0.00"}</span>
          </div>
          <div class="total-row">
            <span class="total-label">Net Refund Amount:</span>
            <span class="total-value">$${o.netRefundAmount?o.netRefundAmount.toFixed(2):o.items?(o.items.reduce((v,T)=>v+(T.refundAmount||0),0)-o.items.reduce((v,T)=>v+(T.restockingFee||0),0)).toFixed(2):"0.00"}</span>
          </div>
        </div>
        
        ${o.generalNotes?`
          <div style="margin-top: 30px;">
            <h3 style="color: #333; margin-bottom: 10px;">Notes:</h3>
            <p style="color: #666; line-height: 1.5;">${o.generalNotes}</p>
          </div>
        `:""}
        
        <div class="footer">
          <p>Generated on ${new Date().toLocaleString()}</p>
          <p>This is a computer-generated document.</p>
          <p style="margin-top: 10px; font-weight: bold;">${S}</p>
          <p>${((be=g==null?void 0:g.data)==null?void 0:be.address)||""}</p>
          <p>Phone: ${((je=g==null?void 0:g.data)==null?void 0:je.contactNumber)||""} | Email: ${((ye=g==null?void 0:g.data)==null?void 0:ye.email)||""}</p>
        </div>
      </body>
      </html>
    `;h.document.write(K),h.document.close(),h.onload=()=>{h.print(),h.close()}},z=l=>{switch(l){case"pending":return e.jsx($e,{className:"h-4 w-4 text-yellow-500"});case"approved":return e.jsx(H,{className:"h-4 w-4 text-blue-500"});case"rejected":return e.jsx(Re,{className:"h-4 w-4 text-red-500"});case"processing":return e.jsx(qe,{className:"h-4 w-4 text-blue-500"});case"received":return e.jsx(W,{className:"h-4 w-4 text-green-500"});case"completed":return e.jsx(H,{className:"h-4 w-4 text-green-600"});case"cancelled":return e.jsx(Re,{className:"h-4 w-4 text-gray-500"});default:return e.jsx(Ae,{className:"h-4 w-4 text-gray-500"})}},q=l=>{switch(l){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"processing":return"bg-blue-100 text-blue-800";case"received":return"bg-green-100 text-green-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},U=l=>{switch(l){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"normal":return"bg-blue-100 text-blue-800";case"low":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};if(V&&!R)return e.jsx(re,{message:"Loading returns..."});const J=((ie=R==null?void 0:R.data)==null?void 0:ie.returns)||[],N=((de=R==null?void 0:R.data)==null?void 0:de.pagination)||{},ae=(L==null?void 0:L.data)||{};return e.jsxs(at,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Return Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage returns, exchanges, and refunds"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>w(),className:"btn btn-secondary",children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs("button",{onClick:()=>{x("sales"),c(!0)},className:"btn btn-primary btn-md",children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Create Sales Return"]}),e.jsxs("button",{onClick:()=>{x("purchase"),c(!0)},className:"btn btn-primary btn-md",children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Create Purchase Return"]})]})]}),!C&&e.jsxs(nt,{cols:{default:1,md:2,lg:4},gap:6,children:[e.jsx(ke,{title:"Total Returns",value:ae.totalReturns||0,icon:e.jsx(W,{className:"h-5 w-5"}),color:"blue"}),e.jsx(ke,{title:"Pending Returns",value:ae.pendingReturns||0,icon:e.jsx($e,{className:"h-5 w-5"}),color:"yellow"}),e.jsx(ke,{title:"Total Refunds",value:`$${(ae.totalRefundAmount||0).toFixed(2)}`,icon:e.jsx(Qe,{className:"h-5 w-5"}),color:"green"}),e.jsx(ke,{title:"Return Rate",value:`${(ae.returnRate||0).toFixed(1)}%`,icon:e.jsx(rt,{className:"h-5 w-5"}),color:"purple"})]}),e.jsx(wt,{filters:n,onFilterChange:A,isLoading:V}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Returns"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[N.total||0," total returns"]})]})}),e.jsx("div",{className:"card-content p-0",children:V?e.jsx(lt,{rows:5,cols:6}):J.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(W,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2",children:"No returns found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your filters or create a new return"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Return #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map(l=>{var h,o,S,K,G,Q;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:new Date(l.returnDate).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(l.returnDate).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:((h=l.customer)==null?void 0:h.name)||((o=l.customer)==null?void 0:o.businessName)||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:((S=l.customer)==null?void 0:S.email)||"N/A"})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:(K=l.originalOrder)==null?void 0:K.orderNumber}),e.jsxs("div",{className:"text-sm text-gray-500",children:[((G=l.items)==null?void 0:G.length)||0," items"]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",((Q=l.netRefundAmount)==null?void 0:Q.toFixed(2))||"0.00"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:l.returnNumber}),e.jsx("div",{className:"text-sm text-gray-500 capitalize",children:l.returnType})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q(l.status)}`,children:[z(l.status),e.jsx("span",{className:"ml-1 capitalize",children:l.status})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${U(l.priority)}`,children:l.priority||"normal"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>le(l._id),className:"text-blue-600 hover:text-blue-900",title:"View Return Details",children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>F(l),className:"text-gray-600 hover:text-gray-900",title:"Print Return Document",children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>p(l._id),className:"text-red-600 hover:text-red-900",title:"Delete Return",disabled:!["pending","cancelled"].includes(l.status),children:e.jsx(ct,{className:"h-4 w-4"})})]})})]},l._id)})})]})})}),N.pages>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>A({page:N.current-1}),disabled:!N.hasPrev,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>A({page:N.current+1}),disabled:!N.hasNext,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(N.current-1)*n.limit+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(N.current*n.limit,N.total)})," ","of"," ",e.jsx("span",{className:"font-medium",children:N.total})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>A({page:N.current-1}),disabled:!N.hasPrev,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),[...Array(N.pages)].map((l,h)=>e.jsx("button",{onClick:()=>A({page:h+1}),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${N.current===h+1?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:h+1},h+1)),e.jsx("button",{onClick:()=>A({page:N.current+1}),disabled:!N.hasNext,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]})]}),f&&e.jsx(Nt,{isOpen:f,onClose:()=>c(!1),onSuccess:()=>{c(!1),w()},defaultReturnType:b}),j&&d&&e.jsx(vt,{return:d,isOpen:j,onClose:()=>{$(!1),m(null)},onStatusUpdate:t,onAddNote:O,onAddCommunication:u,isLoading:!1})]})};export{Lt as default};
