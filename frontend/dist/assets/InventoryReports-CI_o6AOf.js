import{r as T,c as J,o as e,X as se,am as we,b6 as q,I,P as U,T as L,C as A,w as K,bb as Z,bc as ve,b8 as ke,W as Ce,q as Se,R as H,ak as fe,bd as Te,be as Re,bf as De,bg as Fe,bh as Ae,S as Ie,a3 as pe}from"./index-jd7Ax_Ed.js";import{u as Le}from"./useMutation-n-l4Ns3H.js";import{F as te}from"./filter-CQLYjJyW.js";import{S as W}from"./star-DDOZYr3u.js";import{D as je}from"./download-bwqK3ulf.js";import{T as Ne}from"./trash-2-DCbqoVbR.js";import{A as P}from"./alert-circle-yrAHCiEw.js";import{A as Pe}from"./activity-BHXFDV_3.js";import{C as ee}from"./check-circle-8oGxTki5.js";import{I as ye}from"./info-D4lm7fBv.js";import{P as be}from"./plus-C2o0386P.js";import{E as _e}from"./eye-DMmE8Niy.js";const Oe=({onClose:f,onSuccess:j})=>{var _,n;const[b,h]=T.useState("basic"),[i,o]=T.useState({reportType:"comprehensive",periodType:"monthly",startDate:"",endDate:"",includeMetrics:{stockLevels:!0,turnoverRates:!0,agingAnalysis:!0,reorderPoints:!0,costAnalysis:!0,profitMargins:!0},filters:{categories:[],suppliers:[],stockStatus:[],turnoverRanges:[],agingRanges:[]},thresholds:{lowStockThreshold:10,overstockThreshold:100,fastTurnoverThreshold:12,slowTurnoverThreshold:4,agingThreshold:90,oldThreshold:180,veryOldThreshold:365}}),{data:C}=J("categories",()=>ke.getCategories({limit:1e3})),{data:S}=J("suppliers",()=>Ce.getSuppliers({limit:1e3})),R=Le(ve.generateReport,{onSuccess:()=>{Z.success("Inventory report generated successfully"),j()},onError:s=>{K(s,"Generate Report")}}),g=(s,l)=>{o(d=>({...d,[s]:l}))},m=(s,l,d)=>{o(u=>({...u,[s]:{...u[s],[l]:d}}))},x=(s,l,d,u)=>{o(y=>({...y,[s]:{...y[s],[l]:u?[...y[s][l],d]:y[s][l].filter(F=>F!==d)}}))},r=s=>{s.preventDefault(),R.mutate(i)},p=s=>{const l=new Date;let d,u;switch(s){case"daily":d=new Date(l.getFullYear(),l.getMonth(),l.getDate()),u=new Date(d.getTime()+24*60*60*1e3);break;case"weekly":const y=l.getDay();d=new Date(l.getTime()-y*24*60*60*1e3),d.setHours(0,0,0,0),u=new Date(d.getTime()+7*24*60*60*1e3);break;case"monthly":d=new Date(l.getFullYear(),l.getMonth(),1),u=new Date(l.getFullYear(),l.getMonth()+1,1);break;case"quarterly":const F=Math.floor(l.getMonth()/3);d=new Date(l.getFullYear(),F*3,1),u=new Date(l.getFullYear(),(F+1)*3,1);break;case"yearly":d=new Date(l.getFullYear(),0,1),u=new Date(l.getFullYear()+1,0,1);break;default:d=new Date(l.getFullYear(),l.getMonth(),1),u=new Date(l.getFullYear(),l.getMonth()+1,1)}return{startDate:d.toISOString().split("T")[0],endDate:u.toISOString().split("T")[0]}},N=s=>{const l=p(s);o(d=>({...d,periodType:s,startDate:l.startDate,endDate:l.endDate}))},D=[{id:"basic",name:"Basic Settings",icon:we},{id:"metrics",name:"Metrics",icon:q},{id:"filters",name:"Filters",icon:te},{id:"thresholds",name:"Thresholds",icon:I}];return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Generate Inventory Report"}),e.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600",children:e.jsx(se,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:D.map(s=>{const l=s.icon;return e.jsxs("button",{onClick:()=>h(s.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center ${b===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(l,{className:"h-4 w-4 mr-2"}),s.name]},s.id)})})}),e.jsxs("form",{onSubmit:r,children:[b==="basic"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{value:"stock_levels",label:"Stock Levels",icon:U,description:"Current inventory levels and stock status"},{value:"turnover_rates",label:"Turnover Rates",icon:L,description:"Product movement and velocity analysis"},{value:"aging_analysis",label:"Aging Analysis",icon:A,description:"Inventory aging and potential obsolescence"},{value:"comprehensive",label:"Comprehensive",icon:q,description:"Complete inventory analysis with all metrics"}].map(s=>{const l=s.icon;return e.jsxs("div",{className:`relative border rounded-lg p-4 cursor-pointer ${i.reportType===s.value?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onClick:()=>g("reportType",s.value),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.label}),e.jsx("div",{className:"text-xs text-gray-500",children:s.description})]})]}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("input",{type:"radio",name:"reportType",value:s.value,checked:i.reportType===s.value,onChange:()=>g("reportType",s.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"})})]},s.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Period"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"},{value:"yearly",label:"Yearly"},{value:"custom",label:"Custom"}].map(s=>e.jsx("button",{type:"button",onClick:()=>N(s.value),className:`px-4 py-2 text-sm font-medium rounded-md border ${i.periodType===s.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:s.label},s.value))})]}),i.periodType==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:i.startDate,onChange:s=>g("startDate",s.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:i.endDate,onChange:s=>g("endDate",s.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]})]})]}),b==="metrics"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Include Metrics"}),e.jsx("div",{className:"space-y-3",children:[{key:"stockLevels",label:"Stock Levels",description:"Current inventory levels and stock status"},{key:"turnoverRates",label:"Turnover Rates",description:"Product movement and velocity analysis"},{key:"agingAnalysis",label:"Aging Analysis",description:"Inventory aging and potential obsolescence"},{key:"reorderPoints",label:"Reorder Points",description:"Reorder point analysis and recommendations"},{key:"costAnalysis",label:"Cost Analysis",description:"Inventory cost analysis and valuation"},{key:"profitMargins",label:"Profit Margins",description:"Profit margin analysis by product"}].map(s=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{type:"checkbox",checked:i.includeMetrics[s.key],onChange:l=>m("includeMetrics",s.key,l.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsxs("div",{className:"ml-3 text-sm",children:[e.jsx("label",{className:"font-medium text-gray-700",children:s.label}),e.jsx("p",{className:"text-gray-500",children:s.description})]})]},s.key))})]})}),b==="filters"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Categories"}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-md p-3",children:(_=C==null?void 0:C.categories)==null?void 0:_.map(s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:i.filters.categories.includes(s._id),onChange:l=>x("filters","categories",s._id,l.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:s.name})]},s._id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Suppliers"}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-md p-3",children:(n=S==null?void 0:S.suppliers)==null?void 0:n.map(s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:i.filters.suppliers.includes(s._id),onChange:l=>x("filters","suppliers",s._id,l.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:s.name})]},s._id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Stock Status"}),e.jsx("div",{className:"space-y-2",children:[{value:"in_stock",label:"In Stock"},{value:"low_stock",label:"Low Stock"},{value:"out_of_stock",label:"Out of Stock"},{value:"overstocked",label:"Overstocked"}].map(s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:i.filters.stockStatus.includes(s.value),onChange:l=>x("filters","stockStatus",s.value,l.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:s.label})]},s.value))})]})]}),b==="thresholds"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Low Stock Threshold"}),e.jsx("input",{type:"number",min:"0",value:i.thresholds.lowStockThreshold,onChange:s=>m("thresholds","lowStockThreshold",parseInt(s.target.value)),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Overstock Threshold"}),e.jsx("input",{type:"number",min:"0",value:i.thresholds.overstockThreshold,onChange:s=>m("thresholds","overstockThreshold",parseInt(s.target.value)),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fast Turnover Threshold (times/year)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:i.thresholds.fastTurnoverThreshold,onChange:s=>m("thresholds","fastTurnoverThreshold",parseFloat(s.target.value)),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slow Turnover Threshold (times/year)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:i.thresholds.slowTurnoverThreshold,onChange:s=>m("thresholds","slowTurnoverThreshold",parseFloat(s.target.value)),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aging Threshold (days)"}),e.jsx("input",{type:"number",min:"0",value:i.thresholds.agingThreshold,onChange:s=>m("thresholds","agingThreshold",parseInt(s.target.value)),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Old Threshold (days)"}),e.jsx("input",{type:"number",min:"0",value:i.thresholds.oldThreshold,onChange:s=>m("thresholds","oldThreshold",parseInt(s.target.value)),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Very Old Threshold (days)"}),e.jsx("input",{type:"number",min:"0",value:i.thresholds.veryOldThreshold,onChange:s=>m("thresholds","veryOldThreshold",parseInt(s.target.value)),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:R.isLoading,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:R.isLoading?"Generating...":"Generate Report"})]})]})]})})},Me=({filters:f,onFilterChange:j,onClose:b})=>{const[h,i]=T.useState(f),o=(r,p)=>{const N={...h,[r]:p};i(N)},C=()=>{j(h),b()},S=()=>{const r={page:1,limit:10,reportType:"",status:"",generatedBy:"",startDate:"",endDate:"",sortBy:"generatedAt",sortOrder:"desc"};i(r),j(r)},R=[{value:"",label:"All Types"},{value:"stock_levels",label:"Stock Levels"},{value:"turnover_rates",label:"Turnover Rates"},{value:"aging_analysis",label:"Aging Analysis"},{value:"comprehensive",label:"Comprehensive"},{value:"custom",label:"Custom"}],g=[{value:"",label:"All Statuses"},{value:"generating",label:"Generating"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"},{value:"archived",label:"Archived"}],m=[{value:"generatedAt",label:"Generated Date"},{value:"reportName",label:"Report Name"},{value:"status",label:"Status"},{value:"viewCount",label:"View Count"}],x=[{value:"desc",label:"Descending"},{value:"asc",label:"Ascending"}];return e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Filters"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:S,className:"text-sm text-gray-500 hover:text-gray-700 flex items-center",children:[e.jsx(Se,{className:"h-4 w-4 mr-1"}),"Reset"]}),e.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-600",children:e.jsx(se,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Report Type"}),e.jsx("select",{value:h.reportType,onChange:r=>o("reportType",r.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:R.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("select",{value:h.status,onChange:r=>o("status",r.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:g.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:h.startDate,onChange:r=>o("startDate",r.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:h.endDate,onChange:r=>o("endDate",r.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Sort By"}),e.jsx("select",{value:h.sortBy,onChange:r=>o("sortBy",r.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:m.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Sort Order"}),e.jsx("select",{value:h.sortOrder,onChange:r=>o("sortOrder",r.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:x.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Results Per Page"}),e.jsxs("select",{value:h.limit,onChange:r=>o("limit",parseInt(r.target.value)),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Quick Date Filters"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"Today",days:0},{label:"Last 7 days",days:7},{label:"Last 30 days",days:30},{label:"Last 90 days",days:90},{label:"This year",days:365}].map(r=>{const p=new Date,N=new Date;return r.days>0?N.setDate(p.getDate()-r.days):r.days===0?(N.setHours(0,0,0,0),p.setHours(23,59,59,999)):(N.setFullYear(p.getFullYear(),0,1),p.setFullYear(p.getFullYear(),11,31)),e.jsx("button",{type:"button",onClick:()=>{o("startDate",N.toISOString().split("T")[0]),o("endDate",p.toISOString().split("T")[0])},className:"px-3 py-1 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:r.label},r.label)})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:b,className:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{onClick:C,className:"px-3 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Apply Filters"})]})]})},Ue=({report:f,onClose:j,onExport:b,onDelete:h,onToggleFavorite:i})=>{var s,l,d,u,y,F,E,$,G,V,Y,B,Q;const[o,C]=T.useState("overview"),{data:S,isLoading:R}=J(["inventoryReport",f.reportId],()=>ve.getReport(f.reportId),{enabled:!!f.reportId,onError:a=>{console.error("Error fetching report details:",a)}}),g=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a),m=a=>new Intl.NumberFormat("en-US").format(a),x=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),r=a=>{switch(a){case"completed":return e.jsx(ee,{className:"h-4 w-4 text-green-600"});case"generating":return e.jsx(H,{className:"h-4 w-4 text-blue-600 animate-spin"});case"failed":return e.jsx(P,{className:"h-4 w-4 text-red-600"});case"archived":return e.jsx(A,{className:"h-4 w-4 text-gray-600"});default:return e.jsx(A,{className:"h-4 w-4 text-gray-600"})}},p=a=>{switch(a){case"completed":return"text-green-600 bg-green-50";case"generating":return"text-blue-600 bg-blue-50";case"failed":return"text-red-600 bg-red-50";case"archived":return"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}},N=a=>{switch(a){case"warning":return e.jsx(I,{className:"h-5 w-5 text-orange-500"});case"alert":return e.jsx(P,{className:"h-5 w-5 text-red-500"});case"opportunity":return e.jsx(L,{className:"h-5 w-5 text-green-500"});case"achievement":return e.jsx(ee,{className:"h-5 w-5 text-blue-500"});case"recommendation":return e.jsx(ye,{className:"h-5 w-5 text-purple-500"});default:return e.jsx(ye,{className:"h-5 w-5 text-gray-500"})}},D=a=>{switch(a){case"warning":return"border-orange-200 bg-orange-50";case"alert":return"border-red-200 bg-red-50";case"opportunity":return"border-green-200 bg-green-50";case"achievement":return"border-blue-200 bg-blue-50";case"recommendation":return"border-purple-200 bg-purple-50";default:return"border-gray-200 bg-gray-50"}},_=[{id:"overview",name:"Overview",icon:q},{id:"stock-levels",name:"Stock Levels",icon:U},{id:"turnover-rates",name:"Turnover Rates",icon:L},{id:"aging-analysis",name:"Aging Analysis",icon:A},{id:"insights",name:"Insights",icon:I}];if(R)return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-6xl shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(H,{className:"h-8 w-8 text-blue-600 animate-spin"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading report details..."})]})})});const n=S||f;return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-10 mx-auto p-5 border w-11/12 max-w-6xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mr-3",children:n.reportName}),n.isFavorite&&e.jsx(W,{className:"h-5 w-5 text-yellow-400 fill-current"})]}),e.jsxs("div",{className:"mt-2 flex items-center space-x-4",children:[e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(n.status)}`,children:[r(n.status),e.jsx("span",{className:"ml-1",children:n.status.toUpperCase()})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Generated ",x(n.generatedAt)]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[n.viewCount," views"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>i(n.reportId,!n.isFavorite),className:`p-2 rounded-md ${n.isFavorite?"text-yellow-400":"text-gray-400"} hover:text-yellow-400`,title:n.isFavorite?"Remove from favorites":"Add to favorites",children:e.jsx(W,{className:`h-5 w-5 ${n.isFavorite?"fill-current":""}`})}),e.jsx("button",{onClick:()=>b(n.reportId,"pdf"),className:"p-2 text-gray-400 hover:text-gray-600",title:"Export Report",children:e.jsx(je,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>h(n.reportId),className:"p-2 text-red-400 hover:text-red-600",title:"Delete Report",children:e.jsx(Ne,{className:"h-5 w-5"})}),e.jsx("button",{onClick:j,className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(se,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:_.map(a=>{const w=a.icon;return e.jsxs("button",{onClick:()=>C(a.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center ${o===a.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),a.name]},a.id)})})}),e.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[o==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:m(((s=n.summary)==null?void 0:s.totalProducts)||0)})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(fe,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Stock Value"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:g(((l=n.summary)==null?void 0:l.totalStockValue)||0)})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Low Stock"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:m(((d=n.summary)==null?void 0:d.lowStockProducts)||0)})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-8 w-8 text-red-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Out of Stock"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:m(((u=n.summary)==null?void 0:u.outOfStockProducts)||0)})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Average Turnover Rate"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[(((y=n.summary)==null?void 0:y.averageTurnoverRate)||0).toFixed(1),"x/year"]})]}),e.jsx(L,{className:"h-6 w-6 text-green-600"})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Fast Moving Products"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:m(((F=n.summary)==null?void 0:F.fastMovingProducts)||0)})]}),e.jsx(Pe,{className:"h-6 w-6 text-blue-600"})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Potential Loss"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:g(((E=n.summary)==null?void 0:E.totalPotentialLoss)||0)})]}),e.jsx(I,{className:"h-6 w-6 text-red-600"})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Report Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Report Type"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.reportType.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Period Type"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.periodType.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Start Date"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:x(n.startDate)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"End Date"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:x(n.endDate)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Generated By"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[($=n.generatedBy)==null?void 0:$.firstName," ",(G=n.generatedBy)==null?void 0:G.lastName]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Last Viewed"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:x(n.lastViewedAt)})]})]})]})]}),o==="stock-levels"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Stock Levels Analysis"}),((V=n.stockLevels)==null?void 0:V.length)>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reorder Point"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.stockLevels.slice(0,10).map((a,w)=>{var v;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:((v=a.product)==null?void 0:v.name)||"Unknown Product"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m(a.metrics.currentStock)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m(a.metrics.reorderPoint)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g(a.metrics.stockValue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.metrics.stockStatus==="out_of_stock"?"bg-red-100 text-red-800":a.metrics.stockStatus==="low_stock"?"bg-orange-100 text-orange-800":a.metrics.stockStatus==="overstocked"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:a.metrics.stockStatus.replace("_"," ").toUpperCase()})})]},w)})})]})}):e.jsx("p",{className:"text-gray-500",children:"No stock level data available"})]}),o==="turnover-rates"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Turnover Rates Analysis"}),((Y=n.turnoverRates)==null?void 0:Y.length)>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Turnover Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Sold"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days to Sell"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.turnoverRates.slice(0,10).map((a,w)=>{var v;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:((v=a.product)==null?void 0:v.name)||"Unknown Product"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[a.metrics.turnoverRate.toFixed(1),"x/year"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m(a.metrics.totalSold)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[a.metrics.daysToSell.toFixed(0)," days"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.metrics.turnoverCategory==="fast"?"bg-green-100 text-green-800":a.metrics.turnoverCategory==="slow"?"bg-orange-100 text-orange-800":a.metrics.turnoverCategory==="dead"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:a.metrics.turnoverCategory.toUpperCase()})})]},w)})})]})}):e.jsx("p",{className:"text-gray-500",children:"No turnover rate data available"})]}),o==="aging-analysis"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Aging Analysis"}),((B=n.agingAnalysis)==null?void 0:B.length)>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days in Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Sold"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Potential Loss"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.agingAnalysis.slice(0,10).map((a,w)=>{var v;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:((v=a.product)==null?void 0:v.name)||"Unknown Product"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[m(a.metrics.daysInStock)," days"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.metrics.lastSoldDate?x(a.metrics.lastSoldDate):"Never"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g(a.metrics.stockValue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g(a.metrics.potentialLoss)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.metrics.agingCategory==="very_old"?"bg-red-100 text-red-800":a.metrics.agingCategory==="old"?"bg-orange-100 text-orange-800":a.metrics.agingCategory==="aging"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:a.metrics.agingCategory.replace("_"," ").toUpperCase()})})]},w)})})]})}):e.jsx("p",{className:"text-gray-500",children:"No aging analysis data available"})]}),o==="insights"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Insights & Recommendations"}),((Q=n.insights)==null?void 0:Q.length)>0?e.jsx("div",{className:"space-y-4",children:n.insights.map((a,w)=>e.jsx("div",{className:`border rounded-lg p-4 ${D(a.type)}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:N(a.type)}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900",children:a.title}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:a.description}),a.suggestedActions&&a.suggestedActions.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Suggested Actions:"}),e.jsx("ul",{className:"mt-1 text-sm text-gray-600 list-disc list-inside",children:a.suggestedActions.map((v,X)=>e.jsx("li",{children:v},X))})]})]}),e.jsx("div",{className:"ml-3 flex-shrink-0",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.impact==="high"?"bg-red-100 text-red-800":a.impact==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[a.impact.toUpperCase()," IMPACT"]})})]})},w))}):e.jsx("p",{className:"text-gray-500",children:"No insights available for this report"})]})]})]})})},Je=()=>{var re,le,ne,ie,de,ce,oe,me,xe,ue,he;const[f,j]=T.useState(!1),[b,h]=T.useState(!1),[i,o]=T.useState(!1),[C,S]=T.useState(null),[R,g]=T.useState(""),[m,x]=T.useState({page:1,limit:10,reportType:"",status:"",generatedBy:"",startDate:"",endDate:"",sortBy:"generatedAt",sortOrder:"desc"}),{data:r,isLoading:p,error:N}=Te(m,{onError:t=>{K(t,"Inventory Reports")}}),{data:D,isLoading:_,error:n}=Re(void 0,{retry:1,refetchOnFocus:!1}),{data:s,isLoading:l}=De({limit:5},{retry:1,refetchOnFocus:!1}),{data:d,isLoading:u}=Fe({limit:5,period:"30d"},{retry:1,refetchOnFocus:!1}),{data:y,isLoading:F}=Ae({limit:5,threshold:90},{retry:1,refetchOnFocus:!1}),E=t=>{x(c=>({...c,...t,page:1}))},$=t=>{g(t),x(c=>({...c,search:t,page:1}))},G=t=>{S(t),h(!0)},V=async t=>{window.confirm("Are you sure you want to delete this report? This action cannot be undone.")&&await handleDeleteReport(t)},Y=async(t,c)=>{try{const O=await exportReport({id:t,format:c}).unwrap(),ge=window.URL.createObjectURL(O),M=document.createElement("a");M.href=ge,M.download=`inventory-report-${t}.${c}`,document.body.appendChild(M),M.click(),window.URL.revokeObjectURL(ge),document.body.removeChild(M),Z.success(`Report exported as ${c.toUpperCase()}`)}catch(O){K(O,"Export Report")}},B=()=>{Z.success("Data refreshed")},Q=t=>{switch(t){case"completed":return e.jsx(ee,{className:"h-4 w-4 text-green-600"});case"generating":return e.jsx(H,{className:"h-4 w-4 text-blue-600 animate-spin"});case"failed":return e.jsx(P,{className:"h-4 w-4 text-red-600"});case"archived":return e.jsx(A,{className:"h-4 w-4 text-gray-600"});default:return e.jsx(A,{className:"h-4 w-4 text-gray-600"})}},a=t=>{switch(t){case"completed":return"text-green-600 bg-green-50";case"generating":return"text-blue-600 bg-blue-50";case"failed":return"text-red-600 bg-red-50";case"archived":return"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}},w=t=>{switch(t){case"stock_levels":return e.jsx(U,{className:"h-4 w-4"});case"turnover_rates":return e.jsx(L,{className:"h-4 w-4"});case"aging_analysis":return e.jsx(A,{className:"h-4 w-4"});case"comprehensive":return e.jsx(q,{className:"h-4 w-4"});default:return e.jsx(pe,{className:"h-4 w-4"})}},v=t=>{switch(t){case"stock_levels":return"text-blue-600 bg-blue-50";case"turnover_rates":return"text-green-600 bg-green-50";case"aging_analysis":return"text-orange-600 bg-orange-50";case"comprehensive":return"text-purple-600 bg-purple-50";default:return"text-gray-600 bg-gray-50"}},X=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),z=t=>new Intl.NumberFormat("en-US").format(t),ae=(r==null?void 0:r.reports)||[],k=(r==null?void 0:r.pagination)||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inventory Reports"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Comprehensive inventory analytics including stock levels, turnover rates, and aging analysis"})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[e.jsxs("button",{onClick:B,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs("button",{onClick:()=>j(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Generate Report"]})]})]}),n&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(P,{className:"h-5 w-5 text-red-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading inventory summary"}),e.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[e.jsx("p",{children:((le=(re=n.response)==null?void 0:re.data)==null?void 0:le.message)||n.message}),((ie=(ne=n.response)==null?void 0:ne.data)==null?void 0:ie.details)&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"cursor-pointer",children:"Technical details"}),e.jsx("pre",{className:"mt-2 text-xs bg-red-100 p-2 rounded overflow-auto",children:n.response.data.details})]})]})]})]})}),D&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(U,{className:"h-6 w-6 text-blue-600"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Products"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:z(((de=D.summary)==null?void 0:de.totalProducts)||0)})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(fe,{className:"h-6 w-6 text-green-600"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Stock Value"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:X(((ce=D.summary)==null?void 0:ce.totalStockValue)||0)})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(I,{className:"h-6 w-6 text-orange-600"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Low Stock"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:z(((oe=D.alerts)==null?void 0:oe.lowStock)||0)})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(P,{className:"h-6 w-6 text-red-600"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Out of Stock"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:z(((me=D.alerts)==null?void 0:me.outOfStock)||0)})]})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Stock Level Alerts"}),l?e.jsx("div",{className:"animate-pulse space-y-3",children:[...Array(3)].map((t,c)=>e.jsx("div",{className:"h-4 bg-gray-200 rounded"},c))}):((xe=s==null?void 0:s.stockLevels)==null?void 0:xe.length)>0?e.jsx("div",{className:"space-y-3",children:s.stockLevels.slice(0,5).map((t,c)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-3 ${t.metrics.stockStatus==="out_of_stock"?"bg-red-500":t.metrics.stockStatus==="low_stock"?"bg-orange-500":"bg-green-500"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:t.product.name})]}),e.jsx("span",{className:"text-sm text-gray-500",children:z(t.metrics.currentStock)})]},c))}):e.jsx("p",{className:"text-sm text-gray-500",children:"No stock level data available"})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Fast Moving Products"}),u?e.jsx("div",{className:"animate-pulse space-y-3",children:[...Array(3)].map((t,c)=>e.jsx("div",{className:"h-4 bg-gray-200 rounded"},c))}):((ue=d==null?void 0:d.turnoverRates)==null?void 0:ue.length)>0?e.jsx("div",{className:"space-y-3",children:d.turnoverRates.slice(0,5).map((t,c)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"h-4 w-4 text-green-500 mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:t.product.name})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[t.metrics.turnoverRate.toFixed(1),"x"]})]},c))}):e.jsx("p",{className:"text-sm text-gray-500",children:"No turnover data available"})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Aging Inventory"}),F?e.jsx("div",{className:"animate-pulse space-y-3",children:[...Array(3)].map((t,c)=>e.jsx("div",{className:"h-4 bg-gray-200 rounded"},c))}):((he=y==null?void 0:y.agingAnalysis)==null?void 0:he.length)>0?e.jsx("div",{className:"space-y-3",children:y.agingAnalysis.slice(0,5).map((t,c)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"h-4 w-4 text-orange-500 mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:t.product.name})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[t.metrics.daysInStock,"d"]})]},c))}):e.jsx("p",{className:"text-sm text-gray-500",children:"No aging data available"})]})})]}),e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[e.jsx("div",{className:"flex-1 max-w-lg",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ie,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search reports...",value:R,onChange:t=>$(t.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})}),e.jsx("div",{className:"flex space-x-3",children:e.jsxs("button",{onClick:()=>o(!i),className:`inline-flex items-center px-3 py-2 border text-sm leading-4 font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${i?"border-blue-500 text-blue-700 bg-blue-50":"border-gray-300 text-gray-700 bg-white hover:bg-gray-50"}`,children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Filters"]})})]}),i&&e.jsx("div",{className:"mt-4",children:e.jsx(Me,{filters:m,onFilterChange:E,onClose:()=>o(!1)})})]})}),e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[e.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Inventory Reports"}),e.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Generated inventory reports with detailed analytics"})]}),p?e.jsx("div",{className:"px-4 py-5 sm:px-6",children:e.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((t,c)=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},c))})}):ae.length===0?e.jsxs("div",{className:"px-4 py-5 sm:px-6 text-center",children:[e.jsx(pe,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No reports found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by generating your first inventory report."}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>j(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]}):e.jsx("ul",{className:"divide-y divide-gray-200",children:ae.map(t=>e.jsx("li",{children:e.jsx("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:w(t.reportType)}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-sm font-medium text-blue-600 truncate",children:t.reportName}),t.isFavorite&&e.jsx(W,{className:"ml-2 h-4 w-4 text-yellow-400 fill-current"})]}),e.jsxs("div",{className:"mt-1 flex items-center space-x-4",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v(t.reportType)}`,children:t.reportType.replace("_"," ").toUpperCase()}),e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a(t.status)}`,children:[Q(t.status),e.jsx("span",{className:"ml-1",children:t.status.toUpperCase()})]}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(t.generatedAt).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>G(t),className:"text-blue-600 hover:text-blue-900",title:"View Report",children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>handleToggleFavorite(t.reportId,!t.isFavorite),className:`${t.isFavorite?"text-yellow-400":"text-gray-400"} hover:text-yellow-400`,title:t.isFavorite?"Remove from favorites":"Add to favorites",children:e.jsx(W,{className:`h-4 w-4 ${t.isFavorite?"fill-current":""}`})}),e.jsx("button",{onClick:()=>Y(t.reportId,"pdf"),className:"text-gray-400 hover:text-gray-600",title:"Export Report",children:e.jsx(je,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>V(t.reportId),className:"text-red-400 hover:text-red-600",title:"Delete Report",children:e.jsx(Ne,{className:"h-4 w-4"})})]})]})})},t._id))}),k.pages>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>x(t=>({...t,page:t.page-1})),disabled:!k.hasPrev,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>x(t=>({...t,page:t.page+1})),disabled:!k.hasNext,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(k.current-1)*m.limit+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(k.current*m.limit,k.total)})," ","of"," ",e.jsx("span",{className:"font-medium",children:k.total})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx("button",{onClick:()=>x(t=>({...t,page:t.page-1})),disabled:!k.hasPrev,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),[...Array(k.pages)].map((t,c)=>e.jsx("button",{onClick:()=>x(O=>({...O,page:c+1})),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${k.current===c+1?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:c+1},c)),e.jsx("button",{onClick:()=>x(t=>({...t,page:t.page+1})),disabled:!k.hasNext,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]})]}),f&&e.jsx(Oe,{onClose:()=>j(!1),onSuccess:()=>{j(!1)}}),b&&C&&e.jsx(Ue,{report:C,onClose:()=>{h(!1),S(null)},onExport:handleExportReport,onDelete:handleDeleteReport,onToggleFavorite:handleToggleFavorite})]})};export{Je as default};
