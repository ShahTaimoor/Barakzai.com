import{E as ae,r as j,aC as re,u as ne,c as M,o as e,an as le,S as ie,U as E,ae as U,P as D,T as L,ak as $,aw as ce,X as A,af as de,N as O,Q as u,ap as N}from"./index-jd7Ax_Ed.js";import{u as C}from"./useMutation-n-l4Ns3H.js";import{D as oe}from"./ConfirmationDialog-EbANb_5f.js";import{a as me}from"./useConfirmation-BnXgMCcj.js";import{P as xe}from"./plus-C2o0386P.js";import{P as Q}from"./phone-Dkvr6QGJ.js";import{E as ue}from"./eye-DMmE8Niy.js";import{P as he}from"./pen-square-CzKMgeH3.js";import{T as pe}from"./trash-2-DCbqoVbR.js";import"./shield-DYPDNaY8.js";import"./check-circle-8oGxTki5.js";import"./info-D4lm7fBv.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=ae("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),ge=({investor:r,onSave:h,onCancel:i,isSubmitting:d})=>{const{register:a,handleSubmit:t,formState:{errors:l},reset:m}=ce({defaultValues:r||{name:"",email:"",phone:"",address:{street:"",city:"",state:"",zipCode:"",country:""},totalInvestment:0,status:"active",notes:""}}),c=o=>{h(o),m()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r?"Edit Investor":"Add New Investor"}),e.jsx("button",{onClick:i,className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(A,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:t(c),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Investor Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{...a("name",{required:"Investor name is required"}),className:"input pl-10",placeholder:"Enter investor name"})]}),l.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.name.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{...a("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",className:"input pl-10",placeholder:"Enter email address"})]}),l.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{...a("phone"),type:"tel",className:"input pl-10",placeholder:"Enter phone number"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Address Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{...a("address.street"),className:"input pl-10",placeholder:"Enter street address"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),e.jsx("input",{...a("address.city"),className:"input",placeholder:"Enter city"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State/Province"}),e.jsx("input",{...a("address.state"),className:"input",placeholder:"Enter state"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zip Code"}),e.jsx("input",{...a("address.zipCode"),className:"input",placeholder:"Enter zip code"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),e.jsx("input",{...a("address.country"),className:"input",placeholder:"Enter country"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Investment Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Investment ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{...a("totalInvestment",{valueAsNumber:!0,min:{value:0,message:"Investment must be positive"}}),type:"number",step:"0.01",className:"input pl-10",placeholder:"0.00"})]}),l.totalInvestment&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.totalInvestment.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{...a("status"),className:"input",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{...a("notes"),rows:3,className:"input",placeholder:"Enter any additional notes"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:i,className:"btn btn-secondary",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d,children:d?"Saving...":r?"Update Investor":"Add Investor"})]})]})]})})})},Le=({tabId:r})=>{const[h,i]=j.useState(""),[d,a]=j.useState(""),[t,l]=j.useState(!1),[m,c]=j.useState(null),[o,v]=j.useState(null),[g,b]=j.useState(null),[f,w]=j.useState(null),[k,P]=j.useState(null),p=re(),{updateTabTitle:S}=ne(),y={search:h||void 0,status:d||void 0},{data:I,isLoading:V,error:T}=M(["investors",y],()=>N.getInvestors(y).then(s=>s.data),{keepPreviousData:!0,staleTime:0}),_=Array.isArray(I==null?void 0:I.data)?I.data:Array.isArray(I)?I:[],q=C(N.createInvestor,{onSuccess:()=>{p.invalidateQueries("investors"),u.success("Investor created successfully"),l(!1),c(null)},onError:s=>{var n,x;u.error(((x=(n=s.response)==null?void 0:n.data)==null?void 0:x.message)||"Failed to create investor")}}),B=C(({id:s,data:n})=>N.updateInvestor(s,n),{onSuccess:()=>{p.invalidateQueries("investors"),u.success("Investor updated successfully"),l(!1),c(null)},onError:s=>{var n,x;u.error(((x=(n=s.response)==null?void 0:n.data)==null?void 0:x.message)||"Failed to update investor")}}),Z=C(N.deleteInvestor,{onSuccess:()=>{p.invalidateQueries("investors"),u.success("Investor deleted successfully")},onError:s=>{var n,x;u.error(((x=(n=s.response)==null?void 0:n.data)==null?void 0:x.message)||"Failed to delete investor")}}),R=C(({id:s,amount:n})=>N.recordPayout(s,n),{onSuccess:()=>{p.invalidateQueries("investors"),u.success("Payout recorded successfully"),b(null)},onError:s=>{var n,x;u.error(((x=(n=s.response)==null?void 0:n.data)==null?void 0:x.message)||"Failed to record payout")}}),z=C(({id:s,amount:n,notes:x})=>N.recordInvestment(s,n,x),{onSuccess:()=>{p.invalidateQueries("investors"),u.success("Investment recorded successfully"),w(null)},onError:s=>{var n,x;u.error(((x=(n=s.response)==null?void 0:n.data)==null?void 0:x.message)||"Failed to record investment")}}),{confirmation:F,confirmDelete:H,handleConfirm:X,handleCancel:Y}=me(),G=s=>{c(s),l(!0)},J=s=>{const n=s.name||s.email||"Unknown Investor";H(n,"Investor",async()=>{Z.mutate(s._id)})},K=s=>{m?B.mutate({id:m._id,data:s}):q.mutate(s)},W=s=>{v(s._id.toString())},ee=s=>{P(s)},se=s=>{b(s)},te=s=>{w(s)};return V?e.jsx(le,{}):T?e.jsxs("div",{className:"p-6 text-red-600",children:["Error loading investors: ",T.message]}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Investors"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage investors and track profit distributions"})]}),e.jsxs("button",{onClick:()=>{c(null),l(!0)},className:"btn btn-primary flex items-center space-x-2",children:[e.jsx(xe,{className:"h-5 w-5"}),e.jsx("span",{children:"Add Investor"})]})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-[2] relative",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search investors by name, email, or phone...",value:h,onChange:s=>i(s.target.value),className:"input pl-10 w-full"})]}),e.jsxs("select",{value:d,onChange:s=>a(s.target.value),className:"input flex-1 sm:w-auto min-w-[150px]",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]}),_.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg",children:[e.jsx(E,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No investors found"})]}):e.jsx("div",{className:"card w-full",children:e.jsxs("div",{className:"card-content p-0 w-full",children:[e.jsx("div",{className:"bg-gray-50 px-8 py-6 border-b border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-12 gap-6 items-center",children:[e.jsxs("div",{className:"col-span-3",children:[e.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Investor Name"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Contact Information"})]}),e.jsx("div",{className:"col-span-1",children:e.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Total Investment"})}),e.jsx("div",{className:"col-span-1",children:e.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Earned Profit"})}),e.jsx("div",{className:"col-span-1",children:e.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Paid Out"})}),e.jsx("div",{className:"col-span-1",children:e.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Current Balance"})}),e.jsx("div",{className:"col-span-1",children:e.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Status"})}),e.jsx("div",{className:"col-span-4",children:e.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Actions"})})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:_.map(s=>e.jsx("div",{className:"px-8 py-6 hover:bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-12 gap-6 items-center",children:[e.jsx("div",{className:"col-span-3",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(E,{className:"h-6 w-6 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mt-1",children:[e.jsx(U,{className:"h-3 w-3"}),e.jsx("span",{children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mt-1",children:[e.jsx(Q,{className:"h-3 w-3"}),e.jsx("span",{children:s.phone})]})]})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["$",(s.totalInvestment||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs("p",{className:"text-sm font-semibold text-green-600",children:["$",(s.totalEarnedProfit||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["$",(s.totalPaidOut||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs("p",{className:"text-sm font-bold text-blue-600",children:["$",(s.currentBalance||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),e.jsx("div",{className:"col-span-1",children:e.jsx("span",{className:`badge ${s.status==="active"?"badge-success":s.status==="inactive"?"badge-gray":"badge-danger"}`,children:s.status})}),e.jsx("div",{className:"col-span-4",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-wrap",children:[e.jsx("button",{onClick:()=>ee(s),className:"text-blue-600 hover:text-blue-800",title:"View Linked Products",children:e.jsx(D,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>W(s),className:"text-green-600 hover:text-green-800",title:"View Profit Shares",children:e.jsx(ue,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>te(s),className:"text-green-600 hover:text-green-800",title:"Record Investment (Receive Money)",children:e.jsx(L,{className:"h-5 w-5"})}),s.currentBalance>0&&e.jsx("button",{onClick:()=>se(s),className:"text-primary-600 hover:text-primary-800",title:"Record Payout (Pay Money)",children:e.jsx($,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>G(s),className:"text-primary-600 hover:text-primary-800",title:"Edit Investor",children:e.jsx(he,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>J(s),className:"text-danger-600 hover:text-danger-800",title:"Delete Investor",children:e.jsx(pe,{className:"h-5 w-5"})})]})})]})},s._id))})]})}),t&&e.jsx(ge,{investor:m,onSave:K,onCancel:()=>{l(!1),c(null)},isSubmitting:q.isLoading||B.isLoading}),o&&e.jsx(ye,{investorId:o,onClose:()=>v(null)}),g&&e.jsx(Ne,{investor:g,onSave:s=>{R.mutate({id:g._id,amount:s})},onCancel:()=>b(null),isSubmitting:R.isLoading}),f&&e.jsx(be,{investor:f,onSave:(s,n)=>{z.mutate({id:f._id,amount:s,notes:n})},onCancel:()=>w(null),isSubmitting:z.isLoading}),k&&e.jsx(ve,{investor:k,onClose:()=>P(null)}),e.jsx(oe,{isOpen:F.isOpen,onConfirm:X,onCancel:Y,title:F.title,message:F.message})]})},ve=({investor:r,onClose:h})=>{const{data:i,isLoading:d}=M(["investor-products",r._id],()=>N.getInvestorProducts(r._id).then(t=>t.data),{enabled:!!r}),a=Array.isArray(i==null?void 0:i.data)?i.data:[];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Linked Products - ",r.name]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Products this investor is linked to with profit sharing"})]}),e.jsx("button",{onClick:h,className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(A,{className:"h-5 w-5"})})]}),d?e.jsx(O,{}):a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(D,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"No products linked"}),e.jsx("p",{className:"text-sm text-gray-500",children:"This investor is not linked to any products yet. Link them from the Products page."})]}):e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 gap-4",children:a.map(t=>{var l,m,c,o,v,g;return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(D,{className:"h-5 w-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.status==="active"?"bg-green-100 text-green-800":t.status==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:t.status})]}),t.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:t.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Category:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:((l=t.category)==null?void 0:l.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Stock:"}),e.jsx("span",{className:`ml-2 font-medium ${(((m=t.inventory)==null?void 0:m.currentStock)||0)<=(((c=t.inventory)==null?void 0:c.reorderPoint)||0)?"text-red-600":"text-gray-900"}`,children:((o=t.inventory)==null?void 0:o.currentStock)||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Cost:"}),e.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:["$",(((v=t.pricing)==null?void 0:v.cost)||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Retail:"}),e.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:["$",(((g=t.pricing)==null?void 0:g.retail)||0).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"ml-4 text-right",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-2",children:[e.jsx("div",{className:"text-xs text-blue-600 mb-1",children:"Profit Share"}),e.jsxs("div",{className:"text-lg font-bold text-blue-700",children:[t.sharePercentage,"%"]})]}),t.linkedAt&&e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Linked: ",new Date(t.linkedAt).toLocaleDateString()]}),e.jsxs("button",{onClick:()=>{window.open("/products","_blank")},className:"mt-2 text-xs text-blue-600 hover:text-blue-800 flex items-center space-x-1",title:"View Product",children:[e.jsx(je,{className:"h-3 w-3"}),e.jsx("span",{children:"View Products"})]})]})]})},t._id)})})})]})})})},ye=({investorId:r,onClose:h})=>{const{data:i,isLoading:d}=M(["investor-profit-shares",r],()=>N.getProfitShares(r).then(t=>t.data)),a=Array.isArray(i==null?void 0:i.data)?i.data:Array.isArray(i)?i:[];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Profit Shares"}),e.jsx("button",{onClick:h,className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(A,{className:"h-5 w-5"})})]}),d?e.jsx(O,{}):a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(L,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No profit shares found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Order #"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Sale Amount"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Profit"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Share %"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Your Share"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(t=>{var v,g,b,f,w,k,P;const l=((v=t.investor)==null?void 0:v._id)||t.investor||null,m=l&&l.toString()===r.toString(),c=m?t.investorShare||0:((b=(g=t.investors)==null?void 0:g.find(p=>{var y;const S=((y=p.investor)==null?void 0:y._id)||p.investor;return S&&S.toString()===r.toString()}))==null?void 0:b.shareAmount)||0,o=m?t.investorSharePercentage||0:((w=(f=t.investors)==null?void 0:f.find(p=>{var y;const S=((y=p.investor)==null?void 0:y._id)||p.investor;return S&&S.toString()===r.toString()}))==null?void 0:w.sharePercentage)||0;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:new Date(t.orderDate||t.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.orderNumber||((k=t.order)==null?void 0:k.orderNumber)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.productName||((P=t.product)==null?void 0:P.name)||"N/A"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:["$",(t.saleAmount||0).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:["$",(t.totalProfit||0).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-blue-600 text-right",children:[o,"%"]}),e.jsxs("td",{className:"px-4 py-3 text-sm font-semibold text-green-600 text-right",children:["$",(c||0).toFixed(2)]})]},t._id)})})]})})]})})})},Ne=({investor:r,onSave:h,onCancel:i,isSubmitting:d})=>{var m;const[a,t]=j.useState(""),l=()=>{const c=parseFloat(a);if(c<=0){u.error("Payout amount must be greater than 0");return}if(c>r.currentBalance){u.error(`Payout amount cannot exceed current balance of $${r.currentBalance.toFixed(2)}`);return}h(c)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Record Payout"}),e.jsx("button",{onClick:i,className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(A,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:c=>{c.preventDefault(),l()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Investor"}),e.jsx("input",{type:"text",value:r.name,disabled:!0,className:"input bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Balance"}),e.jsx("input",{type:"text",value:`$${((m=r.currentBalance)==null?void 0:m.toFixed(2))||"0.00"}`,disabled:!0,className:"input bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payout Amount ($) *"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",max:r.currentBalance,value:a,onChange:c=>t(c.target.value),className:"input pl-10",placeholder:"0.00",required:!0})]}),parseFloat(a)>r.currentBalance&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Amount exceeds current balance"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:i,className:"btn btn-secondary",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d||parseFloat(a)<=0||parseFloat(a)>r.currentBalance,children:d?"Recording...":"Record Payout"})]})]})]})})})},be=({investor:r,onSave:h,onCancel:i,isSubmitting:d})=>{const[a,t]=j.useState(""),[l,m]=j.useState(""),c=()=>{const o=parseFloat(a);if(o<=0){u.error("Investment amount must be greater than 0");return}h(o,l)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Record Investment"}),e.jsx("button",{onClick:i,className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(A,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:o=>{o.preventDefault(),c()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Investor"}),e.jsx("input",{type:"text",value:r.name,disabled:!0,className:"input bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Total Investment"}),e.jsx("input",{type:"text",value:`$${(r.totalInvestment||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,disabled:!0,className:"input bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Investment Amount ($) *"}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:a,onChange:o=>t(o.target.value),className:"input pl-10",placeholder:"0.00",required:!0})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will be added to the investor's total investment"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:l,onChange:o=>m(o.target.value),className:"input",rows:3,placeholder:"Add any notes about this investment...",maxLength:500})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:i,className:"btn btn-secondary",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d||parseFloat(a)<=0,children:d?"Recording...":"Record Investment"})]})]})]})})})};export{Le as Investors,Le as default};
