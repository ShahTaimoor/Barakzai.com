import{a as ps,r as m,Q as d,R as Pe,bL as hs,p as e,x as S,a2 as A,aB as F,ae as Se,a3 as Ae,af as De,L as $,V as Ee,X as I,U as _s,b1 as ys,E as D,C as Re,T as vs,y as H}from"./index-CPGRFPoA.js";import{u as gs,a as bs}from"./settingsApi-C2p-obM0.js";import{u as ws,a as js,b as Ns,c as fs,d as ks,e as Cs,f as Ps}from"./usersApi-Dl0f_7iG.js";import{P as Le}from"./printer-Cmw_Pmcr.js";import{P as Ue}from"./phone-CMlOy8hv.js";import{U as Ie}from"./upload-BQH231KI.js";import{C as Te}from"./check-Bi2kH6P_.js";import{S as se}from"./save-Cm4Ve9_y.js";import{U as Ss}from"./user-check-tF-UyEci.js";import{P as te}from"./plus-0pBJo49N.js";import{L as Me}from"./lock-q2ZeZeG1.js";import{P as Oe}from"./pen-square-sDWyQdA0.js";import{T as As}from"./trash-2-CJJmzTJU.js";import{E}from"./eye-off-CnaxbU0G.js";import{S as qe}from"./shield-DiU1QNt_.js";const Xs=()=>{var we,je,Ne,fe;const{user:r}=ps(),[T,Be]=m.useState("company"),[n,w]=m.useState({companyName:"",address:"",contactNumber:"",email:"",logo:null,taxRegistrationNumber:""}),[ae,re]=m.useState(!1),[G,Y]=m.useState([]),[i,z]=m.useState(null),[c,R]=m.useState({firstName:"",lastName:"",email:"",password:"",role:"cashier",status:"active",permissions:{}}),[Q,Ve]=m.useState(!1),[Fe,J]=m.useState(!1),[$e,ie]=m.useState(!1),[L,M]=m.useState(null),[y,X]=m.useState(""),[O,K]=m.useState(""),[ne,He]=m.useState(""),[j,ce]=m.useState(!1),[N,le]=m.useState(!1),[W,Ge]=m.useState(!1),[oe,Ye]=m.useState({}),[u,Z]=m.useState(null),[ze,de]=m.useState(!1),[x,Qe]=m.useState({showLogo:!0,showDiscount:!0,showTax:!0,showDate:!0,headerText:"",footerText:"",invoiceLayout:"standard"}),Je={products:{name:"Product Management",permissions:[{key:"view_products",name:"View Products",subcategories:[{key:"view_product_list",name:"Product List"},{key:"view_product_details",name:"Product Details"},{key:"view_product_categories",name:"Categories"},{key:"view_product_inventory",name:"Inventory Levels"}]},{key:"create_products",name:"Create Products"},{key:"edit_products",name:"Edit Products"},{key:"delete_products",name:"Delete Products"}]},customers:{name:"Customer Management",permissions:[{key:"view_customers",name:"View Customers",subcategories:[{key:"view_customer_list",name:"Customer List"},{key:"view_customer_details",name:"Customer Details"},{key:"view_customer_history",name:"Purchase History"},{key:"view_customer_balance",name:"Account Balance"}]},{key:"create_customers",name:"Create Customers"},{key:"edit_customers",name:"Edit Customers"},{key:"delete_customers",name:"Delete Customers"}]},suppliers:{name:"Supplier Management",permissions:[{key:"view_suppliers",name:"View Suppliers",subcategories:[{key:"view_supplier_list",name:"Supplier List"},{key:"view_supplier_details",name:"Supplier Details"},{key:"view_supplier_orders",name:"Purchase Orders"},{key:"view_supplier_balance",name:"Account Balance"}]},{key:"create_suppliers",name:"Create Suppliers"},{key:"edit_suppliers",name:"Edit Suppliers"},{key:"delete_suppliers",name:"Delete Suppliers"}]},orders:{name:"Order Management",permissions:[{key:"view_orders",name:"View Orders",subcategories:[{key:"view_sales_orders",name:"Sales Orders"},{key:"view_purchase_orders",name:"Purchase Orders"},{key:"view_sales_invoices",name:"Sales Invoices"},{key:"view_purchase_invoices",name:"Purchase Invoices"}]},{key:"create_orders",name:"Create Orders"},{key:"edit_orders",name:"Edit Orders"},{key:"cancel_orders",name:"Cancel Orders"},{key:"view_cost_prices",name:"View Cost Prices"},{key:"create_purchase_orders",name:"Create Purchase Orders"},{key:"edit_purchase_orders",name:"Edit Purchase Orders"},{key:"delete_purchase_orders",name:"Delete Purchase Orders"},{key:"approve_purchase_orders",name:"Approve Purchase Orders"},{key:"reject_purchase_orders",name:"Reject Purchase Orders"},{key:"receive_purchase_orders",name:"Receive Purchase Orders"},{key:"create_purchase_invoices",name:"Create Purchase Invoices"},{key:"edit_purchase_invoices",name:"Edit Purchase Invoices"},{key:"delete_purchase_invoices",name:"Delete Purchase Invoices"},{key:"create_sales_orders",name:"Create Sales Orders"},{key:"edit_sales_orders",name:"Edit Sales Orders"},{key:"delete_sales_orders",name:"Delete Sales Orders"},{key:"approve_sales_orders",name:"Approve Sales Orders"},{key:"reject_sales_orders",name:"Reject Sales Orders"},{key:"create_sales_invoices",name:"Create Sales Invoices"},{key:"edit_sales_invoices",name:"Edit Sales Invoices"},{key:"void_sales_invoices",name:"Void Sales Invoices"},{key:"apply_discounts",name:"Apply Discounts"},{key:"override_prices",name:"Override Prices"}]},inventory:{name:"Inventory Management",permissions:[{key:"view_inventory",name:"View Inventory",subcategories:[{key:"view_inventory_levels",name:"Inventory Levels"},{key:"view_stock_movements",name:"Stock Movements"},{key:"view_inventory_reports",name:"Inventory Reports"},{key:"view_low_stock_alerts",name:"Low Stock Alerts"}]},{key:"update_inventory",name:"Update Inventory",subcategories:[{key:"update_stock_quantities",name:"Stock Quantities"},{key:"create_stock_adjustments",name:"Stock Adjustments"},{key:"process_receipts",name:"Process Receipts"}]},{key:"generate_purchase_orders",name:"Generate Purchase Orders"},{key:"acknowledge_inventory_alerts",name:"Acknowledge Inventory Alerts"},{key:"export_inventory_reports",name:"Export Inventory Reports"},{key:"import_inventory_data",name:"Import Inventory Data"}]},returns:{name:"Returns Management",permissions:[{key:"view_returns",name:"View Returns",subcategories:[{key:"view_return_requests",name:"Return Requests"},{key:"view_return_history",name:"Return History"},{key:"view_return_reasons",name:"Return Reasons"}]},{key:"create_returns",name:"Create Returns"},{key:"edit_returns",name:"Edit Returns"},{key:"approve_returns",name:"Approve Returns"},{key:"process_returns",name:"Process Returns"}]},discounts:{name:"Discount Management",permissions:[{key:"view_discounts",name:"View Discounts",subcategories:[{key:"view_discount_list",name:"Discount List"},{key:"view_discount_rules",name:"Discount Rules"},{key:"view_discount_history",name:"Discount History"}]},{key:"manage_discounts",name:"Manage Discounts",subcategories:[{key:"create_discounts",name:"Create Discounts"},{key:"edit_discounts",name:"Edit Discounts"},{key:"delete_discounts",name:"Delete Discounts"}]}]},reports:{name:"Reports & Analytics",permissions:[{key:"view_reports",name:"View Reports",subcategories:[{key:"view_pl_statements",name:"P&L Statements"},{key:"view_balance_sheets",name:"Balance Sheets"},{key:"view_sales_performance",name:"Sales Performance"},{key:"view_inventory_reports",name:"Inventory Reports"},{key:"view_general_reports",name:"Reports"},{key:"view_backdate_report",name:"Backdate Report"}]},{key:"view_analytics",name:"View Analytics"},{key:"view_customer_analytics",name:"Customer Analytics"},{key:"view_anomaly_detection",name:"Anomaly Detection & Fraud Prevention"},{key:"view_recommendations",name:"View Recommendations"},{key:"export_reports",name:"Export Reports"},{key:"share_reports",name:"Share Reports"},{key:"schedule_reports",name:"Schedule Reports"},{key:"view_advanced_analytics",name:"View Advanced Analytics"}]},admin:{name:"System Administration",permissions:[{key:"manage_users",name:"Manage Users",subcategories:[{key:"create_users",name:"Create Users"},{key:"edit_users",name:"Edit Users"},{key:"delete_users",name:"Delete Users"},{key:"assign_roles",name:"Assign Roles"}]},{key:"manage_settings",name:"Manage Settings",subcategories:[{key:"company_settings",name:"Company Settings"},{key:"system_settings",name:"System Settings"},{key:"print_settings",name:"Print Settings"},{key:"security_settings",name:"Security Settings"}]},{key:"view_backups",name:"View Backups",subcategories:[{key:"view_backup_list",name:"Backup List"},{key:"view_backup_logs",name:"Backup Logs"}]},{key:"manage_backups",name:"Manage Backups",subcategories:[{key:"create_backups",name:"Create Backups"},{key:"restore_backups",name:"Restore Backups"},{key:"delete_backups",name:"Delete Backups"}]},{key:"view_audit_logs",name:"View Audit Logs"},{key:"export_data",name:"Export Data"},{key:"import_data",name:"Import Data"},{key:"manage_integrations",name:"Manage Integrations"},{key:"configure_notifications",name:"Configure Notifications"}]},financial:{name:"Financial Operations",permissions:[{key:"view_cash_receipts",name:"Cash Receipts",subcategories:[{key:"view_cash_receipts",name:"View Cash Receipts"},{key:"create_cash_receipts",name:"Create Cash Receipts"},{key:"edit_cash_receipts",name:"Edit Cash Receipts"},{key:"delete_cash_receipts",name:"Delete Cash Receipts"}]},{key:"view_cash_payments",name:"Cash Payments",subcategories:[{key:"view_cash_payments",name:"View Cash Payments"},{key:"create_cash_payments",name:"Create Cash Payments"},{key:"edit_cash_payments",name:"Edit Cash Payments"},{key:"delete_cash_payments",name:"Delete Cash Payments"}]},{key:"view_bank_receipts",name:"Bank Receipts",subcategories:[{key:"view_bank_receipts",name:"View Bank Receipts"},{key:"create_bank_receipts",name:"Create Bank Receipts"},{key:"edit_bank_receipts",name:"Edit Bank Receipts"},{key:"delete_bank_receipts",name:"Delete Bank Receipts"}]},{key:"view_bank_payments",name:"Bank Payments",subcategories:[{key:"view_bank_payments",name:"View Bank Payments"},{key:"create_bank_payments",name:"Create Bank Payments"},{key:"edit_bank_payments",name:"Edit Bank Payments"},{key:"delete_bank_payments",name:"Delete Bank Payments"}]},{key:"view_expenses",name:"Expenses",subcategories:[{key:"view_expenses",name:"View Expenses"},{key:"create_expenses",name:"Create Expenses"},{key:"edit_expenses",name:"Edit Expenses"},{key:"delete_expenses",name:"Delete Expenses"},{key:"approve_expenses",name:"Approve Expenses"}]}]},accounting:{name:"Accounting",permissions:[{key:"view_accounting_transactions",name:"View Transactions"},{key:"view_accounting_accounts",name:"View Accounts"},{key:"view_trial_balance",name:"View Trial Balance"},{key:"update_balance_sheet",name:"Update Balance Sheet"},{key:"view_chart_of_accounts",name:"View Chart of Accounts"},{key:"view_accounting_summary",name:"View Financial Summary"}]},attendance:{name:"Attendance Management",permissions:[{key:"clock_attendance",name:"Clock Attendance"},{key:"clock_in",name:"Clock In"},{key:"clock_out",name:"Clock Out"},{key:"manage_attendance_breaks",name:"Manage Breaks"},{key:"view_own_attendance",name:"View Own Attendance"},{key:"view_team_attendance",name:"View Team Attendance"}]},till:{name:"Till Management",permissions:[{key:"open_till",name:"Open Till"},{key:"close_till",name:"Close Till"},{key:"view_till",name:"View Till"}]},investors:{name:"Investor Management",permissions:[{key:"view_investors",name:"View Investors"},{key:"manage_investors",name:"Manage Investors"},{key:"create_investors",name:"Create Investors"},{key:"edit_investors",name:"Edit Investors"},{key:"payout_investors",name:"Payout Investors"}]}},me={admin:{view_products:!0,create_products:!0,edit_products:!0,delete_products:!0,view_product_list:!0,view_product_details:!0,view_product_categories:!0,view_product_inventory:!0,view_customers:!0,create_customers:!0,edit_customers:!0,delete_customers:!0,view_customer_list:!0,view_customer_details:!0,view_customer_history:!0,view_customer_balance:!0,view_suppliers:!0,create_suppliers:!0,edit_suppliers:!0,delete_suppliers:!0,view_supplier_list:!0,view_supplier_details:!0,view_supplier_orders:!0,view_supplier_balance:!0,view_orders:!0,create_orders:!0,edit_orders:!0,cancel_orders:!0,view_sales_orders:!0,view_purchase_orders:!0,view_sales_invoices:!0,view_purchase_invoices:!0,view_cost_prices:!0,view_inventory:!0,update_inventory:!0,view_inventory_levels:!0,view_stock_movements:!0,view_low_stock_alerts:!0,update_stock_quantities:!0,create_stock_adjustments:!0,process_receipts:!0,view_returns:!0,create_returns:!0,edit_returns:!0,approve_returns:!0,process_returns:!0,view_return_requests:!0,view_return_history:!0,view_return_reasons:!0,view_discounts:!0,manage_discounts:!0,view_discount_list:!0,view_discount_rules:!0,view_discount_history:!0,create_discounts:!0,edit_discounts:!0,delete_discounts:!0,view_reports:!0,view_analytics:!0,view_recommendations:!0,view_pl_statements:!0,view_balance_sheets:!0,view_sales_performance:!0,view_inventory_reports:!0,view_general_reports:!0,view_backdate_report:!0,view_customer_analytics:!0,view_anomaly_detection:!0,export_reports:!0,share_reports:!0,schedule_reports:!0,view_advanced_analytics:!0,view_cash_receipts:!0,create_cash_receipts:!0,edit_cash_receipts:!0,delete_cash_receipts:!0,view_cash_payments:!0,create_cash_payments:!0,edit_cash_payments:!0,delete_cash_payments:!0,view_bank_receipts:!0,create_bank_receipts:!0,edit_bank_receipts:!0,delete_bank_receipts:!0,view_bank_payments:!0,create_bank_payments:!0,edit_bank_payments:!0,delete_bank_payments:!0,view_expenses:!0,create_expenses:!0,edit_expenses:!0,delete_expenses:!0,approve_expenses:!0,create_purchase_orders:!0,edit_purchase_orders:!0,delete_purchase_orders:!0,approve_purchase_orders:!0,reject_purchase_orders:!0,receive_purchase_orders:!0,create_purchase_invoices:!0,edit_purchase_invoices:!0,delete_purchase_invoices:!0,create_sales_orders:!0,edit_sales_orders:!0,delete_sales_orders:!0,approve_sales_orders:!0,reject_sales_orders:!0,create_sales_invoices:!0,edit_sales_invoices:!0,void_sales_invoices:!0,apply_discounts:!0,override_prices:!0,generate_purchase_orders:!0,acknowledge_inventory_alerts:!0,export_inventory_reports:!0,import_inventory_data:!0,view_accounting_transactions:!0,view_accounting_accounts:!0,view_trial_balance:!0,update_balance_sheet:!0,view_chart_of_accounts:!0,view_accounting_summary:!0,clock_attendance:!0,clock_in:!0,clock_out:!0,manage_attendance_breaks:!0,view_own_attendance:!0,view_team_attendance:!0,open_till:!0,close_till:!0,view_till:!0,view_investors:!0,manage_investors:!0,create_investors:!0,edit_investors:!0,payout_investors:!0,manage_users:!0,manage_settings:!0,view_backups:!0,manage_backups:!0,create_users:!0,edit_users:!0,delete_users:!0,assign_roles:!0,company_settings:!0,system_settings:!0,print_settings:!0,security_settings:!0,view_backup_list:!0,view_backup_logs:!0,create_backups:!0,restore_backups:!0,delete_backups:!0,view_audit_logs:!0,export_data:!0,import_data:!0,manage_integrations:!0,configure_notifications:!0},manager:{view_products:!0,create_products:!0,edit_products:!0,view_product_list:!0,view_product_details:!0,view_product_categories:!0,view_product_inventory:!0,view_customers:!0,create_customers:!0,edit_customers:!0,delete_customers:!0,view_customer_list:!0,view_customer_details:!0,view_customer_history:!0,view_customer_balance:!0,view_suppliers:!0,create_suppliers:!0,edit_suppliers:!0,delete_suppliers:!0,view_supplier_list:!0,view_supplier_details:!0,view_supplier_orders:!0,view_supplier_balance:!0,view_orders:!0,create_orders:!0,edit_orders:!0,cancel_orders:!0,view_sales_orders:!0,view_purchase_orders:!0,view_sales_invoices:!0,view_purchase_invoices:!0,view_cost_prices:!0,view_inventory:!0,update_inventory:!0,view_inventory_levels:!0,view_stock_movements:!0,view_low_stock_alerts:!0,update_stock_quantities:!0,create_stock_adjustments:!0,process_receipts:!0,view_returns:!0,create_returns:!0,edit_returns:!0,approve_returns:!0,process_returns:!0,view_return_requests:!0,view_return_history:!0,view_return_reasons:!0,view_discounts:!0,manage_discounts:!0,view_discount_list:!0,view_discount_rules:!0,view_discount_history:!0,create_discounts:!0,edit_discounts:!0,delete_discounts:!0,view_reports:!0,view_analytics:!0,view_recommendations:!0,view_pl_statements:!0,view_balance_sheets:!0,view_sales_performance:!0,view_inventory_reports:!0,view_general_reports:!0,view_backdate_report:!0,view_customer_analytics:!0,view_anomaly_detection:!0,export_reports:!0,share_reports:!0,schedule_reports:!0,view_advanced_analytics:!0,view_cash_receipts:!0,create_cash_receipts:!0,edit_cash_receipts:!0,delete_cash_receipts:!0,view_cash_payments:!0,create_cash_payments:!0,edit_cash_payments:!0,delete_cash_payments:!0,view_bank_receipts:!0,create_bank_receipts:!0,edit_bank_receipts:!0,delete_bank_receipts:!0,view_bank_payments:!0,create_bank_payments:!0,edit_bank_payments:!0,delete_bank_payments:!0,view_expenses:!0,create_expenses:!0,edit_expenses:!0,delete_expenses:!0,approve_expenses:!0,create_purchase_orders:!0,edit_purchase_orders:!0,delete_purchase_orders:!0,approve_purchase_orders:!0,reject_purchase_orders:!0,receive_purchase_orders:!0,create_purchase_invoices:!0,edit_purchase_invoices:!0,delete_purchase_invoices:!0,create_sales_orders:!0,edit_sales_orders:!0,delete_sales_orders:!0,approve_sales_orders:!0,reject_sales_orders:!0,create_sales_invoices:!0,edit_sales_invoices:!0,void_sales_invoices:!0,apply_discounts:!0,override_prices:!0,generate_purchase_orders:!0,acknowledge_inventory_alerts:!0,export_inventory_reports:!0,import_inventory_data:!0,view_accounting_transactions:!0,view_accounting_accounts:!0,view_trial_balance:!0,update_balance_sheet:!0,view_chart_of_accounts:!0,view_accounting_summary:!0,clock_attendance:!0,clock_in:!0,clock_out:!0,manage_attendance_breaks:!0,view_own_attendance:!0,view_team_attendance:!0,open_till:!0,close_till:!0,view_till:!0,view_investors:!0,manage_investors:!0,create_investors:!0,edit_investors:!0,payout_investors:!0},cashier:{view_products:!0,view_product_list:!0,view_product_details:!0,view_customers:!0,create_customers:!0,edit_customers:!0,view_customer_list:!0,view_customer_details:!0,view_orders:!0,create_orders:!0,view_sales_orders:!0,view_sales_invoices:!0,view_inventory:!0,view_inventory_levels:!0,view_stock_movements:!0,view_returns:!0,process_returns:!0,view_return_requests:!0,view_return_history:!0,view_discounts:!0,view_discount_list:!0,view_reports:!0,view_general_reports:!0},viewer:{view_products:!0,view_product_list:!0,view_product_details:!0,view_customers:!0,view_customer_list:!0,view_customer_details:!0,view_suppliers:!0,view_supplier_list:!0,view_supplier_details:!0,view_orders:!0,view_sales_orders:!0,view_purchase_orders:!0,view_sales_invoices:!0,view_purchase_invoices:!0,view_inventory:!0,view_inventory_levels:!0,view_returns:!0,view_return_requests:!0,view_return_history:!0,view_discounts:!0,view_discount_list:!0,view_reports:!0,view_pl_statements:!0,view_balance_sheets:!0,view_general_reports:!0}},{data:q,isLoading:h,refetch:f}=gs(),[Xe]=bs(),l=(q==null?void 0:q.data)||q;m.useEffect(()=>{if(l){const s={companyName:l.companyName||"",address:l.address||"",contactNumber:l.contactNumber||"",email:l.email||"",logo:l.logo||null,taxRegistrationNumber:l.taxId||""};w(s)}},[l]);const{data:p,isLoading:k,error:B,refetch:C}=ws(void 0,{onError:s=>{var t;(s==null?void 0:s.status)===403?d.error('Access denied. You need "manage_users" permission to view users.'):(s==null?void 0:s.status)===401?d.error("Authentication required. Please log in again."):d.error(`Failed to load users: ${((t=s==null?void 0:s.data)==null?void 0:t.message)||(s==null?void 0:s.message)||"Unknown error"}`),Y([])}});Pe.useEffect(()=>{var s;if(p){let t=null;if((s=p==null?void 0:p.data)!=null&&s.users&&Array.isArray(p.data.users))t=p.data.users;else if(p!=null&&p.users&&Array.isArray(p.users))t=p.users;else if(Array.isArray(p))t=p.filter(a=>a._id&&a.email);else{const a=(o,g=0)=>{var P,ke;if(g>5)return null;if(Array.isArray(o)&&o.length>0&&(P=o[0])!=null&&P._id&&(ke=o[0])!=null&&ke.email)return o;if(typeof o=="object"&&o!==null)for(const V in o){if(V==="users"&&Array.isArray(o[V]))return o[V];const Ce=a(o[V],g+1);if(Ce)return Ce}return null};t=a(p)}t&&Array.isArray(t)?Y(t):Y([])}},[p]),m.useEffect(()=>{var s;(s=l==null?void 0:l.data)!=null&&s.data&&!h&&w(t=>{const a={companyName:l.data.data.companyName||"",address:l.data.data.address||"",contactNumber:l.data.data.contactNumber||"",email:l.data.data.email||"",logo:l.data.data.logo||null,taxRegistrationNumber:l.data.data.taxId||""};return JSON.stringify(t)!==JSON.stringify(a)?a:t})},[(we=l==null?void 0:l.data)==null?void 0:we.data,h]),m.useEffect(()=>{var s;if((s=l==null?void 0:l.data)!=null&&s.data&&!h){const t={companyName:l.data.data.companyName||"",address:l.data.data.address||"",contactNumber:l.data.data.contactNumber||"",email:l.data.data.email||"",logo:l.data.data.logo||null,taxRegistrationNumber:l.data.data.taxId||""};w(t)}},[]);const Ke=async s=>{re(!0);try{const t=await Xe(s).unwrap();if(d.success("Company information updated successfully!"),t!=null&&t.data){const a={companyName:t.data.companyName||"",address:t.data.address||"",contactNumber:t.data.contactNumber||"",email:t.data.email||"",logo:t.data.logo||null,taxRegistrationNumber:t.data.taxId||""};w(a)}f()}catch(t){H(t,"Company Information Update")}finally{re(!1)}},[We,{isLoading:Ze}]=js(),[es,{isLoading:ss}]=Ns(),[ts,{isLoading:Ds}]=fs(),[Es,{isLoading:ue}]=ks(),[Rs,{isLoading:xe}]=hs(),[Ls,{isLoading:pe}]=Cs(),{data:U,isLoading:as,refetch:Us}=Ps(u==null?void 0:u.id,{skip:!(u!=null&&u.id)});Pe.useEffect(()=>{U!=null&&U.data&&Z(s=>({...s,activity:U.data}))},[U]);const rs=async s=>{try{await We(s).unwrap(),d.success("User created successfully!"),ee(),C()}catch(t){H(t,"User Creation")}},is=async(s,t)=>{try{await es({id:s,...t}).unwrap(),d.success("User updated successfully!"),z(null),C()}catch(a){H(a,"User Update")}},ns=async s=>{try{await ts(s).unwrap(),d.success("User deleted successfully!"),C()}catch(t){H(t,"User Deletion")}},_=s=>{const{name:t,value:a}=s.target;w(o=>({...o,[t]:a}))},he=s=>{s.preventDefault();const t={companyName:n.companyName,contactNumber:n.contactNumber,address:n.address,email:n.email,taxId:n.taxRegistrationNumber,logo:n.logo};Ke(t)},_e=s=>{const t=s.target.files[0];t&&(w(a=>({...a,logo:t.name})),d.success("Logo uploaded successfully!"))},b=s=>{const{name:t,value:a}=s.target;R(o=>({...o,[t]:a})),t==="role"&&me[a]&&R(o=>({...o,permissions:me[a]}))},cs=s=>{if(s.preventDefault(),!c.firstName.trim()){d.error("First name is required");return}if(!c.lastName.trim()){d.error("Last name is required");return}if(!c.email.trim()){d.error("Email is required");return}if(!c.password.trim()){d.error("Password is required");return}if(c.password.length<6){d.error("Password must be at least 6 characters long");return}const t=Object.keys(c.permissions).filter(o=>c.permissions[o]),a={...c,permissions:t};rs(a)},ls=s=>{z(s);const t={};s.permissions&&Array.isArray(s.permissions)&&s.permissions.forEach(a=>{t[a]=!0}),R({firstName:s.firstName||"",lastName:s.lastName||"",email:s.email||"",password:"",role:s.role||"cashier",status:s.status||"active",permissions:t})},os=s=>{if(s.preventDefault(),i){if(!c.firstName.trim()){d.error("First name is required");return}if(!c.lastName.trim()){d.error("Last name is required");return}if(!c.email.trim()){d.error("Email is required");return}const t=Object.keys(c.permissions).filter(o=>c.permissions[o]),a={firstName:c.firstName,lastName:c.lastName,email:c.email,permissions:t};i._id!==(r==null?void 0:r._id)&&(a.role=c.role,a.status=c.status),is(i._id,a)}},ds=s=>{window.confirm("Are you sure you want to delete this user?")&&ns(s)},ye=(s,t)=>{R(a=>({...a,permissions:{...a.permissions,[s]:t}})),c.role&&Ye(a=>({...a,[c.role]:{...a[c.role],[s]:t}}))},v=s=>{const{name:t,value:a,type:o,checked:g}=s.target;Qe(P=>({...P,[t]:o==="checkbox"?g:a}))},ee=()=>{R({firstName:"",lastName:"",email:"",password:"",role:"cashier",status:"active",permissions:{}}),z(null)},ms=()=>{if(!y.trim()){d.error("New password is required");return}if(y.length<6){d.error("Password must be at least 6 characters long");return}if(y!==O){d.error("Passwords do not match");return}const s=L||i;if(!(s!=null&&s._id)){d.error("User not selected");return}handleResetPassword(s._id,y)},ve=()=>{if(!ne.trim()){d.error("Current password is required");return}if(!y.trim()){d.error("New password is required");return}if(y.length<6){d.error("Password must be at least 6 characters long");return}if(y!==O){d.error("Passwords do not match");return}ve()},ge=(s=null)=>{M(s||i),J(!0),X(""),K("")},be=s=>{if(!oe[s]){d.error("No permission changes detected for this role");return}if(window.confirm(`Are you sure you want to update permissions for ALL users with "${s}" role? This will override their current permissions.`)){const a=c.permissions,o=Object.keys(a);be(s,o.filter(g=>a[g]))}},us=s=>{Z({id:s._id,name:`${s.firstName} ${s.lastName}`,email:s.email,role:s.role}),de(!0)};m.useEffect(()=>{f()},[f]);const xs=[{id:"company",name:"Company Information",icon:A},{id:"users",name:"Users Control",icon:F},{id:"print",name:"Print Preview Settings",icon:Le}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings 2"}),e.jsx("p",{className:"text-gray-600",children:"Advanced system configuration and management"})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:()=>{f(),C()},className:"btn btn-primary btn-sm",disabled:h||k,children:[e.jsx(S,{className:`h-4 w-4 mr-2 ${h||k?"animate-spin":""}`}),"Refresh"]})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:xs.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>Be(s.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${T===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(t,{className:"h-4 w-4"}),e.jsx("span",{children:s.name})]},s.id)})})}),e.jsxs("div",{className:"mt-6",children:[T==="company"&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"h-5 w-5 text-gray-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Company Information"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage your company details and branding information"})]}),e.jsxs("div",{className:"card-content",children:[e.jsxs("form",{onSubmit:he,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:"Company Name *"})]})}),e.jsx("input",{type:"text",name:"companyName",value:n.companyName,onChange:_,className:"input",placeholder:"Enter company name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{children:"Contact Number *"})]})}),e.jsx("input",{type:"text",name:"contactNumber",value:n.contactNumber,onChange:_,className:"input",placeholder:"Enter contact number",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:"Email *"})]})}),e.jsx("input",{type:"email",name:"email",value:n.email,onChange:_,className:"input",placeholder:"Enter email address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Tax Registration Number"})]})}),e.jsx("input",{type:"text",name:"taxRegistrationNumber",value:n.taxRegistrationNumber,onChange:_,className:"input",placeholder:"Enter tax registration number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{children:"Address *"})]})}),e.jsx("textarea",{name:"address",value:n.address,onChange:_,className:"input",placeholder:"Enter complete address",rows:"3",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsx("span",{children:"Company Logo"})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:_e,className:"input"}),n.logo&&e.jsxs("span",{className:"text-sm text-green-600 flex items-center",children:[e.jsx(Te,{className:"h-4 w-4 mr-1"}),n.logo]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload your company logo (PNG, JPG, GIF - Max 2MB)"})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs($,{type:"submit",isLoading:ae,className:"btn btn-primary",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Save Company Information"]})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:"Current Saved Company Information"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>{f()},className:"btn btn-primary btn-sm",disabled:h,children:[e.jsx(S,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),h?"Loading...":"Load Data"]}),e.jsxs("button",{onClick:()=>{f()},className:"btn btn-secondary btn-sm",disabled:h,children:[e.jsx(S,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),"Force Refresh"]}),e.jsx("div",{className:"text-sm text-blue-600",children:(l==null?void 0:l.updatedAt)&&e.jsxs("span",{children:["Last Updated: ",new Date(l.updatedAt).toLocaleString()]})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"View and edit your currently saved company information. Changes here will update the saved data."}),e.jsxs("form",{onSubmit:he,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:"Company Name *"})]})}),e.jsx("input",{type:"text",name:"companyName",value:n.companyName,onChange:_,className:"input bg-white border-blue-300 focus:border-blue-500",placeholder:"Enter company name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{children:"Contact Number *"})]})}),e.jsx("input",{type:"text",name:"contactNumber",value:n.contactNumber,onChange:_,className:"input bg-white border-blue-300 focus:border-blue-500",placeholder:"Enter contact number",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:"Email *"})]})}),e.jsx("input",{type:"email",name:"email",value:n.email,onChange:_,className:"input bg-white border-blue-300 focus:border-blue-500",placeholder:"Enter email address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Tax Registration Number"})]})}),e.jsx("input",{type:"text",name:"taxRegistrationNumber",value:n.taxRegistrationNumber,onChange:_,className:"input bg-white border-blue-300 focus:border-blue-500",placeholder:"Enter tax registration number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{children:"Address *"})]})}),e.jsx("textarea",{name:"address",value:n.address,onChange:_,className:"input bg-white border-blue-300 focus:border-blue-500",placeholder:"Enter complete address",rows:"3",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsx("span",{children:"Company Logo"})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:_e,className:"input bg-white border-blue-300 focus:border-blue-500"}),n.logo&&e.jsxs("span",{className:"text-sm text-green-600 flex items-center",children:[e.jsx(Te,{className:"h-4 w-4 mr-1"}),n.logo]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload your company logo (PNG, JPG, GIF - Max 2MB)"})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-blue-200",children:e.jsxs($,{type:"submit",isLoading:ae,className:"btn btn-primary bg-blue-600 hover:bg-blue-700",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Update Company Information"]})})]})]})})]})]}),T==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ss,{className:"h-5 w-5 text-gray-600"}),e.jsxs("h2",{className:"text-lg font-semibold",children:["System Users (",G.length,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>{ee();const s=document.getElementById("add-edit-user-form");s&&(s.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{const t=s.querySelector('input[type="text"]');t&&t.focus()},300))},className:"btn btn-primary btn-sm",title:"Add New User",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Add New User"]}),e.jsxs("button",{onClick:()=>C(),className:"btn btn-secondary btn-sm",disabled:k,children:[e.jsx(S,{className:`h-4 w-4 mr-2 ${k?"animate-spin":""}`}),k?"Loading...":"Refresh Users"]})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage existing users and their permissions. Admin users have full system access."})]}),e.jsx("div",{className:"card-content",children:k?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Ee,{})}):B?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md mx-auto",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(I,{className:"h-12 w-12 text-red-500"})}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Failed to Load Users"}),e.jsx("p",{className:"text-sm text-red-600 mb-4",children:((je=B.response)==null?void 0:je.status)===403?'You need "manage_users" permission to view users. Please contact an administrator.':((Ne=B.response)==null?void 0:Ne.status)===401?"Authentication required. Please refresh the page and log in again.":B.message||"An error occurred while loading users."}),e.jsxs("button",{onClick:()=>C(),className:"btn btn-primary btn-sm",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})}):G.length>0?e.jsx("div",{className:"space-y-3",children:G.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(_s,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:s.email}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${s.role==="admin"?"bg-red-100 text-red-800":s.role==="manager"?"bg-blue-100 text-blue-800":s.role==="cashier"?"bg-green-100 text-green-800":s.role==="inventory"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:s.role.charAt(0).toUpperCase()+s.role.slice(1)}),s.lastLogin&&e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${s.isActive?"bg-green-400":"bg-red-400"}`}),s.isActive?"Active":"Inactive"]}),s.loginCount>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:[s.loginCount," logins"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${s.status==="active"?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-xs text-gray-500",children:s.status==="active"?"Active":"Inactive"}),s._id===(r==null?void 0:r._id)&&e.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"(You)"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>us(s),className:"btn btn-primary btn-sm",title:"View Activity",children:e.jsx(ys,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ge(s),className:"btn btn-secondary btn-sm",title:"Change Password",children:e.jsx(Me,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ls(s),className:"btn btn-secondary btn-sm",title:"Edit User",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ds(s._id),className:"btn btn-danger btn-sm",disabled:s._id===(r==null?void 0:r._id),title:"Delete User",children:e.jsx(As,{className:"h-4 w-4"})})]})]})]},s._id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(F,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"No users found"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"The system has no users registered yet. Use the form below to create your first user."}),e.jsxs("button",{onClick:()=>{const s=document.getElementById("add-edit-user-form");s&&(s.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{const t=s.querySelector('input[type="text"]');t&&t.focus()},300))},className:"btn btn-primary btn-sm",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Create First User"]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"h-5 w-5 text-gray-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:i?"Edit User":"Add New User"})]}),i&&e.jsxs("button",{onClick:ee,className:"btn btn-secondary btn-sm",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Cancel Edit"]})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:i?"Update user information and permissions":"Create a new system user with specific roles and permissions"})]}),e.jsx("div",{className:"card-content",children:e.jsxs("form",{id:"add-edit-user-form",onSubmit:i?os:cs,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstName",value:c.firstName,onChange:b,className:"input",placeholder:"Enter first name",autoComplete:"off",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastName",value:c.lastName,onChange:b,className:"input",placeholder:"Enter last name",autoComplete:"off",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",name:"email",value:c.email,onChange:b,className:"input",placeholder:"Enter email address",autoComplete:"off",required:!0})]}),!i&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:Q?"text":"password",name:"password",value:c.password,onChange:b,className:"input pr-10",placeholder:"Enter password",autoComplete:"new-password",required:!0}),e.jsx("button",{type:"button",onClick:()=>Ve(!Q),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:Q?e.jsx(E,{className:"h-4 w-4 text-gray-400"}):e.jsx(D,{className:"h-4 w-4 text-gray-400"})})]})]}),i&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("button",{type:"button",onClick:ge,className:"btn btn-secondary w-full",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Change Password"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click to reset the user's password"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Role * ",i&&i._id===(r==null?void 0:r._id)&&e.jsx("span",{className:"text-xs text-gray-500",children:"(Cannot change your own role)"})]}),e.jsxs("select",{name:"role",value:c.role,onChange:b,className:"input",required:!0,disabled:i&&i._id===(r==null?void 0:r._id),children:[e.jsx("option",{value:"cashier",children:"Cashier - Basic sales operations"}),e.jsx("option",{value:"manager",children:"Manager - Full operational access"}),e.jsx("option",{value:"admin",children:"Admin - Full system access including user management"}),e.jsx("option",{value:"viewer",children:"Viewer - Read-only access"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i&&i._id===(r==null?void 0:r._id)?"You cannot change your own role. Contact another administrator if needed.":"Admin users have full system access and can manage other users"}),oe[c.role]&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"⚠️ Permission changes detected"}),e.jsxs("p",{className:"text-xs text-yellow-600 mt-1",children:["You've modified permissions for the ",c.role," role"]})]}),e.jsx("button",{type:"button",onClick:()=>be(c.role),disabled:pe,className:"btn btn-warning btn-sm",children:pe?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Update All ",c.role,"s"]})})]})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Status ",i&&i._id===(r==null?void 0:r._id)&&e.jsx("span",{className:"text-xs text-gray-500",children:"(Cannot change your own status)"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"status",value:"active",checked:c.status==="active",onChange:b,className:"mr-2",disabled:i&&i._id===(r==null?void 0:r._id)}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"status",value:"inactive",checked:c.status==="inactive",onChange:b,className:"mr-2",disabled:i&&i._id===(r==null?void 0:r._id)}),e.jsx("span",{className:"text-sm text-gray-700",children:"Inactive"})]})]}),i&&i._id===(r==null?void 0:r._id)&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"You cannot change your own status. Contact another administrator if needed."}),!i&&e.jsx("div",{className:"mt-6",children:e.jsxs($,{type:"submit",isLoading:Ze,className:"btn btn-primary w-full",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Create User"]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsx("span",{children:"Roles & Permissions"}),i&&i._id===(r==null?void 0:r._id)&&e.jsx("span",{className:"text-xs text-gray-500",children:"(Cannot modify your own permissions)"})]})}),i&&i._id===(r==null?void 0:r._id)?e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," You cannot modify your own permissions. This prevents you from accidentally locking yourself out of the system. Contact another administrator if you need to change your permissions."]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(Je).map(([s,t])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 h-fit",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3 border-b border-gray-100 pb-2",children:t.name}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:t.permissions.map(a=>e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center space-x-2 py-1 hover:bg-gray-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:c.permissions[a.key]||!1,onChange:o=>ye(a.key,o.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium truncate",children:a.name})]}),a.subcategories&&a.subcategories.length>0&&e.jsx("div",{className:"ml-4 mt-1 space-y-1",children:a.subcategories.map((o,g)=>e.jsxs("label",{className:"flex items-center space-x-2 py-1 hover:bg-blue-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:c.permissions[o.key]||!1,onChange:P=>ye(o.key,P.target.checked),className:"h-3 w-3 text-blue-600 border-gray-300 rounded focus:ring-blue-500 flex-shrink-0"}),e.jsx("span",{className:"text-xs text-gray-600 truncate",children:o.name})]},o.key||g))})]},a.key))})]},s))})]}),i&&e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs($,{type:"submit",isLoading:ss,className:"btn btn-primary",children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Update User"]})})]},(i==null?void 0:i._id)||"new-user")})]})]}),T==="print"&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"h-5 w-5 text-gray-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Print Preview Settings"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Customize how your invoices and receipts appear when printed"})]}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Invoice/Sale Receipt Layout"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("label",{className:"flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"invoiceLayout",value:"standard",checked:x.invoiceLayout==="standard",onChange:v,className:"mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Standard"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Basic layout with company info"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"invoiceLayout",value:"compact",checked:x.invoiceLayout==="compact",onChange:v,className:"mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Compact"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Condensed layout for small receipts"})]})]}),e.jsxs("label",{className:"flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"invoiceLayout",value:"detailed",checked:x.invoiceLayout==="detailed",onChange:v,className:"mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Detailed"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Full layout with all information"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Header Text (Optional)"}),e.jsx("textarea",{name:"headerText",value:x.headerText,onChange:v,className:"input",placeholder:"Enter custom header text",rows:"3"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This text will appear at the top of printed documents"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Footer Text (Optional)"}),e.jsx("textarea",{name:"footerText",value:x.footerText,onChange:v,className:"input",placeholder:"Enter custom footer text",rows:"3"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This text will appear at the bottom of printed documents"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Display Options"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",name:"showLogo",checked:x.showLogo,onChange:v,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Show Logo"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Display company logo on printed documents"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",name:"showDiscount",checked:x.showDiscount,onChange:v,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Show Discount"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Display discount information on receipts"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",name:"showTax",checked:x.showTax,onChange:v,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Show Tax"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Display tax calculations on receipts"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",name:"showDate",checked:x.showDate,onChange:v,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Show Date"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Display transaction date on receipts"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Print Preview"}),e.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["This preview shows how your receipts will appear with the actual saved company information.",!n.companyName&&!n.address&&!n.contactNumber&&e.jsx("span",{className:"text-orange-600 font-medium",children:" Please save your company information first to see the preview."})]}),e.jsx("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8",children:e.jsxs("div",{className:"max-w-md mx-auto bg-white p-6 rounded-lg shadow-sm",children:[x.headerText&&e.jsx("div",{className:"text-center text-sm text-gray-600 mb-4 border-b pb-2",children:x.headerText}),e.jsxs("div",{className:"text-center mb-4",children:[x.showLogo&&e.jsx("div",{className:"h-12 w-12 bg-gray-200 rounded mx-auto mb-2 flex items-center justify-center",children:e.jsx(A,{className:"h-6 w-6 text-gray-400"})}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:n.companyName||"Your Company Name"}),!n.companyName&&e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"(Company name not set)"}),n.address&&e.jsx("div",{className:"text-sm text-gray-700",children:n.address}),n.contactNumber&&e.jsxs("div",{className:"text-sm text-gray-700",children:["Phone: ",n.contactNumber]}),n.email&&e.jsxs("div",{className:"text-sm text-gray-700",children:["Email: ",n.email]}),n.taxRegistrationNumber&&e.jsxs("div",{className:"text-sm text-gray-700",children:["Tax ID: ",n.taxRegistrationNumber]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("div",{className:"text-center text-sm font-medium text-gray-900 mb-2",children:"SAMPLE RECEIPT"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Item 1"}),e.jsx("span",{children:"10.00"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Item 2"}),e.jsx("span",{children:"15.00"})]}),x.showDiscount&&e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{children:"Discount"}),e.jsx("span",{children:"-2.50"})]}),x.showTax&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tax"}),e.jsx("span",{children:"2.25"})]}),e.jsxs("div",{className:"border-t pt-1 flex justify-between font-bold",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:"24.75"})]})]})]}),e.jsxs("div",{className:"border-t pt-3 mt-4",children:[x.footerText&&e.jsx("div",{className:"text-center text-xs text-gray-600 mb-2",children:x.footerText}),e.jsxs("div",{className:"text-center text-xs text-gray-500 space-y-1",children:[n.email&&e.jsxs("div",{children:["Email: ",n.email]}),n.taxRegistrationNumber&&e.jsxs("div",{children:["Tax ID: ",n.taxRegistrationNumber]})]}),x.showDate&&e.jsxs("div",{className:"text-center text-xs text-gray-500 mt-2",children:["Date: ",new Date().toLocaleDateString()]})]})]})})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs("button",{type:"button",onClick:()=>d.success("Print settings saved!"),className:"btn btn-primary",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Save Print Settings"]})})]})})]}),ze&&u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"User Activity Dashboard"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[u.name," (",u.email,")"]})]}),e.jsx("button",{onClick:()=>{de(!1),Z(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{className:"h-5 w-5"})})]}),as?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Ee,{})}):u.activity?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Re,{className:"h-8 w-8 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Last Login"}),e.jsx("p",{className:"text-lg font-semibold text-blue-900",children:u.activity.lastLogin?new Date(u.activity.lastLogin).toLocaleString():"Never"})]})]})}),e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(vs,{className:"h-8 w-8 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Total Logins"}),e.jsx("p",{className:"text-lg font-semibold text-green-900",children:u.activity.loginCount||0})]})]})}),e.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-8 w-8 rounded-full mr-3 flex items-center justify-center ${u.activity.isOnline?"bg-green-500":"bg-gray-400"}`,children:e.jsx("div",{className:"h-3 w-3 bg-white rounded-full"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-800",children:"Status"}),e.jsx("p",{className:"text-lg font-semibold text-purple-900",children:u.activity.isOnline?"Online":"Offline"})]})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("h4",{className:"text-md font-semibold flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"Recent Login History"]})}),e.jsx("div",{className:"p-4",children:u.activity.loginHistory&&u.activity.loginHistory.length>0?e.jsx("div",{className:"space-y-3",children:u.activity.loginHistory.map((s,t)=>{var a;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:new Date(s.loginTime).toLocaleString()}),e.jsxs("p",{className:"text-xs text-gray-500",children:["IP: ",s.ipAddress]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:((a=s.userAgent)==null?void 0:a.split(" ")[0])||"Unknown"})]},t)})}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No login history available"})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("h4",{className:"text-md font-semibold flex items-center",children:[e.jsx(qe,{className:"h-5 w-5 mr-2"}),"Permission Change History"]})}),e.jsx("div",{className:"p-4",children:u.activity.permissionHistory&&u.activity.permissionHistory.length>0?e.jsx("div",{className:"space-y-3",children:u.activity.permissionHistory.map((s,t)=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.changeType==="created"?"bg-green-100 text-green-800":s.changeType==="role_changed"?"bg-blue-100 text-blue-800":s.changeType==="permissions_modified"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:s.changeType.replace("_"," ").toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.changedAt).toLocaleString()})]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-1",children:["Changed by: ",s.changedBy?`${s.changedBy.firstName} ${s.changedBy.lastName}`:"System"]}),s.notes&&e.jsx("p",{className:"text-xs text-gray-600",children:s.notes})]},t))}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No permission changes recorded"})})]})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Failed to load activity data"})})]})}),Fe&&(L||i)&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Reset Password"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:((fe=L||i)==null?void 0:fe.email)&&`Resetting password for: ${(L||i).email}`})]}),e.jsx("button",{onClick:()=>{J(!1),M(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:j?"text":"password",value:y,onChange:s=>X(s.target.value),className:"input pr-10",placeholder:"Enter new password"}),e.jsx("button",{type:"button",onClick:()=>ce(!j),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:j?e.jsx(E,{className:"h-4 w-4 text-gray-400"}):e.jsx(D,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:N?"text":"password",value:O,onChange:s=>K(s.target.value),className:"input pr-10",placeholder:"Confirm new password"}),e.jsx("button",{type:"button",onClick:()=>le(!N),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:N?e.jsx(E,{className:"h-4 w-4 text-gray-400"}):e.jsx(D,{className:"h-4 w-4 text-gray-400"})})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>{J(!1),M(null)},className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:ms,disabled:ue||!(L||i),className:"btn btn-primary",children:ue?"Resetting...":"Reset Password"})]})]})}),$e&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Change My Password"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:(r==null?void 0:r.email)&&`Changing password for: ${r.email}`})]}),e.jsx("button",{onClick:()=>ie(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:W?"text":"password",value:ne,onChange:s=>He(s.target.value),className:"input pr-10",placeholder:"Enter current password"}),e.jsx("button",{type:"button",onClick:()=>Ge(!W),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:W?e.jsx(E,{className:"h-4 w-4 text-gray-400"}):e.jsx(D,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:j?"text":"password",value:y,onChange:s=>X(s.target.value),className:"input pr-10",placeholder:"Enter new password"}),e.jsx("button",{type:"button",onClick:()=>ce(!j),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:j?e.jsx(E,{className:"h-4 w-4 text-gray-400"}):e.jsx(D,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:N?"text":"password",value:O,onChange:s=>K(s.target.value),className:"input pr-10",placeholder:"Confirm new password"}),e.jsx("button",{type:"button",onClick:()=>le(!N),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:N?e.jsx(E,{className:"h-4 w-4 text-gray-400"}):e.jsx(D,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"Note:"})," You must enter your current password to change it to a new one."]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>ie(!1),className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:ve,disabled:xe,className:"btn btn-primary",children:xe?"Changing...":"Change Password"})]})]})})]})]})};export{Xs as Settings2,Xs as default};
