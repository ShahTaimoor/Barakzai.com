import{E as Ke,O as re,o as n,I as We,r as p,a3 as ur,L as Te,X as ce,B as me,z as ne,w as ae,ah as $n,x as qe,Q as U,ai as Pn,S as mt,P as Re,aj as gt,ak as Cn,al as An,am as In,H as Tn,u as Rn,an as Mn,R as fr,ao as Dn,T as Ln,ap as Bn}from"./index-jd7Ax_Ed.js";import{u as Fn,a as Un,b as Gn,c as zn,d as Vn,e as Hn}from"./productsApi-hw6ecLPR.js";import{u as qn}from"./categoriesApi-C2HnKUbe.js";import{u as Xn}from"./useFuzzySearch-BrpeiQaU.js";import{D as Kn}from"./ConfirmationDialog-EbANb_5f.js";import{a as Wn}from"./useConfirmation-BnXgMCcj.js";import"./ValidatedInput-Cg4yPCj4.js";import{C as vt}from"./chevron-up-DEWj5144.js";import{C as yt}from"./chevron-down-BFYGIyCo.js";import{D as Qn}from"./database-DSPlIOkn.js";import{U as Yn}from"./upload-DdBv5t3-.js";import{D as je}from"./download-bwqK3ulf.js";import{F as Jn}from"./file-spreadsheet-BleMUJhf.js";import{H as Zn}from"./help-circle-CzH3vghz.js";import{C as ea}from"./check-circle-8oGxTki5.js";import{A as ta}from"./alert-circle-yrAHCiEw.js";import{F as ra}from"./filter-CQLYjJyW.js";import{P as Cr}from"./pen-square-CzKMgeH3.js";import{T as Ar}from"./trash-2-DCbqoVbR.js";import{S as na}from"./save-CRYWlTlc.js";import{C as Ir,B as aa}from"./BarcodeScanner-ClgolgQA.js";import{C as ia}from"./check-C5eRyuMu.js";import{P as Xe}from"./printer-BkLl9NNZ.js";import{N as sa}from"./NotesPanel-Bd7HDD1M.js";import{P as oa}from"./plus-C2o0386P.js";import"./shield-DYPDNaY8.js";import"./info-D4lm7fBv.js";import"./eye-off-Dv_sEjAY.js";import"./eye-DMmE8Niy.js";import"./useMutation-n-l4Ns3H.js";import"./message-square-DtCe3QVP.js";import"./history-D1YUGYyd.js";import"./lock-DxijO8f_.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=Ke("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=Ke("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=Ke("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=Ke("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]),da=({errors:t={},title:e="Please fix the following errors:",showCount:a=!0,collapsible:r=!0,className:i="",onFieldClick:s=null})=>{const[o,l]=re.useState(!0),m=Object.entries(t).filter(([j,u])=>u!=null),h=m.length;return h===0?null:n.jsx("div",{className:`bg-red-50 border border-red-200 rounded-lg p-4 ${i}`,children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(We,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5 mr-3"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("h3",{className:"text-sm font-medium text-red-800",children:[e,a&&n.jsxs("span",{className:"ml-2 text-red-600",children:["(",h," ",h===1?"error":"errors",")"]})]}),r&&n.jsx("button",{onClick:()=>l(!o),className:"text-red-600 hover:text-red-800","aria-label":o?"Collapse":"Expand",children:o?n.jsx(vt,{className:"h-4 w-4"}):n.jsx(yt,{className:"h-4 w-4"})})]}),o&&n.jsx("ul",{className:"list-disc list-inside space-y-1",children:m.map(([j,u])=>n.jsxs("li",{className:`text-sm text-red-700 ${s?"cursor-pointer hover:text-red-900 hover:underline":""}`,onClick:()=>s==null?void 0:s(j),children:[n.jsxs("span",{className:"font-medium capitalize",children:[j.replace(/([A-Z])/g," $1").trim(),":"]})," ",u]},j))})]})]})})},ua=({onImportComplete:t,filters:e={}})=>{const[a,r]=p.useState(!1),[i,s]=p.useState(!1),[o,l]=p.useState(!1),[m,h]=p.useState(null),[j,u]=p.useState(null),[w,v]=p.useState(!1),[P,A]=p.useState("csv"),N=async()=>{try{s(!0);const b=await me.exportCSV(e),O=await me.downloadFile(b.data.filename),d=new Blob([O.data],{type:"text/csv;charset=utf-8;"}),x=document.createElement("a"),_=URL.createObjectURL(d);x.setAttribute("href",_),x.setAttribute("download",b.data.filename),x.style.visibility="hidden",document.body.appendChild(x),x.click(),document.body.removeChild(x),ne(`Exported ${b.data.recordCount} products to CSV`)}catch(b){ae(b,"CSV Export")}finally{s(!1)}},c=async()=>{try{s(!0);const b=await me.exportExcel(e),O=await me.downloadFile(b.data.filename),d=new Blob([O.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),x=document.createElement("a"),_=URL.createObjectURL(d);x.setAttribute("href",_),x.setAttribute("download",b.data.filename),x.style.visibility="hidden",document.body.appendChild(x),x.click(),document.body.removeChild(x),ne(`Exported ${b.data.recordCount} products to Excel`)}catch(b){ae(b,"Excel Export")}finally{s(!1)}},g=b=>{const O=b.target.files[0];if(O){const x=$n(O,{allowedTypes:["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],maxSizeInMB:10,required:!0});if(x){qe(x),b.target.value="";return}h(O),A(O.type.includes("csv")?"csv":"excel")}},E=async()=>{if(!m){U.error("Please select a file to import");return}try{l(!0);const b=P==="csv"?await me.importCSV(m):await me.importExcel(m);u(b.data.results),b.data.results.success>0&&(ne(`Successfully imported ${b.data.results.success} products`),t&&t()),b.data.results.errors.length>0&&Pn(`${b.data.results.errors.length} products failed to import`)}catch(b){ae(b,"Product Import")}finally{l(!1)}},X=async()=>{try{const b=await me.downloadTemplate(),O=new Blob([b.data],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),x=URL.createObjectURL(O);d.setAttribute("href",x),d.setAttribute("download","product_template.csv"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d),ne("Template downloaded successfully")}catch(b){ae(b,"Template Download")}},y=()=>{h(null),u(null),v(!1)};return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:()=>r(!a),children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Qn,{className:"h-5 w-5 text-gray-600"}),n.jsx("span",{className:"font-medium text-gray-900",children:"Import / Export Products"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{onClick:b=>{b.stopPropagation(),v(!0)},className:"btn btn-primary btn-sm",children:[n.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Import Products"]}),a?n.jsx(vt,{className:"h-4 w-4 text-gray-400"}):n.jsx(yt,{className:"h-4 w-4 text-gray-400"})]})]}),a&&n.jsxs("div",{className:"border-t border-gray-200 p-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(ur,{className:"h-5 w-5 text-blue-600 mr-2"}),n.jsx("h4",{className:"font-medium text-gray-900",children:"Export to CSV"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Export all products to a CSV file for backup or analysis."}),n.jsxs(Te,{onClick:N,isLoading:i,className:"btn btn-secondary btn-sm w-full",children:[n.jsx(je,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(Jn,{className:"h-5 w-5 text-green-600 mr-2"}),n.jsx("h4",{className:"font-medium text-gray-900",children:"Export to Excel"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Export all products to an Excel file with formatting."}),n.jsxs(Te,{onClick:c,isLoading:i,className:"btn btn-secondary btn-sm w-full",children:[n.jsx(je,{className:"h-4 w-4 mr-2"}),"Export Excel"]})]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(Zn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Import Guidelines"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:"• Download the template to see the required format"}),n.jsx("li",{children:"• Required fields: Product Name, Category"}),n.jsx("li",{children:"• Supported formats: CSV, Excel (.xlsx)"}),n.jsx("li",{children:"• Maximum file size: 10MB"}),n.jsx("li",{children:"• Products with duplicate names will be skipped"})]}),n.jsxs("button",{onClick:X,className:"btn btn-primary btn-xs mt-3",children:[n.jsx(je,{className:"h-3 w-3 mr-1"}),"Download Template"]})]})]})}),w&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Import Products"}),n.jsx("button",{onClick:y,className:"text-gray-400 hover:text-gray-600",children:n.jsx(ce,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"p-6",children:j?n.jsxs("div",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Import Results"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[n.jsx(ea,{className:"h-6 w-6 text-green-600 mx-auto mb-1"}),n.jsx("div",{className:"text-lg font-semibold text-green-600",children:j.success}),n.jsx("div",{className:"text-sm text-green-700",children:"Success"})]}),n.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[n.jsx(ta,{className:"h-6 w-6 text-red-600 mx-auto mb-1"}),n.jsx("div",{className:"text-lg font-semibold text-red-600",children:j.errors.length}),n.jsx("div",{className:"text-sm text-red-700",children:"Errors"})]})]}),j.errors.length>0&&n.jsxs("div",{className:"max-h-40 overflow-y-auto",children:[n.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Errors:"}),n.jsxs("div",{className:"space-y-2",children:[j.errors.slice(0,10).map((b,O)=>n.jsxs("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:["Row ",b.row,": ",b.error]},O)),j.errors.length>10&&n.jsxs("div",{className:"text-sm text-gray-500",children:["... and ",j.errors.length-10," more errors"]})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:y,className:"btn btn-primary btn-sm",children:"Close"})})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File"}),n.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:g,className:"input w-full"})]}),m&&n.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(ur,{className:"h-4 w-4 text-gray-600 mr-2"}),n.jsx("span",{className:"text-sm text-gray-700",children:m.name}),n.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[(m.size/1024/1024).toFixed(2)," MB"]})]})}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{onClick:y,className:"btn btn-secondary btn-sm",children:"Cancel"}),n.jsx(Te,{onClick:E,isLoading:o,disabled:!m,className:"btn btn-primary btn-sm",children:"Import Products"})]})]})})]})})]})]})},fa=({filters:t,onFiltersChange:e,categories:a=[],onClearFilters:r})=>{const[i,s]=p.useState(!1),o=(u,w)=>{e({...t,[u]:w})},l=u=>{const w={...t};delete w[u],e(w)},m=()=>{e({}),r&&r()},h=Object.keys(t).some(u=>t[u]!==""&&t[u]!==null&&t[u]!==void 0),j=()=>Object.keys(t).filter(u=>t[u]!==""&&t[u]!==null&&t[u]!==void 0).length;return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:()=>s(!i),children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(ra,{className:"h-5 w-5 text-gray-600"}),n.jsx("span",{className:"font-medium text-gray-900",children:"Filters"}),h&&n.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full",children:[j()," active"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[h&&n.jsx("button",{onClick:u=>{u.stopPropagation(),m()},className:"text-sm text-red-600 hover:text-red-800 font-medium",children:"Clear All"}),i?n.jsx(vt,{className:"h-4 w-4 text-gray-400"}):n.jsx(yt,{className:"h-4 w-4 text-gray-400"})]})]}),i&&n.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(mt,{className:"h-4 w-4 inline mr-1"}),"Search Products"]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Product name or description...",value:t.search||"",onChange:u=>o("search",u.target.value),className:"input pl-8"}),n.jsx(mt,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.search&&n.jsx("button",{onClick:()=>l("search"),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n.jsx(ce,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Re,{className:"h-4 w-4 inline mr-1"}),"Status"]}),n.jsxs("select",{value:t.status||"",onChange:u=>o("status",u.target.value),className:"input",children:[n.jsx("option",{value:"",children:"All Statuses"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"discontinued",children:"Discontinued"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(gt,{className:"h-4 w-4 inline mr-1"}),"Category"]}),n.jsxs("select",{value:t.category||"",onChange:u=>o("category",u.target.value),className:"input",children:[n.jsx("option",{value:"",children:"All Categories"}),a.map(u=>n.jsx("option",{value:u._id,children:u.name},u._id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(We,{className:"h-4 w-4 inline mr-1"}),"Stock Status"]}),n.jsxs("select",{value:t.stockStatus||"",onChange:u=>o("stockStatus",u.target.value),className:"input",children:[n.jsx("option",{value:"",children:"All Stock Levels"}),n.jsx("option",{value:"lowStock",children:"Low Stock"}),n.jsx("option",{value:"outOfStock",children:"Out of Stock"}),n.jsx("option",{value:"inStock",children:"In Stock"})]})]})]}),h&&n.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Active Filters:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(t).map(([u,w])=>{if(!w||w==="")return null;let v=w,P=u;switch(u){case"status":P="Status",v=w.charAt(0).toUpperCase()+w.slice(1);break;case"category":P="Category";const A=a.find(N=>N._id===w);v=A?A.name:w;break;case"stockStatus":P="Stock",v=w==="lowStock"?"Low Stock":w==="outOfStock"?"Out of Stock":w==="inStock"?"In Stock":w;break;case"search":P="Search",v=`"${w}"`;break;default:P=u.charAt(0).toUpperCase()+u.slice(1)}return n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[P,": ",v,n.jsx("button",{onClick:()=>l(u),className:"ml-1 hover:text-blue-600",children:n.jsx(ce,{className:"h-3 w-3"})})]},u)})})]})]})]})},ma=(t=[],e={})=>{const{idField:a="_id",onBulkOperation:r=null,enableUndo:i=!0,maxUndoHistory:s=10}=e,[o,l]=p.useState(new Set),[m,h]=p.useState(!1),[j,u]=p.useState(!1),[w,v]=p.useState({current:0,total:0,message:""}),[P,A]=p.useState([]),[N,c]=p.useState(null),g=p.useRef([]),E=p.useCallback(S=>{l($=>{const C=new Set($);return C.has(S)?C.delete(S):C.add(S),h(C.size===t.length&&t.length>0),C})},[t]),X=p.useCallback((S=null)=>{const $=S||t,C=new Set($.map(k=>k[a]));l(C),h(!0)},[t,a]),y=p.useCallback(()=>{l(new Set),h(!1)},[]),b=p.useCallback((S=null)=>{m?y():X(S||t)},[m,t,X,y]),O=p.useCallback(()=>t.filter(S=>o.has(S[a])),[t,o,a]),d=p.useCallback(S=>o.has(S),[o]),x=o.size,_=p.useCallback(async(S,$={})=>{const C=O();if(C.length===0)return{success:!1,message:"No items selected"};u(!0),v({current:0,total:C.length,message:"Starting operation..."});const k=C.map(I=>({...I})),ve={id:Date.now().toString(),type:S,timestamp:new Date().toISOString(),items:k,data:$};try{let I=0,se=0;const F=[];for(let ee=0;ee<C.length;ee++){const te=C[ee];v({current:ee+1,total:C.length,message:`Processing ${te.name||te.orderNumber||te.businessName||"item"}...`});try{r&&await r(te,S,$),I++}catch($e){se++,F.push({item:te,error:$e.message||"Unknown error"})}await new Promise($e=>setTimeout($e,50))}return i&&(A(ee=>{const te=[ve,...ee].slice(0,s);return g.current=te,te}),c(ve)),I>0&&y(),u(!1),v({current:0,total:0,message:""}),{success:!0,successCount:I,failureCount:se,errors:F,operationRecord:ve}}catch(I){return u(!1),v({current:0,total:0,message:""}),{success:!1,message:I.message||"Operation failed",operationRecord:ve}}},[O,r,i,s,y]),D=p.useCallback(async()=>{if(P.length===0||!N)return{success:!1,message:"No operation to undo"};u(!0),v({current:0,total:N.items.length,message:"Undoing operation..."});try{for(let S=0;S<N.items.length;S++){const $=N.items[S];v({current:S+1,total:N.items.length,message:`Reverting ${$.name||$.orderNumber||$.businessName||"item"}...`}),r&&await r($,`undo_${N.type}`,N.data),await new Promise(C=>setTimeout(C,50))}return A(S=>S.filter($=>$.id!==N.id)),c(P[1]||null),u(!1),v({current:0,total:0,message:""}),{success:!0,message:"Operation undone successfully"}}catch(S){return u(!1),v({current:0,total:0,message:""}),{success:!1,message:S.message||"Undo failed"}}},[P,N,r]),K=p.useCallback(()=>{A([]),c(null),g.current=[]},[]);return{selectedIds:Array.from(o),selectedCount:x,isSelectAll:m,isSelected:d,getSelectedItems:O,toggleSelection:E,selectAll:X,deselectAll:y,toggleSelectAll:b,isOperationInProgress:j,operationProgress:w,canUndo:i&&N!==null,undoHistory:P,executeBulkOperation:_,undoLastOperation:D,clearUndoHistory:K}},ha=({selectedCount:t,isOperationInProgress:e,operationProgress:a,canUndo:r,onBulkUpdate:i,onBulkDelete:s,onBulkExport:o,onBulkStatusChange:l,onBulkCategoryChange:m,onBulkPriceUpdate:h,onBulkStockAdjust:j,onUndo:u,onClearSelection:w,availableActions:v=["update","delete","export","status","category","price","stock"],className:P=""})=>t===0&&!e?null:n.jsxs("div",{className:`bg-primary-50 border border-primary-200 rounded-lg p-4 ${P}`,children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(mr,{className:"h-5 w-5 text-primary-600"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[t," ",t===1?"item":"items"," selected"]})]}),e&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-primary-600 border-t-transparent"}),n.jsxs("span",{className:"text-sm text-gray-600",children:[a.message||"Processing..."," (",a.current,"/",a.total,")"]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 flex-wrap",children:[r&&n.jsxs("button",{onClick:u,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",title:"Undo last operation",children:[n.jsx(ca,{className:"h-4 w-4 mr-1"}),"Undo"]}),v.includes("update")&&i&&n.jsxs("button",{onClick:i,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Cr,{className:"h-4 w-4 mr-1"}),"Update"]}),v.includes("status")&&l&&n.jsxs("button",{onClick:l,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(mr,{className:"h-4 w-4 mr-1"}),"Change Status"]}),v.includes("category")&&m&&n.jsxs("button",{onClick:m,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(gt,{className:"h-4 w-4 mr-1"}),"Change Category"]}),v.includes("price")&&h&&n.jsxs("button",{onClick:h,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Cn,{className:"h-4 w-4 mr-1"}),"Update Prices"]}),v.includes("stock")&&j&&n.jsxs("button",{onClick:j,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Re,{className:"h-4 w-4 mr-1"}),"Adjust Stock"]}),v.includes("export")&&o&&n.jsxs("button",{onClick:o,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(je,{className:"h-4 w-4 mr-1"}),"Export"]}),v.includes("delete")&&s&&n.jsxs("button",{onClick:s,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-red-700 bg-white border border-red-300 rounded-md hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Ar,{className:"h-4 w-4 mr-1"}),"Delete"]}),n.jsxs("button",{onClick:w,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(ce,{className:"h-4 w-4 mr-1"}),"Clear"]})]})]}),e&&a.total>0&&n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${a.current/a.total*100}%`}})})})]}),xa=({isOpen:t,onClose:e,selectedCount:a,updateType:r,onConfirm:i,categories:s=[],statusOptions:o=[],tierOptions:l=[],isLoading:m=!1})=>{const[h,j]=p.useState({}),[u,w]=p.useState({});if(!t)return null;const v=(c,g)=>{j(E=>({...E,[c]:g})),w(E=>({...E,[c]:null}))},P=c=>{c.preventDefault();const g={};if(r==="price"&&!h.priceType&&(g.priceType="Please select a price type"),r==="price"&&h.priceValue===void 0&&(g.priceValue="Please enter a price value"),r==="category"&&!h.category&&(g.category="Please select a category"),r==="status"&&!h.status&&(g.status="Please select a status"),r==="stock"&&h.stockAdjustment===void 0&&(g.stockAdjustment="Please enter a stock adjustment"),r==="tier"&&!h.tier&&(g.tier="Please select a tier"),Object.keys(g).length>0){w(g);return}i(h)},A=()=>{switch(r){case"price":return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Type"}),n.jsxs("select",{value:h.priceType||"",onChange:c=>v("priceType",c.target.value),className:`w-full px-3 py-2 border rounded-md ${u.priceType?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select price type"}),n.jsx("option",{value:"retail",children:"Retail Price"}),n.jsx("option",{value:"wholesale",children:"Wholesale Price"}),n.jsx("option",{value:"cost",children:"Cost Price"})]}),u.priceType&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.priceType})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Update Method"}),n.jsxs("select",{value:h.updateMethod||"set",onChange:c=>v("updateMethod",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"set",children:"Set to value"}),n.jsx("option",{value:"increase",children:"Increase by amount"}),n.jsx("option",{value:"decrease",children:"Decrease by amount"}),n.jsx("option",{value:"percentage",children:"Change by percentage"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value"}),n.jsx("input",{type:"number",step:"0.01",value:h.priceValue||"",onChange:c=>v("priceValue",parseFloat(c.target.value)),className:`w-full px-3 py-2 border rounded-md ${u.priceValue?"border-red-300":"border-gray-300"}`,placeholder:"Enter value"}),u.priceValue&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.priceValue})]})]});case"category":return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{value:h.category||"",onChange:c=>v("category",c.target.value),className:`w-full px-3 py-2 border rounded-md ${u.category?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select category"}),s.map(c=>n.jsx("option",{value:c._id||c.id,children:c.name},c._id||c.id))]}),u.category&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.category})]});case"status":return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{value:h.status||"",onChange:c=>v("status",c.target.value),className:`w-full px-3 py-2 border rounded-md ${u.status?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select status"}),o.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))]}),u.status&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.status})]});case"stock":return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adjustment Method"}),n.jsxs("select",{value:h.stockMethod||"set",onChange:c=>v("stockMethod",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"set",children:"Set to value"}),n.jsx("option",{value:"increase",children:"Increase by amount"}),n.jsx("option",{value:"decrease",children:"Decrease by amount"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Adjustment"}),n.jsx("input",{type:"number",value:h.stockAdjustment||"",onChange:c=>v("stockAdjustment",parseInt(c.target.value)),className:`w-full px-3 py-2 border rounded-md ${u.stockAdjustment?"border-red-300":"border-gray-300"}`,placeholder:"Enter amount"}),u.stockAdjustment&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.stockAdjustment})]})]});case"tier":return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Tier"}),n.jsxs("select",{value:h.tier||"",onChange:c=>v("tier",c.target.value),className:`w-full px-3 py-2 border rounded-md ${u.tier?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select tier"}),l.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))]}),u.tier&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.tier})]});case"tags":return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (comma-separated)"}),n.jsx("input",{type:"text",value:h.tags||"",onChange:c=>v("tags",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"tag1, tag2, tag3"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter tags separated by commas. Existing tags will be replaced."})]});default:return null}},N=()=>({price:"Bulk Update Prices",category:"Bulk Change Category",status:"Bulk Change Status",stock:"Bulk Adjust Stock",tier:"Bulk Change Customer Tier",tags:"Bulk Update Tags"})[r]||"Bulk Update";return n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),n.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:n.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:N()}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(ce,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(We,{className:"h-5 w-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-800",children:["This will update ",n.jsx("strong",{children:a})," ",a===1?"item":"items","."]})]})}),n.jsxs("form",{onSubmit:P,children:[A(),n.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:e,disabled:m,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),n.jsxs(Te,{type:"submit",isLoading:m,className:"px-4 py-2 bg-primary-600 text-white rounded-md text-sm font-medium hover:bg-primary-700",children:[n.jsx(na,{className:"h-4 w-4 mr-2"}),"Update ",a," ",a===1?"Item":"Items"]})]})]})]})})]})})},hr=({checked:t,onChange:e,disabled:a=!1,className:r="",...i})=>n.jsx("input",{type:"checkbox",checked:t,onChange:s=>e==null?void 0:e(s.target.checked),disabled:a,className:`h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded ${r}`,...i});var bt={},Qe={},q={};Object.defineProperty(q,"__esModule",{value:!0});function pa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ga=function t(e,a){pa(this,t),this.data=e,this.text=a.text||e,this.options=a};q.default=ga;Object.defineProperty(Qe,"__esModule",{value:!0});Qe.CODE39=void 0;var va=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),ya=q,ba=_a(ya);function _a(t){return t&&t.__esModule?t:{default:t}}function ja(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wa(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Na(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ea=function(t){Na(e,t);function e(a,r){return ja(this,e),a=a.toUpperCase(),r.mod43&&(a+=ka($a(a))),wa(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return va(e,[{key:"encode",value:function(){for(var r=ot("*"),i=0;i<this.data.length;i++)r+=ot(this.data[i])+"0";return r+=ot("*"),{data:r,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(ba.default),Rr=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],Oa=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function ot(t){return Sa(Mr(t))}function Sa(t){return Oa[t].toString(2)}function ka(t){return Rr[t]}function Mr(t){return Rr.indexOf(t)}function $a(t){for(var e=0,a=0;a<t.length;a++)e+=Mr(t[a]);return e=e%43,e}Qe.CODE39=Ea;var ie={},_t={},Ee={},M={};Object.defineProperty(M,"__esModule",{value:!0});var Pe;function lt(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var Dr=M.SET_A=0,Lr=M.SET_B=1,Br=M.SET_C=2;M.SHIFT=98;var Pa=M.START_A=103,Ca=M.START_B=104,Aa=M.START_C=105;M.MODULO=103;M.STOP=106;M.FNC1=207;M.SET_BY_CODE=(Pe={},lt(Pe,Pa,Dr),lt(Pe,Ca,Lr),lt(Pe,Aa,Br),Pe);M.SWAP={101:Dr,100:Lr,99:Br};M.A_START_CHAR="Ð";M.B_START_CHAR="Ñ";M.C_START_CHAR="Ò";M.A_CHARS="[\0-_È-Ï]";M.B_CHARS="[ -È-Ï]";M.C_CHARS="(Ï*[0-9]{2}Ï*)";M.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(Ee,"__esModule",{value:!0});var Ia=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ta=q,Ra=Ma(Ta),Q=M;function Ma(t){return t&&t.__esModule?t:{default:t}}function Da(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function La(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ba(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Fa=function(t){Ba(e,t);function e(a,r){Da(this,e);var i=La(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.substring(1),r));return i.bytes=a.split("").map(function(s){return s.charCodeAt(0)}),i}return Ia(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var r=this.bytes,i=r.shift()-105,s=Q.SET_BY_CODE[i];if(s===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&r.unshift(Q.FNC1);var o=e.next(r,1,s);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(i)+o.result+e.getBar((o.checksum+i)%Q.MODULO)+e.getBar(Q.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var r=this.options.ean128||!1;return typeof r=="string"&&(r=r.toLowerCase()==="true"),r}}],[{key:"getBar",value:function(r){return Q.BARS[r]?Q.BARS[r].toString():""}},{key:"correctIndex",value:function(r,i){if(i===Q.SET_A){var s=r.shift();return s<32?s+64:s-32}else return i===Q.SET_B?r.shift()-32:(r.shift()-48)*10+r.shift()-48}},{key:"next",value:function(r,i,s){if(!r.length)return{result:"",checksum:0};var o=void 0,l=void 0;if(r[0]>=200){l=r.shift()-105;var m=Q.SWAP[l];m!==void 0?o=e.next(r,i+1,m):((s===Q.SET_A||s===Q.SET_B)&&l===Q.SHIFT&&(r[0]=s===Q.SET_A?r[0]>95?r[0]-96:r[0]:r[0]<32?r[0]+96:r[0]),o=e.next(r,i+1,s))}else l=e.correctIndex(r,s),o=e.next(r,i+1,s);var h=e.getBar(l),j=l*i;return{result:h+o.result,checksum:j+o.checksum}}}]),e}(Ra.default);Ee.default=Fa;var jt={};Object.defineProperty(jt,"__esModule",{value:!0});var de=M,Fr=function(e){return e.match(new RegExp("^"+de.A_CHARS+"*"))[0].length},Ur=function(e){return e.match(new RegExp("^"+de.B_CHARS+"*"))[0].length},Gr=function(e){return e.match(new RegExp("^"+de.C_CHARS+"*"))[0]};function wt(t,e){var a=e?de.A_CHARS:de.B_CHARS,r=t.match(new RegExp("^("+a+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(r)return r[1]+"Ì"+zr(t.substring(r[1].length));var i=t.match(new RegExp("^"+a+"+"))[0];return i.length===t.length?t:i+String.fromCharCode(e?205:206)+wt(t.substring(i.length),!e)}function zr(t){var e=Gr(t),a=e.length;if(a===t.length)return t;t=t.substring(a);var r=Fr(t)>=Ur(t);return e+String.fromCharCode(r?206:205)+wt(t,r)}jt.default=function(t){var e=void 0,a=Gr(t).length;if(a>=2)e=de.C_START_CHAR+zr(t);else{var r=Fr(t)>Ur(t);e=(r?de.A_START_CHAR:de.B_START_CHAR)+wt(t,r)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(i,s){return"Ë"+s})};Object.defineProperty(_t,"__esModule",{value:!0});var Ua=Ee,Ga=Vr(Ua),za=jt,Va=Vr(za);function Vr(t){return t&&t.__esModule?t:{default:t}}function Ha(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ct(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function qa(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Xa=function(t){qa(e,t);function e(a,r){if(Ha(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(a))var i=ct(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,Va.default)(a),r));else var i=ct(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return ct(i)}return e}(Ga.default);_t.default=Xa;var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});var Ka=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Wa=Ee,Qa=Ya(Wa),xr=M;function Ya(t){return t&&t.__esModule?t:{default:t}}function Ja(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Za(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ei(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ti=function(t){ei(e,t);function e(a,r){return Ja(this,e),Za(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,xr.A_START_CHAR+a,r))}return Ka(e,[{key:"valid",value:function(){return new RegExp("^"+xr.A_CHARS+"+$").test(this.data)}}]),e}(Qa.default);Nt.default=ti;var Et={};Object.defineProperty(Et,"__esModule",{value:!0});var ri=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),ni=Ee,ai=ii(ni),pr=M;function ii(t){return t&&t.__esModule?t:{default:t}}function si(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function li(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ci=function(t){li(e,t);function e(a,r){return si(this,e),oi(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,pr.B_START_CHAR+a,r))}return ri(e,[{key:"valid",value:function(){return new RegExp("^"+pr.B_CHARS+"+$").test(this.data)}}]),e}(ai.default);Et.default=ci;var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});var di=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),ui=Ee,fi=mi(ui),gr=M;function mi(t){return t&&t.__esModule?t:{default:t}}function hi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function pi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var gi=function(t){pi(e,t);function e(a,r){return hi(this,e),xi(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,gr.C_START_CHAR+a,r))}return di(e,[{key:"valid",value:function(){return new RegExp("^"+gr.C_CHARS+"+$").test(this.data)}}]),e}(fi.default);Ot.default=gi;Object.defineProperty(ie,"__esModule",{value:!0});ie.CODE128C=ie.CODE128B=ie.CODE128A=ie.CODE128=void 0;var vi=_t,yi=Ye(vi),bi=Nt,_i=Ye(bi),ji=Et,wi=Ye(ji),Ni=Ot,Ei=Ye(Ni);function Ye(t){return t&&t.__esModule?t:{default:t}}ie.CODE128=yi.default;ie.CODE128A=_i.default;ie.CODE128B=wi.default;ie.CODE128C=Ei.default;var W={},St={},Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.SIDE_BIN="101";Z.MIDDLE_BIN="01010";Z.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};Z.EAN2_STRUCTURE=["LL","LG","GL","GG"];Z.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];Z.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var Je={},xe={};Object.defineProperty(xe,"__esModule",{value:!0});var Oi=Z,Si=function(e,a,r){var i=e.split("").map(function(o,l){return Oi.BINARIES[a[l]]}).map(function(o,l){return o?o[e[l]]:""});if(r){var s=e.length-1;i=i.map(function(o,l){return l<s?o+r:o})}return i.join("")};xe.default=Si;Object.defineProperty(Je,"__esModule",{value:!0});var ki=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),ye=Z,$i=xe,vr=Hr($i),Pi=q,Ci=Hr(Pi);function Hr(t){return t&&t.__esModule?t:{default:t}}function Ai(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ii(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ti(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ri=function(t){Ti(e,t);function e(a,r){Ai(this,e);var i=Ii(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return i.fontSize=!r.flat&&r.fontSize>r.width*10?r.width*10:r.fontSize,i.guardHeight=r.height+i.fontSize/2+r.textMargin,i}return ki(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(r,i){return this.text.substr(r,i)}},{key:"leftEncode",value:function(r,i){return(0,vr.default)(r,i)}},{key:"rightText",value:function(r,i){return this.text.substr(r,i)}},{key:"rightEncode",value:function(r,i){return(0,vr.default)(r,i)}},{key:"encodeGuarded",value:function(){var r={fontSize:this.fontSize},i={height:this.guardHeight};return[{data:ye.SIDE_BIN,options:i},{data:this.leftEncode(),text:this.leftText(),options:r},{data:ye.MIDDLE_BIN,options:i},{data:this.rightEncode(),text:this.rightText(),options:r},{data:ye.SIDE_BIN,options:i}]}},{key:"encodeFlat",value:function(){var r=[ye.SIDE_BIN,this.leftEncode(),ye.MIDDLE_BIN,this.rightEncode(),ye.SIDE_BIN];return{data:r.join(""),text:this.text}}}]),e}(Ci.default);Je.default=Ri;Object.defineProperty(St,"__esModule",{value:!0});var Mi=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ce=function t(e,a,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,a);if(i===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,a,r)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(r)}},Di=Z,Li=Je,Bi=Fi(Li);function Fi(t){return t&&t.__esModule?t:{default:t}}function Ui(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function zi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var yr=function(e){var a=e.substr(0,12).split("").map(function(r){return+r}).reduce(function(r,i,s){return s%2?r+i*3:r+i},0);return(10-a%10)%10},Vi=function(t){zi(e,t);function e(a,r){Ui(this,e),a.search(/^[0-9]{12}$/)!==-1&&(a+=yr(a));var i=Gi(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return i.lastChar=r.lastChar,i}return Mi(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===yr(this.data)}},{key:"leftText",value:function(){return Ce(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var r=this.data.substr(1,6),i=Di.EAN13_STRUCTURE[this.data[0]];return Ce(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,r,i)}},{key:"rightText",value:function(){return Ce(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var r=this.data.substr(7,6);return Ce(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,r,"RRRRRR")}},{key:"encodeGuarded",value:function(){var r=Ce(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(r.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(r.push({data:"00"}),r.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),r}}]),e}(Bi.default);St.default=Vi;var kt={};Object.defineProperty(kt,"__esModule",{value:!0});var Hi=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ue=function t(e,a,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,a);if(i===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,a,r)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(r)}},qi=Je,Xi=Ki(qi);function Ki(t){return t&&t.__esModule?t:{default:t}}function Wi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Yi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var br=function(e){var a=e.substr(0,7).split("").map(function(r){return+r}).reduce(function(r,i,s){return s%2?r+i:r+i*3},0);return(10-a%10)%10},Ji=function(t){Yi(e,t);function e(a,r){return Wi(this,e),a.search(/^[0-9]{7}$/)!==-1&&(a+=br(a)),Qi(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Hi(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===br(this.data)}},{key:"leftText",value:function(){return Ue(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var r=this.data.substr(0,4);return Ue(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,r,"LLLL")}},{key:"rightText",value:function(){return Ue(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var r=this.data.substr(4,4);return Ue(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,r,"RRRR")}}]),e}(Xi.default);kt.default=Ji;var $t={};Object.defineProperty($t,"__esModule",{value:!0});var Zi=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),es=Z,ts=xe,rs=qr(ts),ns=q,as=qr(ns);function qr(t){return t&&t.__esModule?t:{default:t}}function is(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ss(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function os(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ls=function(e){var a=e.split("").map(function(r){return+r}).reduce(function(r,i,s){return s%2?r+i*9:r+i*3},0);return a%10},cs=function(t){os(e,t);function e(a,r){return is(this,e),ss(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Zi(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var r=es.EAN5_STRUCTURE[ls(this.data)];return{data:"1011"+(0,rs.default)(this.data,r,"01"),text:this.text}}}]),e}(as.default);$t.default=cs;var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});var ds=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),us=Z,fs=xe,ms=Xr(fs),hs=q,xs=Xr(hs);function Xr(t){return t&&t.__esModule?t:{default:t}}function ps(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gs(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function vs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ys=function(t){vs(e,t);function e(a,r){return ps(this,e),gs(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return ds(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var r=us.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,ms.default)(this.data,r,"01"),text:this.text}}}]),e}(xs.default);Pt.default=ys;var Me={};Object.defineProperty(Me,"__esModule",{value:!0});var bs=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}();Me.checksum=ht;var _s=xe,be=Kr(_s),js=q,ws=Kr(js);function Kr(t){return t&&t.__esModule?t:{default:t}}function Ns(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Es(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Os(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ss=function(t){Os(e,t);function e(a,r){Ns(this,e),a.search(/^[0-9]{11}$/)!==-1&&(a+=ht(a));var i=Es(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return i.displayValue=r.displayValue,r.fontSize>r.width*10?i.fontSize=r.width*10:i.fontSize=r.fontSize,i.guardHeight=r.height+i.fontSize/2+r.textMargin,i}return bs(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==ht(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var r="";return r+="101",r+=(0,be.default)(this.data.substr(0,6),"LLLLLL"),r+="01010",r+=(0,be.default)(this.data.substr(6,6),"RRRRRR"),r+="101",{data:r,text:this.text}}},{key:"guardedEncoding",value:function(){var r=[];return this.displayValue&&r.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),r.push({data:"101"+(0,be.default)(this.data[0],"L"),options:{height:this.guardHeight}}),r.push({data:(0,be.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),r.push({data:"01010",options:{height:this.guardHeight}}),r.push({data:(0,be.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),r.push({data:(0,be.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&r.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),r}}]),e}(ws.default);function ht(t){var e=0,a;for(a=1;a<11;a+=2)e+=parseInt(t[a]);for(a=0;a<11;a+=2)e+=parseInt(t[a])*3;return(10-e%10)%10}Me.default=Ss;var Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});var ks=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),$s=xe,Ps=Wr($s),Cs=q,As=Wr(Cs),Is=Me;function Wr(t){return t&&t.__esModule?t:{default:t}}function Ts(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Rs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ms=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],Ds=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],Ls=function(t){Rs(e,t);function e(a,r){Ts(this,e);var i=dt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));if(i.isValid=!1,a.search(/^[0-9]{6}$/)!==-1)i.middleDigits=a,i.upcA=_r(a,"0"),i.text=r.text||""+i.upcA[0]+a+i.upcA[i.upcA.length-1],i.isValid=!0;else if(a.search(/^[01][0-9]{7}$/)!==-1)if(i.middleDigits=a.substring(1,a.length-1),i.upcA=_r(i.middleDigits,a[0]),i.upcA[i.upcA.length-1]===a[a.length-1])i.isValid=!0;else return dt(i);else return dt(i);return i.displayValue=r.displayValue,r.fontSize>r.width*10?i.fontSize=r.width*10:i.fontSize=r.fontSize,i.guardHeight=r.height+i.fontSize/2+r.textMargin,i}return ks(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var r="";return r+="101",r+=this.encodeMiddleDigits(),r+="010101",{data:r,text:this.text}}},{key:"guardedEncoding",value:function(){var r=[];return this.displayValue&&r.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),r.push({data:"101",options:{height:this.guardHeight}}),r.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),r.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&r.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),r}},{key:"encodeMiddleDigits",value:function(){var r=this.upcA[0],i=this.upcA[this.upcA.length-1],s=Ds[parseInt(i)][parseInt(r)];return(0,Ps.default)(this.middleDigits,s)}}]),e}(As.default);function _r(t,e){for(var a=parseInt(t[t.length-1]),r=Ms[a],i="",s=0,o=0;o<r.length;o++){var l=r[o];l==="X"?i+=t[s++]:i+=l}return i=""+e+i,""+i+(0,Is.checksum)(i)}Ct.default=Ls;Object.defineProperty(W,"__esModule",{value:!0});W.UPCE=W.UPC=W.EAN2=W.EAN5=W.EAN8=W.EAN13=void 0;var Bs=St,Fs=Oe(Bs),Us=kt,Gs=Oe(Us),zs=$t,Vs=Oe(zs),Hs=Pt,qs=Oe(Hs),Xs=Me,Ks=Oe(Xs),Ws=Ct,Qs=Oe(Ws);function Oe(t){return t&&t.__esModule?t:{default:t}}W.EAN13=Fs.default;W.EAN8=Gs.default;W.EAN5=Vs.default;W.EAN2=qs.default;W.UPC=Ks.default;W.UPCE=Qs.default;var we={},Ze={},De={};Object.defineProperty(De,"__esModule",{value:!0});De.START_BIN="1010";De.END_BIN="11101";De.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(Ze,"__esModule",{value:!0});var Ys=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ge=De,Js=q,Zs=eo(Js);function eo(t){return t&&t.__esModule?t:{default:t}}function to(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ro(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function no(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ao=function(t){no(e,t);function e(){return to(this,e),ro(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Ys(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var r=this,i=this.data.match(/.{2}/g).map(function(s){return r.encodePair(s)}).join("");return{data:Ge.START_BIN+i+Ge.END_BIN,text:this.text}}},{key:"encodePair",value:function(r){var i=Ge.BINARIES[r[1]];return Ge.BINARIES[r[0]].split("").map(function(s,o){return(s==="1"?"111":"1")+(i[o]==="1"?"000":"0")}).join("")}}]),e}(Zs.default);Ze.default=ao;var At={};Object.defineProperty(At,"__esModule",{value:!0});var io=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),so=Ze,oo=lo(so);function lo(t){return t&&t.__esModule?t:{default:t}}function co(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function fo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var jr=function(e){var a=e.substr(0,13).split("").map(function(r){return parseInt(r,10)}).reduce(function(r,i,s){return r+i*(3-s%2*2)},0);return Math.ceil(a/10)*10-a},mo=function(t){fo(e,t);function e(a,r){return co(this,e),a.search(/^[0-9]{13}$/)!==-1&&(a+=jr(a)),uo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return io(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===jr(this.data)}}]),e}(oo.default);At.default=mo;Object.defineProperty(we,"__esModule",{value:!0});we.ITF14=we.ITF=void 0;var ho=Ze,xo=Qr(ho),po=At,go=Qr(po);function Qr(t){return t&&t.__esModule?t:{default:t}}we.ITF=xo.default;we.ITF14=go.default;var J={},pe={};Object.defineProperty(pe,"__esModule",{value:!0});var vo=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),yo=q,bo=_o(yo);function _o(t){return t&&t.__esModule?t:{default:t}}function jo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function No(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Eo=function(t){No(e,t);function e(a,r){return jo(this,e),wo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return vo(e,[{key:"encode",value:function(){for(var r="110",i=0;i<this.data.length;i++){var s=parseInt(this.data[i]),o=s.toString(2);o=Oo(o,4-o.length);for(var l=0;l<o.length;l++)r+=o[l]=="0"?"100":"110"}return r+="1001",{data:r,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(bo.default);function Oo(t,e){for(var a=0;a<e;a++)t="0"+t;return t}pe.default=Eo;var It={},ge={};Object.defineProperty(ge,"__esModule",{value:!0});ge.mod10=So;ge.mod11=ko;function So(t){for(var e=0,a=0;a<t.length;a++){var r=parseInt(t[a]);(a+t.length)%2===0?e+=r:e+=r*2%10+Math.floor(r*2/10)}return(10-e%10)%10}function ko(t){for(var e=0,a=[2,3,4,5,6,7],r=0;r<t.length;r++){var i=parseInt(t[t.length-1-r]);e+=a[r%a.length]*i}return(11-e%11)%11}Object.defineProperty(It,"__esModule",{value:!0});var $o=pe,Po=Ao($o),Co=ge;function Ao(t){return t&&t.__esModule?t:{default:t}}function Io(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function To(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ro(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Mo=function(t){Ro(e,t);function e(a,r){return Io(this,e),To(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a+(0,Co.mod10)(a),r))}return e}(Po.default);It.default=Mo;var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});var Do=pe,Lo=Fo(Do),Bo=ge;function Fo(t){return t&&t.__esModule?t:{default:t}}function Uo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Go(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function zo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Vo=function(t){zo(e,t);function e(a,r){return Uo(this,e),Go(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a+(0,Bo.mod11)(a),r))}return e}(Lo.default);Tt.default=Vo;var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});var Ho=pe,qo=Xo(Ho),wr=ge;function Xo(t){return t&&t.__esModule?t:{default:t}}function Ko(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Qo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Yo=function(t){Qo(e,t);function e(a,r){return Ko(this,e),a+=(0,wr.mod10)(a),a+=(0,wr.mod10)(a),Wo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return e}(qo.default);Rt.default=Yo;var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});var Jo=pe,Zo=el(Jo),Nr=ge;function el(t){return t&&t.__esModule?t:{default:t}}function tl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function nl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var al=function(t){nl(e,t);function e(a,r){return tl(this,e),a+=(0,Nr.mod11)(a),a+=(0,Nr.mod10)(a),rl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return e}(Zo.default);Mt.default=al;Object.defineProperty(J,"__esModule",{value:!0});J.MSI1110=J.MSI1010=J.MSI11=J.MSI10=J.MSI=void 0;var il=pe,sl=Le(il),ol=It,ll=Le(ol),cl=Tt,dl=Le(cl),ul=Rt,fl=Le(ul),ml=Mt,hl=Le(ml);function Le(t){return t&&t.__esModule?t:{default:t}}J.MSI=sl.default;J.MSI10=ll.default;J.MSI11=dl.default;J.MSI1010=fl.default;J.MSI1110=hl.default;var et={};Object.defineProperty(et,"__esModule",{value:!0});et.pharmacode=void 0;var xl=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),pl=q,gl=vl(pl);function vl(t){return t&&t.__esModule?t:{default:t}}function yl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _l(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var jl=function(t){_l(e,t);function e(a,r){yl(this,e);var i=bl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return i.number=parseInt(a,10),i}return xl(e,[{key:"encode",value:function(){for(var r=this.number,i="";!isNaN(r)&&r!=0;)r%2===0?(i="11100"+i,r=(r-2)/2):(i="100"+i,r=(r-1)/2);return i=i.slice(0,-2),{data:i,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(gl.default);et.pharmacode=jl;var tt={};Object.defineProperty(tt,"__esModule",{value:!0});tt.codabar=void 0;var wl=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Nl=q,El=Ol(Nl);function Ol(t){return t&&t.__esModule?t:{default:t}}function Sl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function $l(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Pl=function(t){$l(e,t);function e(a,r){Sl(this,e),a.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(a="A"+a+"A");var i=kl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.toUpperCase(),r));return i.text=i.options.text||i.text.replace(/[A-D]/g,""),i}return wl(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var r=[],i=this.getEncodings(),s=0;s<this.data.length;s++)r.push(i[this.data.charAt(s)]),s!==this.data.length-1&&r.push("0");return{text:this.text,data:r.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(El.default);tt.codabar=Pl;var Ne={},rt={},Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)","ÿ"];Be.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"];Be.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]};Object.defineProperty(rt,"__esModule",{value:!0});var Cl=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),ze=Be,Al=q,Il=Tl(Al);function Tl(t){return t&&t.__esModule?t:{default:t}}function Rl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ml(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Dl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ll=function(t){Dl(e,t);function e(a,r){return Rl(this,e),Ml(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Cl(e,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var r=this.data.split("").flatMap(function(l){return ze.MULTI_SYMBOLS[l]||l}),i=r.map(function(l){return e.getEncoding(l)}).join(""),s=e.checksum(r,20),o=e.checksum(r.concat(s),15);return{text:this.text,data:e.getEncoding("ÿ")+i+e.getEncoding(s)+e.getEncoding(o)+e.getEncoding("ÿ")+"1"}}}],[{key:"getEncoding",value:function(r){return ze.BINARIES[e.symbolValue(r)]}},{key:"getSymbol",value:function(r){return ze.SYMBOLS[r]}},{key:"symbolValue",value:function(r){return ze.SYMBOLS.indexOf(r)}},{key:"checksum",value:function(r,i){var s=r.slice().reverse().reduce(function(o,l,m){var h=m%i+1;return o+e.symbolValue(l)*h},0);return e.getSymbol(s%47)}}]),e}(Il.default);rt.default=Ll;var Dt={};Object.defineProperty(Dt,"__esModule",{value:!0});var Bl=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Fl=rt,Ul=Gl(Fl);function Gl(t){return t&&t.__esModule?t:{default:t}}function zl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Hl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ql=function(t){Hl(e,t);function e(a,r){return zl(this,e),Vl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Bl(e,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),e}(Ul.default);Dt.default=ql;Object.defineProperty(Ne,"__esModule",{value:!0});Ne.CODE93FullASCII=Ne.CODE93=void 0;var Xl=rt,Kl=Yr(Xl),Wl=Dt,Ql=Yr(Wl);function Yr(t){return t&&t.__esModule?t:{default:t}}Ne.CODE93=Kl.default;Ne.CODE93FullASCII=Ql.default;var nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.GenericBarcode=void 0;var Yl=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Jl=q,Zl=ec(Jl);function ec(t){return t&&t.__esModule?t:{default:t}}function tc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rc(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function nc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ac=function(t){nc(e,t);function e(a,r){return tc(this,e),rc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Yl(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(Zl.default);nt.GenericBarcode=ac;Object.defineProperty(bt,"__esModule",{value:!0});var ic=Qe,Ve=ie,_e=W,Er=we,Ae=J,sc=et,oc=tt,Or=Ne,lc=nt;bt.default={CODE39:ic.CODE39,CODE128:Ve.CODE128,CODE128A:Ve.CODE128A,CODE128B:Ve.CODE128B,CODE128C:Ve.CODE128C,EAN13:_e.EAN13,EAN8:_e.EAN8,EAN5:_e.EAN5,EAN2:_e.EAN2,UPC:_e.UPC,UPCE:_e.UPCE,ITF14:Er.ITF14,ITF:Er.ITF,MSI:Ae.MSI,MSI10:Ae.MSI10,MSI11:Ae.MSI11,MSI1010:Ae.MSI1010,MSI1110:Ae.MSI1110,pharmacode:sc.pharmacode,codabar:oc.codabar,CODE93:Or.CODE93,CODE93FullASCII:Or.CODE93FullASCII,GenericBarcode:lc.GenericBarcode};var Se={};Object.defineProperty(Se,"__esModule",{value:!0});var cc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t};Se.default=function(t,e){return cc({},t,e)};var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.default=dc;function dc(t){var e=[];function a(r){if(Array.isArray(r))for(var i=0;i<r.length;i++)a(r[i]);else r.text=r.text||"",r.data=r.data||"",e.push(r)}return a(t),e}var Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.default=uc;function uc(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}var Ft={},Ut={},at={};Object.defineProperty(at,"__esModule",{value:!0});at.default=fc;function fc(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var a in e)e.hasOwnProperty(a)&&(a=e[a],typeof t[a]=="string"&&(t[a]=parseInt(t[a],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}var it={};Object.defineProperty(it,"__esModule",{value:!0});var mc={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};it.default=mc;Object.defineProperty(Ut,"__esModule",{value:!0});var hc=at,xc=Jr(hc),pc=it,Sr=Jr(pc);function Jr(t){return t&&t.__esModule?t:{default:t}}function gc(t){var e={};for(var a in Sr.default)Sr.default.hasOwnProperty(a)&&(t.hasAttribute("jsbarcode-"+a.toLowerCase())&&(e[a]=t.getAttribute("jsbarcode-"+a.toLowerCase())),t.hasAttribute("data-"+a.toLowerCase())&&(e[a]=t.getAttribute("data-"+a.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,xc.default)(e),e}Ut.default=gc;var Gt={},zt={},Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.getTotalWidthOfEncodings=Y.calculateEncodingAttributes=Y.getBarcodePadding=Y.getEncodingHeight=Y.getMaximumHeightOfEncodings=void 0;var vc=Se,yc=bc(vc);function bc(t){return t&&t.__esModule?t:{default:t}}function Zr(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function en(t,e,a){if(a.displayValue&&e<t){if(a.textAlign=="center")return Math.floor((t-e)/2);if(a.textAlign=="left")return 0;if(a.textAlign=="right")return Math.floor(t-e)}return 0}function _c(t,e,a){for(var r=0;r<t.length;r++){var i=t[r],s=(0,yc.default)(e,i.options),o;s.displayValue?o=Nc(i.text,s,a):o=0;var l=i.data.length*s.width;i.width=Math.ceil(Math.max(o,l)),i.height=Zr(i,s),i.barcodePadding=en(o,l,s)}}function jc(t){for(var e=0,a=0;a<t.length;a++)e+=t[a].width;return e}function wc(t){for(var e=0,a=0;a<t.length;a++)t[a].height>e&&(e=t[a].height);return e}function Nc(t,e,a){var r;if(a)r=a;else if(typeof document<"u")r=document.createElement("canvas").getContext("2d");else return 0;r.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var i=r.measureText(t);if(!i)return 0;var s=i.width;return s}Y.getMaximumHeightOfEncodings=wc;Y.getEncodingHeight=Zr;Y.getBarcodePadding=en;Y.calculateEncodingAttributes=_c;Y.getTotalWidthOfEncodings=jc;Object.defineProperty(zt,"__esModule",{value:!0});var Ec=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Oc=Se,Sc=kc(Oc),ut=Y;function kc(t){return t&&t.__esModule?t:{default:t}}function $c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Pc=function(){function t(e,a,r){$c(this,t),this.canvas=e,this.encodings=a,this.options=r}return Ec(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var a=0;a<this.encodings.length;a++){var r=(0,Sc.default)(this.options,this.encodings[a].options);this.drawCanvasBarcode(r,this.encodings[a]),this.drawCanvasText(r,this.encodings[a]),this.moveCanvasDrawing(this.encodings[a])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var a=this.canvas.getContext("2d");a.save(),(0,ut.calculateEncodingAttributes)(this.encodings,this.options,a);var r=(0,ut.getTotalWidthOfEncodings)(this.encodings),i=(0,ut.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=r+this.options.marginLeft+this.options.marginRight,this.canvas.height=i,a.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(a.fillStyle=this.options.background,a.fillRect(0,0,this.canvas.width,this.canvas.height)),a.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(a,r){var i=this.canvas.getContext("2d"),s=r.data,o;a.textPosition=="top"?o=a.marginTop+a.fontSize+a.textMargin:o=a.marginTop,i.fillStyle=a.lineColor;for(var l=0;l<s.length;l++){var m=l*a.width+r.barcodePadding;s[l]==="1"?i.fillRect(m,o,a.width,a.height):s[l]&&i.fillRect(m,o,a.width,a.height*s[l])}}},{key:"drawCanvasText",value:function(a,r){var i=this.canvas.getContext("2d"),s=a.fontOptions+" "+a.fontSize+"px "+a.font;if(a.displayValue){var o,l;a.textPosition=="top"?l=a.marginTop+a.fontSize-a.textMargin:l=a.height+a.textMargin+a.marginTop+a.fontSize,i.font=s,a.textAlign=="left"||r.barcodePadding>0?(o=0,i.textAlign="left"):a.textAlign=="right"?(o=r.width-1,i.textAlign="right"):(o=r.width/2,i.textAlign="center"),i.fillText(r.text,o,l)}}},{key:"moveCanvasDrawing",value:function(a){var r=this.canvas.getContext("2d");r.translate(a.width,0)}},{key:"restoreCanvas",value:function(){var a=this.canvas.getContext("2d");a.restore()}}]),t}();zt.default=Pc;var Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});var Cc=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ac=Se,Ic=Tc(Ac),ft=Y;function Tc(t){return t&&t.__esModule?t:{default:t}}function Rc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var He="http://www.w3.org/2000/svg",Mc=function(){function t(e,a,r){Rc(this,t),this.svg=e,this.encodings=a,this.options=r,this.document=r.xmlDocument||document}return Cc(t,[{key:"render",value:function(){var a=this.options.marginLeft;this.prepareSVG();for(var r=0;r<this.encodings.length;r++){var i=this.encodings[r],s=(0,Ic.default)(this.options,i.options),o=this.createGroup(a,s.marginTop,this.svg);this.setGroupOptions(o,s),this.drawSvgBarcode(o,s,i),this.drawSVGText(o,s,i),a+=i.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,ft.calculateEncodingAttributes)(this.encodings,this.options);var a=(0,ft.getTotalWidthOfEncodings)(this.encodings),r=(0,ft.getMaximumHeightOfEncodings)(this.encodings),i=a+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(i,r),this.options.background&&this.drawRect(0,0,i,r,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(a,r,i){var s=i.data,o;r.textPosition=="top"?o=r.fontSize+r.textMargin:o=0;for(var l=0,m=0,h=0;h<s.length;h++)m=h*r.width+i.barcodePadding,s[h]==="1"?l++:l>0&&(this.drawRect(m-r.width*l,o,r.width*l,r.height,a),l=0);l>0&&this.drawRect(m-r.width*(l-1),o,r.width*l,r.height,a)}},{key:"drawSVGText",value:function(a,r,i){var s=this.document.createElementNS(He,"text");if(r.displayValue){var o,l;s.setAttribute("style","font:"+r.fontOptions+" "+r.fontSize+"px "+r.font),r.textPosition=="top"?l=r.fontSize-r.textMargin:l=r.height+r.textMargin+r.fontSize,r.textAlign=="left"||i.barcodePadding>0?(o=0,s.setAttribute("text-anchor","start")):r.textAlign=="right"?(o=i.width-1,s.setAttribute("text-anchor","end")):(o=i.width/2,s.setAttribute("text-anchor","middle")),s.setAttribute("x",o),s.setAttribute("y",l),s.appendChild(this.document.createTextNode(i.text)),a.appendChild(s)}}},{key:"setSvgAttributes",value:function(a,r){var i=this.svg;i.setAttribute("width",a+"px"),i.setAttribute("height",r+"px"),i.setAttribute("x","0px"),i.setAttribute("y","0px"),i.setAttribute("viewBox","0 0 "+a+" "+r),i.setAttribute("xmlns",He),i.setAttribute("version","1.1"),i.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(a,r,i){var s=this.document.createElementNS(He,"g");return s.setAttribute("transform","translate("+a+", "+r+")"),i.appendChild(s),s}},{key:"setGroupOptions",value:function(a,r){a.setAttribute("style","fill:"+r.lineColor+";")}},{key:"drawRect",value:function(a,r,i,s,o){var l=this.document.createElementNS(He,"rect");return l.setAttribute("x",a),l.setAttribute("y",r),l.setAttribute("width",i),l.setAttribute("height",s),o.appendChild(l),l}}]),t}();Vt.default=Mc;var Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});var Dc=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}();function Lc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Bc=function(){function t(e,a,r){Lc(this,t),this.object=e,this.encodings=a,this.options=r}return Dc(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();Ht.default=Bc;Object.defineProperty(Gt,"__esModule",{value:!0});var Fc=zt,Uc=qt(Fc),Gc=Vt,zc=qt(Gc),Vc=Ht,Hc=qt(Vc);function qt(t){return t&&t.__esModule?t:{default:t}}Gt.default={CanvasRenderer:Uc.default,SVGRenderer:zc.default,ObjectRenderer:Hc.default};var ke={};Object.defineProperty(ke,"__esModule",{value:!0});function Xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Wt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var qc=function(t){Wt(e,t);function e(a,r){Xt(this,e);var i=Kt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="InvalidInputException",i.symbology=a,i.input=r,i.message='"'+i.input+'" is not a valid input for '+i.symbology,i}return e}(Error),Xc=function(t){Wt(e,t);function e(){Xt(this,e);var a=Kt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.name="InvalidElementException",a.message="Not supported type to render on",a}return e}(Error),Kc=function(t){Wt(e,t);function e(){Xt(this,e);var a=Kt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.name="NoElementException",a.message="No element to render on.",a}return e}(Error);ke.InvalidInputException=qc;ke.InvalidElementException=Xc;ke.NoElementException=Kc;Object.defineProperty(Ft,"__esModule",{value:!0});var Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qc=Ut,xt=tn(Qc),Yc=Gt,Ie=tn(Yc),Jc=ke;function tn(t){return t&&t.__esModule?t:{default:t}}function Qt(t){if(typeof t=="string")return Zc(t);if(Array.isArray(t)){for(var e=[],a=0;a<t.length;a++)e.push(Qt(t[a]));return e}else{if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLImageElement)return ed(t);if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&t instanceof SVGElement)return{element:t,options:(0,xt.default)(t),renderer:Ie.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement)return{element:t,options:(0,xt.default)(t),renderer:Ie.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:Ie.default.CanvasRenderer};if(t&&(typeof t>"u"?"undefined":Wc(t))==="object"&&!t.nodeName)return{element:t,renderer:Ie.default.ObjectRenderer};throw new Jc.InvalidElementException}}function Zc(t){var e=document.querySelectorAll(t);if(e.length!==0){for(var a=[],r=0;r<e.length;r++)a.push(Qt(e[r]));return a}}function ed(t){var e=document.createElement("canvas");return{element:e,options:(0,xt.default)(t),renderer:Ie.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}Ft.default=Qt;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});var td=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}();function rd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var nd=function(){function t(e){rd(this,t),this.api=e}return td(t,[{key:"handleCatch",value:function(a){if(a.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw a.message;else throw a;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(a){try{var r=a.apply(void 0,arguments);return this.api._options.valid(!0),r}catch(i){return this.handleCatch(i),this.api}}}]),t}();Yt.default=nd;var ad=bt,he=ue(ad),id=Se,Fe=ue(id),sd=Lt,rn=ue(sd),od=Bt,kr=ue(od),ld=Ft,cd=ue(ld),dd=at,ud=ue(dd),fd=Yt,md=ue(fd),nn=ke,hd=it,an=ue(hd);function ue(t){return t&&t.__esModule?t:{default:t}}var le=function(){},st=function(e,a,r){var i=new le;if(typeof e>"u")throw Error("No element to render on was provided.");return i._renderProperties=(0,cd.default)(e),i._encodings=[],i._options=an.default,i._errorHandler=new md.default(i),typeof a<"u"&&(r=r||{},r.format||(r.format=on()),i.options(r)[r.format](a,r).render()),i};st.getModule=function(t){return he.default[t]};for(var $r in he.default)he.default.hasOwnProperty($r)&&xd(he.default,$r);function xd(t,e){le.prototype[e]=le.prototype[e.toUpperCase()]=le.prototype[e.toLowerCase()]=function(a,r){var i=this;return i._errorHandler.wrapBarcodeCall(function(){r.text=typeof r.text>"u"?void 0:""+r.text;var s=(0,Fe.default)(i._options,r);s=(0,ud.default)(s);var o=t[e],l=sn(a,o,s);return i._encodings.push(l),i})}}function sn(t,e,a){t=""+t;var r=new e(t,a);if(!r.valid())throw new nn.InvalidInputException(r.constructor.name,t);var i=r.encode();i=(0,rn.default)(i);for(var s=0;s<i.length;s++)i[s].options=(0,Fe.default)(a,i[s].options);return i}function on(){return he.default.CODE128?"CODE128":Object.keys(he.default)[0]}le.prototype.options=function(t){return this._options=(0,Fe.default)(this._options,t),this};le.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this};le.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var a=(0,Fe.default)(this._options,t.options);a.format=="auto"&&(a.format=on()),this._errorHandler.wrapBarcodeCall(function(){var r=a.value,i=he.default[a.format.toUpperCase()],s=sn(r,i,a);pt(t,s,a)})}}};le.prototype.render=function(){if(!this._renderProperties)throw new nn.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)pt(this._renderProperties[t],this._encodings,this._options);else pt(this._renderProperties,this._encodings,this._options);return this};le.prototype._defaults=an.default;function pt(t,e,a){e=(0,rn.default)(e);for(var r=0;r<e.length;r++)e[r].options=(0,Fe.default)(a,e[r].options),(0,kr.default)(e[r].options);(0,kr.default)(a);var i=t.renderer,s=new i(t.element,e,a);s.render(),t.afterRender&&t.afterRender()}typeof window<"u"&&(window.JsBarcode=st);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(t,e){var a=[];return jQuery(this).each(function(){a.push(this)}),st(a,t,e)});var pd=st;const ln=An(pd),gd=({product:t,barcodeValue:e,format:a="CODE128",onClose:r})=>{const i=p.useRef(null),[s,o]=p.useState(!1),[l,m]=p.useState(a),[h,j]=p.useState(e||(t==null?void 0:t.barcode)||""),u=[{value:"CODE128",label:"CODE128 (Recommended)"},{value:"CODE39",label:"CODE39"},{value:"EAN13",label:"EAN-13"},{value:"EAN8",label:"EAN-8"},{value:"UPC",label:"UPC-A"},{value:"ITF14",label:"ITF-14"},{value:"MSI",label:"MSI"},{value:"pharmacode",label:"Pharmacode"},{value:"codabar",label:"Codabar"}];p.useEffect(()=>{w()},[h,l]);const w=()=>{if(!(!i.current||!h))try{ln(i.current,h,{format:l,width:2,height:100,displayValue:!0,fontSize:16,margin:10,background:"#ffffff",lineColor:"#000000"})}catch(c){console.error("Error generating barcode:",c),U.error(`Invalid barcode format for ${l}. Please try a different format.`)}},v=()=>{if(!i.current)return;const g=i.current.toDataURL("image/png"),E=document.createElement("a");E.download=`barcode-${h}.png`,E.href=g,E.click(),U.success("Barcode downloaded successfully")},P=()=>{h&&navigator.clipboard.writeText(h).then(()=>{o(!0),U.success("Barcode copied to clipboard"),setTimeout(()=>o(!1),2e3)}).catch(()=>{U.error("Failed to copy barcode")})},A=()=>{if(!i.current)return;const c=i.current,g=window.open("","_blank");g.document.write(`
      <html>
        <head>
          <title>Barcode Print</title>
          <style>
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              min-height: 100vh;
            }
            img {
              max-width: 100%;
              height: auto;
            }
          </style>
        </head>
        <body>
          <img src="${c.toDataURL("image/png")}" alt="Barcode" />
          <script>
            window.onload = function() {
              window.print();
            };
          <\/script>
        </body>
      </html>
    `),g.document.close()},N=()=>{const c=Math.floor(1e12+Math.random()*9e12);j(c.toString())};return!t&&!e?n.jsx("div",{className:"p-4 text-center text-gray-500",children:n.jsx("p",{children:"No product or barcode value provided"})}):n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Tr,{className:"h-5 w-5 text-primary-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t?`Barcode for ${t.name}`:"Generate Barcode"})]}),r&&n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(ce,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode Value"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{type:"text",value:h,onChange:c=>j(c.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter barcode value"}),n.jsx("button",{onClick:N,className:"px-3 py-2 text-sm text-primary-600 hover:text-primary-700 border border-primary-300 rounded-md hover:bg-primary-50 transition-colors",children:"Generate Random"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode Format"}),n.jsx("select",{value:l,onChange:c=>m(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:u.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]}),n.jsx("div",{className:"flex justify-center p-4 bg-gray-50 rounded-lg",children:n.jsx("canvas",{ref:i,className:"max-w-full"})}),n.jsxs("div",{className:"flex items-center justify-end space-x-2 pt-4 border-t",children:[n.jsxs("button",{onClick:P,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[s?n.jsx(ia,{className:"h-4 w-4"}):n.jsx(la,{className:"h-4 w-4"}),n.jsx("span",{children:s?"Copied!":"Copy Value"})]}),n.jsxs("button",{onClick:v,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[n.jsx(je,{className:"h-4 w-4"}),n.jsx("span",{children:"Download"})]}),n.jsxs("button",{onClick:A,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[n.jsx(Xe,{className:"h-4 w-4"}),n.jsx("span",{children:"Print"})]})]})]})]})},vd=({products:t=[],onClose:e,initialLabelSize:a="standard"})=>{const[r,i]=p.useState([]),[s,o]=p.useState(a),[l,m]=p.useState("CODE128"),[h,j]=p.useState(!1),[u,w]=p.useState(!0),[v,P]=p.useState(2);p.useRef(null),p.useEffect(()=>{t.length>0&&i(t.map(y=>y._id||y.id))},[t]);const A=y=>{i(b=>b.includes(y)?b.filter(O=>O!==y):[...b,y])},N=()=>{i(t.map(y=>y._id||y.id))},c=()=>{i([])},g=(y,b)=>{const O=document.createElement("canvas");try{return ln(O,y,{format:b,width:s==="small"?1.5:s==="large"?3:2,height:s==="small"?60:s==="large"?120:80,displayValue:!0,fontSize:s==="small"?12:s==="large"?18:14,margin:5,background:"#ffffff",lineColor:"#000000"}),O}catch(d){return console.error("Error generating barcode:",d),null}},E=()=>{if(r.length===0){U.error("Please select at least one product");return}const y=t.filter(d=>r.includes(d._id||d.id)),b=window.open("","_blank"),O=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Barcode Labels</title>
          <style>
            @media print {
              @page {
                size: A4;
                margin: 10mm;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              font-family: Arial, sans-serif;
              margin: 0;
              padding: 20px;
            }
            .labels-container {
              display: grid;
              grid-template-columns: repeat(${v}, 1fr);
              gap: 10px;
              width: 100%;
            }
            .label {
              border: 1px solid #ddd;
              padding: 10px;
              text-align: center;
              page-break-inside: avoid;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              min-height: ${s==="small"?"80px":s==="large"?"150px":"120px"};
            }
            .label-name {
              font-size: ${s==="small"?"10px":s==="large"?"16px":"12px"};
              font-weight: bold;
              margin-bottom: 5px;
              word-wrap: break-word;
            }
            .label-price {
              font-size: ${s==="small"?"9px":s==="large"?"14px":"11px"};
              color: #666;
              margin-top: 5px;
            }
            .barcode-container {
              margin: 5px 0;
            }
          </style>
        </head>
        <body>
          <div class="labels-container">
            ${y.map(d=>{var K;const x=d.barcode||d.sku||d._id||d.id;if(!x)return"";const _=g(x,l);if(!_)return"";const D=_.toDataURL("image/png");return`
                <div class="label">
                  ${u?`<div class="label-name">${d.name||"Product"}</div>`:""}
                  <div class="barcode-container">
                    <img src="${D}" alt="Barcode" />
                  </div>
                  ${h&&((K=d.pricing)!=null&&K.retail)?`<div class="label-price">$${d.pricing.retail.toFixed(2)}</div>`:""}
                </div>
              `}).join("")}
          </div>
          <script>
            window.onload = function() {
              window.print();
            };
          <\/script>
        </body>
      </html>
    `;b.document.write(O),b.document.close(),U.success(`Printing ${y.length} label(s)`)},X=()=>{if(r.length===0){U.error("Please select at least one product");return}const y=t.filter(d=>r.includes(d._id||d.id)),b=window.open("","_blank"),O=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Barcode Labels</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 0;
              padding: 20px;
            }
            .labels-container {
              display: grid;
              grid-template-columns: repeat(${v}, 1fr);
              gap: 10px;
              width: 100%;
            }
            .label {
              border: 1px solid #ddd;
              padding: 10px;
              text-align: center;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              min-height: ${s==="small"?"80px":s==="large"?"150px":"120px"};
            }
            .label-name {
              font-size: ${s==="small"?"10px":s==="large"?"16px":"12px"};
              font-weight: bold;
              margin-bottom: 5px;
              word-wrap: break-word;
            }
            .label-price {
              font-size: ${s==="small"?"9px":s==="large"?"14px":"11px"};
              color: #666;
              margin-top: 5px;
            }
            .barcode-container {
              margin: 5px 0;
            }
          </style>
        </head>
        <body>
          <div class="labels-container">
            ${y.map(d=>{var K;const x=d.barcode||d.sku||d._id||d.id;if(!x)return"";const _=g(x,l);if(!_)return"";const D=_.toDataURL("image/png");return`
                <div class="label">
                  ${u?`<div class="label-name">${d.name||"Product"}</div>`:""}
                  <div class="barcode-container">
                    <img src="${D}" alt="Barcode" />
                  </div>
                  ${h&&((K=d.pricing)!=null&&K.retail)?`<div class="label-price">$${d.pricing.retail.toFixed(2)}</div>`:""}
                </div>
              `}).join("")}
          </div>
        </body>
      </html>
    `;b.document.write(O),b.document.close(),U.success("Labels ready for download/print")};return n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-75 flex items-center justify-center p-4",children:n.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xe,{className:"h-5 w-5 text-primary-600"}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Print Barcode Labels"})]}),e&&n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(ce,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[n.jsx("div",{className:"lg:col-span-1 space-y-4",children:n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[n.jsx(In,{className:"h-4 w-4 text-gray-600"}),n.jsx("h3",{className:"font-medium text-gray-900",children:"Label Settings"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Label Size"}),n.jsxs("select",{value:s,onChange:y=>o(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[n.jsx("option",{value:"small",children:"Small"}),n.jsx("option",{value:"standard",children:"Standard"}),n.jsx("option",{value:"large",children:"Large"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode Format"}),n.jsxs("select",{value:l,onChange:y=>m(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[n.jsx("option",{value:"CODE128",children:"CODE128"}),n.jsx("option",{value:"CODE39",children:"CODE39"}),n.jsx("option",{value:"EAN13",children:"EAN-13"}),n.jsx("option",{value:"EAN8",children:"EAN-8"}),n.jsx("option",{value:"UPC",children:"UPC-A"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labels Per Row"}),n.jsxs("select",{value:v,onChange:y=>P(Number(y.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[n.jsx("option",{value:"1",children:"1"}),n.jsx("option",{value:"2",children:"2"}),n.jsx("option",{value:"3",children:"3"}),n.jsx("option",{value:"4",children:"4"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:u,onChange:y=>w(y.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Include Product Name"})]}),n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:h,onChange:y=>j(y.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Include Price"})]})]})]})]})}),n.jsxs("div",{className:"lg:col-span-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"font-medium text-gray-900",children:["Select Products (",r.length," of ",t.length,")"]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:N,className:"text-sm text-primary-600 hover:text-primary-700",children:"Select All"}),n.jsx("span",{className:"text-gray-300",children:"|"}),n.jsx("button",{onClick:c,className:"text-sm text-gray-600 hover:text-gray-700",children:"Deselect All"})]})]}),n.jsx("div",{className:"border rounded-lg max-h-96 overflow-y-auto",children:t.length===0?n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx(Re,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),n.jsx("p",{children:"No products available"})]}):n.jsx("div",{className:"divide-y",children:t.map(y=>{const b=r.includes(y._id||y.id),O=!!(y.barcode||y.sku);return n.jsxs("label",{className:`flex items-center p-3 cursor-pointer hover:bg-gray-50 ${b?"bg-primary-50":""}`,children:[n.jsx("input",{type:"checkbox",checked:b,onChange:()=>A(y._id||y.id),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),n.jsxs("div",{className:"ml-3 flex-1",children:[n.jsx("div",{className:"font-medium text-gray-900",children:y.name}),n.jsx("div",{className:"text-sm text-gray-500",children:O?n.jsx("span",{className:"font-mono",children:y.barcode||y.sku}):n.jsx("span",{className:"text-yellow-600",children:"No barcode"})})]})]},y._id||y.id)})})})]})]})}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-4 border-t bg-gray-50",children:[e&&n.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:X,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[n.jsx(je,{className:"h-4 w-4"}),n.jsx("span",{children:"Preview"})]}),n.jsxs("button",{onClick:E,disabled:r.length===0,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[n.jsx(Xe,{className:"h-4 w-4"}),n.jsx("span",{children:"Print Labels"})]})]})]})})},yd=t=>{p.useEffect(()=>{const e=a=>{if(!a.key)return;const r=a.target;if(r.tagName==="INPUT"||r.tagName==="TEXTAREA"||r.contentEditable==="true"||r.isContentEditable)return;const s=a.key.toLowerCase(),l=a.ctrlKey||a.metaKey?`ctrl+${s}`:s;t[l]&&(a.preventDefault(),t[l]())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t])},Pr=t=>t.inventory.currentStock<=t.inventory.reorderPoint,bd=t=>{if(!t.expiryDate)return null;const e=new Date(t.expiryDate),a=new Date;a.setHours(0,0,0,0),e.setHours(0,0,0,0);const r=e-a,i=Math.ceil(r/(1e3*60*60*24));return i<0?{status:"expired",days:Math.abs(i)}:i<=7?{status:"expiring_soon",days:i}:{status:"valid",days:i}},_d=({product:t,isOpen:e,onClose:a,onSave:r,isSubmitting:i,allProducts:s=[],onEditExisting:o,categories:l=[]})=>{var O;const[m,h]=p.useState({name:"",description:"",category:"",status:"active",expiryDate:"",pricing:{cost:"",retail:"",wholesale:""},inventory:{currentStock:"",reorderPoint:""}}),[j,u]=p.useState(!1),[w,v]=p.useState([]),[P,A]=p.useState(null),[N,c]=p.useState({}),g=re.useCallback(d=>{const{name:x,value:_,type:D,checked:K}=d.target;let S=D==="checkbox"?K:_;if(x.includes(".")){const[$,C]=x.split(".");h(k=>({...k,[$]:{...k[$],[C]:S}}))}else h($=>({...$,[x]:S}));if(x==="name"&&_.length>2&&!t){const $=s.find(C=>C.name.toLowerCase()===_.toLowerCase());if($)A($),u(!1),v([]);else{A(null);const C=s.filter(k=>k.name.toLowerCase().includes(_.toLowerCase())).slice(0,3);C.length>0?(v(C),u(!0)):(u(!1),v([]))}}else x==="name"&&(u(!1),v([]),A(null));c($=>$[x]?{...$,[x]:null}:$)},[t,s]),E=re.useCallback(d=>{const{name:x,value:_}=d.target;x==="name"&&(!_||_.trim()==="")?c(D=>({...D,[x]:"Product name is required"})):x==="name"&&_.length<2?c(D=>({...D,[x]:"Product name must be at least 2 characters"})):c(D=>({...D,[x]:null}))},[]),X=re.useCallback(()=>{const d={};return!m.name||m.name.trim()===""?d.name="Product name is required":m.name.length<2&&(d.name="Product name must be at least 2 characters"),c(d),Object.keys(d).length===0},[m.name]),y=re.useCallback((d={})=>{var _,D,K,S,$;let x="";if(d.expiryDate){const C=new Date(d.expiryDate);isNaN(C.getTime())||(x=C.toISOString().split("T")[0])}h({name:d.name||"",description:d.description||"",category:d.category||"",status:d.status||"active",expiryDate:x,barcode:d.barcode||"",sku:d.sku||"",brand:d.brand||"",pricing:{cost:((_=d.pricing)==null?void 0:_.cost)||"",retail:((D=d.pricing)==null?void 0:D.retail)||"",wholesale:((K=d.pricing)==null?void 0:K.wholesale)||""},inventory:{currentStock:((S=d.inventory)==null?void 0:S.currentStock)||"",reorderPoint:(($=d.inventory)==null?void 0:$.reorderPoint)||""}}),c({})},[]);re.useEffect(()=>{y(t||{})},[t,y]),re.useEffect(()=>{e&&setTimeout(()=>{const d=document.querySelector('input[name="name"]');d&&d.focus()},100)},[e]);const b=d=>{if(d.preventDefault(),!X()){const _=Object.keys(N).find(D=>N[D]);_&&setTimeout(()=>{const D=document.querySelector(`[name="${_}"], #${_}`);D&&(D.focus(),D.scrollIntoView({behavior:"smooth",block:"center"}))},100);return}r(m),a()};return e?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:a}),n.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:n.jsxs("form",{onSubmit:b,children:[n.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:t?"Edit Product":"Add New Product"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{id:"name",name:"name",type:"text",value:m.name||"",onChange:g,onBlur:E,placeholder:"Enter product name",className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${N.name?"border-red-300":"border-gray-300"}`,autoComplete:"off"}),N.name&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.name}),P&&n.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-red-800",children:"⚠️ This product already exists!"}),n.jsxs("p",{className:"text-xs text-red-600 mt-1",children:['Product: "',P.name,'"']})]}),n.jsx("button",{type:"button",onClick:()=>{a(),setTimeout(()=>{o&&o(P)},100)},className:"text-red-600 hover:text-red-800 underline text-xs font-medium",children:"Edit Existing"})]})}),j&&w.length>0&&n.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Similar existing products:"}),n.jsx("ul",{className:"space-y-1",children:w.map((d,x)=>n.jsxs("li",{className:"flex items-center justify-between text-sm text-blue-700",children:[n.jsxs("span",{children:["• ",d.name]}),n.jsx("button",{type:"button",onClick:()=>{a(),setTimeout(()=>{o&&o(d)},100)},className:"text-blue-600 hover:text-blue-800 underline text-xs",children:"Edit"})]},x))}),n.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"Choose a unique name to avoid duplicates, or edit an existing product."})]}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Product name must be unique - no duplicates allowed"}),m.name&&n.jsxs("div",{className:"mt-2 p-2 bg-gray-100 border border-gray-300 rounded text-xs",children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Debug Info:"}),n.jsxs("p",{children:['Input: "',m.name,'"']}),n.jsxs("p",{children:['Normalized: "',(O=m.name)==null?void 0:O.trim().toLowerCase().replace(/\s+/g," "),'"']}),n.jsxs("p",{children:["Total Products: ",(s==null?void 0:s.length)||0]}),(s==null?void 0:s.filter(d=>{var x,_;return((x=d.name)==null?void 0:x.trim().toLowerCase().replace(/\s+/g," "))===((_=m.name)==null?void 0:_.trim().toLowerCase().replace(/\s+/g," "))}).length)>0&&n.jsxs("div",{className:"mt-1 p-1 bg-red-100 rounded",children:[n.jsx("p",{className:"text-red-700 font-medium",children:"EXACT MATCHES FOUND:"}),s==null?void 0:s.filter(d=>{var x,_;return((x=d.name)==null?void 0:x.trim().toLowerCase().replace(/\s+/g," "))===((_=m.name)==null?void 0:_.trim().toLowerCase().replace(/\s+/g," "))}).map((d,x)=>n.jsxs("p",{className:"text-red-600",children:['• "',d.name,'" (ID: ',d._id,")"]},x))]}),n.jsxs("p",{children:["Similar Products: ",(s==null?void 0:s.filter(d=>{var x,_;return(_=d.name)==null?void 0:_.toLowerCase().includes((x=m.name)==null?void 0:x.toLowerCase())}).length)||0]})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{id:"category",name:"category",value:m.category||"",onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[n.jsx("option",{value:"",children:"Select a category"}),l==null?void 0:l.map(d=>n.jsx("option",{value:d._id,children:d.name},d._id))]}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optional product category"}),!1]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{id:"description",name:"description",value:m.description||"",onChange:g,onBlur:E,placeholder:"Enter product description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optional description of the product"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{id:"status",name:"status",value:m.status||"active",onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive (Disabled)"}),n.jsx("option",{value:"discontinued",children:"Discontinued"})]}),n.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[m.status==="active"&&"Product is active and available for sale",m.status==="inactive"&&"Product is disabled and hidden from sales",m.status==="discontinued"&&"Product is discontinued and no longer available"]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pricing.cost",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Price"}),n.jsx("input",{id:"pricing.cost",name:"pricing.cost",type:"number",step:"0.01",value:m.pricing.cost||"",onChange:g,onBlur:E,placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Product cost"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pricing.retail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Retail Price"}),n.jsx("input",{id:"pricing.retail",name:"pricing.retail",type:"number",step:"0.01",value:m.pricing.retail||"",onChange:g,onBlur:E,placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Retail selling price"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pricing.wholesale",className:"block text-sm font-medium text-gray-700 mb-1",children:"Wholesale Price"}),n.jsx("input",{id:"pricing.wholesale",name:"pricing.wholesale",type:"number",step:"0.01",value:m.pricing.wholesale||"",onChange:g,onBlur:E,placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Wholesale selling price"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"inventory.currentStock",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Stock"}),n.jsx("input",{id:"inventory.currentStock",name:"inventory.currentStock",type:"number",value:m.inventory.currentStock||"",onChange:g,onBlur:E,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Current inventory quantity"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"inventory.reorderPoint",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reorder Point"}),n.jsx("input",{id:"inventory.reorderPoint",name:"inventory.reorderPoint",type:"number",value:m.inventory.reorderPoint||"",onChange:g,onBlur:E,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Minimum stock level for reordering"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"expiryDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),n.jsx("input",{id:"expiryDate",name:"expiryDate",type:"date",value:m.expiryDate||"",onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optional expiry date for the product. Leave empty if product does not expire."})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"barcode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{id:"barcode",name:"barcode",type:"text",value:m.barcode||"",onChange:g,placeholder:"Enter or scan barcode",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("button",{type:"button",onClick:()=>{window.scanBarcode&&window.scanBarcode(d=>{g({target:{name:"barcode",value:d}})})},className:"px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",title:"Scan barcode",children:n.jsx(Ir,{className:"h-4 w-4 text-gray-600"})})]}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Product barcode for scanning"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU"}),n.jsx("input",{id:"sku",name:"sku",type:"text",value:m.sku||"",onChange:g,placeholder:"Enter SKU",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Stock Keeping Unit"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),n.jsx("input",{id:"brand",name:"brand",type:"text",value:m.brand||"",onChange:g,placeholder:"Enter brand name",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Product brand name"})]})]}),Object.keys(N).some(d=>N[d])&&n.jsx(da,{errors:N,title:"Please fix the following errors before submitting:",onFieldClick:d=>{const x=document.querySelector(`[name="${d}"], #${d}`);x&&(x.focus(),x.scrollIntoView({behavior:"smooth",block:"center"}))}})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[n.jsx(Te,{type:"submit",isLoading:i,disabled:!m.name||i||Object.keys(N).some(d=>N[d]),className:"btn btn-primary btn-md w-full sm:w-auto sm:ml-3 disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Update Product":"Create Product"}),n.jsx("button",{type:"button",onClick:a,disabled:i,className:"btn btn-secondary btn-md w-full sm:w-auto mt-3 sm:mt-0 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}):null},jd=({product:t,isOpen:e,onClose:a,onSave:r})=>{const[i,s]=p.useState([]),[o,l]=p.useState(""),[m,h]=p.useState(30),{data:j,isLoading:u}=useQuery(["investors"],()=>Bn.getInvestors({}).then(c=>c.data),{enabled:e,refetchOnMount:!0,staleTime:0,cacheTime:0}),w=Array.isArray(j==null?void 0:j.data)?j.data:Array.isArray(j)?j:[];re.useEffect(()=>{if(t&&e){const c=(t.investors||[]).map(g=>{var E,X;return{investorId:((E=g.investor)==null?void 0:E._id)||g.investor,investorName:((X=g.investor)==null?void 0:X.name)||"Unknown",sharePercentage:g.sharePercentage||30}});s(c)}},[t,e]);const v=()=>{if(!o){U.error("Please select an investor");return}const c=w.find(g=>g._id===o);if(c){if(i.some(g=>g.investorId===o)){U.error("This investor is already linked to this product");return}s([...i,{investorId:o,investorName:c.name,sharePercentage:m}]),l(""),h(30)}},P=c=>{s(i.filter(g=>g.investorId!==c))},A=(c,g)=>{s(i.map(E=>E.investorId===c?{...E,sharePercentage:parseFloat(g)||0}:E))},N=()=>{if(i.length===0){U.error("Please add at least one investor");return}const c=i.map(g=>({investor:g.investorId,sharePercentage:g.sharePercentage}));r(t._id,c)};return e?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:a}),n.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[n.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Manage Investors - ",t==null?void 0:t.name]}),n.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:n.jsx(ce,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Add Investor"}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsx("div",{className:"col-span-2",children:n.jsxs("select",{value:o,onChange:c=>l(c.target.value),disabled:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[n.jsx("option",{value:"",children:u?"Loading investors...":"Select Investor"}),!u&&w.length===0?n.jsx("option",{value:"",disabled:!0,children:"No investors available. Create one from the Investors page."}):w.map(c=>n.jsx("option",{value:c._id,children:c.name},c._id))]})}),n.jsxs("div",{className:"col-span-1 flex gap-2",children:[n.jsx("input",{type:"number",min:"0",max:"100",value:m,onChange:c=>h(parseFloat(c.target.value)||0),placeholder:"%",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"}),n.jsx("button",{type:"button",onClick:v,className:"btn btn-primary px-4",children:"Add"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Set the profit share percentage for this product. This determines what % of profit goes to investors (split among all linked investors), with the remainder going to the company."})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:["Linked Investors (",i.length,")"]}),i.length===0?n.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No investors linked. Add investors above."}):n.jsx("div",{className:"space-y-2",children:i.map(c=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm font-medium text-gray-900",children:c.investorName})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:"0",max:"100",value:c.sharePercentage,onChange:g=>A(c.investorId,g.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm"}),n.jsx("span",{className:"text-sm text-gray-600",children:"%"})]}),n.jsx("button",{onClick:()=>P(c.investorId),className:"text-red-600 hover:text-red-800",children:n.jsx(ce,{className:"h-4 w-4"})})]})]},c.investorId))})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[n.jsx("button",{type:"button",onClick:N,className:"btn btn-primary btn-md w-full sm:w-auto sm:ml-3",children:"Save Investors"}),n.jsx("button",{type:"button",onClick:a,className:"btn btn-secondary btn-md w-full sm:w-auto mt-3 sm:mt-0",children:"Cancel"})]})]})]})}):null},au=()=>{var Zt,er,tr,rr,nr,ar,ir,sr;const[t,e]=p.useState(""),[a,r]=p.useState({}),[i,s]=p.useState(!1),[o,l]=p.useState(null),[m,h]=p.useState(null),[j,u]=p.useState(!1),[w,v]=p.useState(null),[P,A]=p.useState(!1),[N,c]=p.useState(!1),[g,E]=p.useState(!1),[X,y]=p.useState(!1),[b,O]=p.useState(null),[d,x]=p.useState(!1),[_,D]=p.useState(null);Tn();const{openTab:K}=Rn(),S=()=>{queryClient.invalidateQueries(["categories"]),U.success("Categories refreshed")};yd({"ctrl+n":()=>{s(!0),U.success("Creating new product...")},"ctrl+f":()=>{const f=document.querySelector('input[placeholder*="Search products"]');f&&(f.focus(),f.select())},"ctrl+i":()=>{U.success("Import functionality coming soon!")},escape:()=>{i&&(s(!1),l(null),U.success("Cancelled"))},f1:()=>{U.success("Keyboard Shortcuts: Ctrl+N (New Product), Ctrl+F (Search), Ctrl+I (Import), Esc (Cancel)")}});const C={search:t,limit:999999,...a},{data:k,isLoading:ve,error:I,refetch:se}=Fn(C,{refetchOnMountOrArgChange:!0}),{data:F}=qn(void 0,{refetchOnMountOrArgChange:!0}),ee=re.useMemo(()=>{var f,L,B;return F?Array.isArray(F)?F:(f=F==null?void 0:F.data)!=null&&f.categories?F.data.categories:F!=null&&F.categories?F.categories:(B=(L=F==null?void 0:F.data)==null?void 0:L.data)!=null&&B.categories?F.data.data.categories:[]:[]},[F]),[te,{isLoading:$e}]=Un(),[cn,{isLoading:dn}]=Gn(),[un,{isLoading:fn}]=zn(),[mn,{isLoading:wd}]=Vn(),[hn,{isLoading:Nd}]=Hn(),xn=f=>{l(f),s(!0)},pn=f=>{l(f),s(!0)},{confirmation:Jt,confirmDelete:gn,handleConfirm:vn,handleCancel:yn}=Wn(),bn=f=>{gn(f.name,"Product",async()=>{try{await un(f._id).unwrap(),ne("Product deleted successfully"),se()}catch(L){ae(L,"Product Deletion")}})},_n=f=>{var V;let L=null;if(f.expiryDate&&f.expiryDate.trim()!==""){const T=new Date(f.expiryDate);isNaN(T.getTime())||(L=T.toISOString())}const B={...f,status:f.status||"active",expiryDate:L,pricing:{cost:parseFloat(f.pricing.cost)||0,retail:parseFloat(f.pricing.retail)||0,wholesale:parseFloat(f.pricing.wholesale)||0},inventory:{currentStock:parseInt(f.inventory.currentStock)||0,reorderPoint:parseInt(f.inventory.reorderPoint)||10}};if(!o){const T=(V=f.name)==null?void 0:V.trim().toLowerCase().replace(/\s+/g," ");if(oe==null?void 0:oe.find(R=>{var fe;return((fe=R.name)==null?void 0:fe.trim().toLowerCase().replace(/\s+/g," "))===T})){qe(`A product named "${f.name}" already exists. Please choose a different name.`);return}}o?cn({id:o._id,...B}).unwrap().then(()=>{ne("Product updated successfully"),se()}).catch(T=>{var H,R,G;((H=T==null?void 0:T.data)==null?void 0:H.code)==="DUPLICATE_PRODUCT_NAME"||(G=(R=T==null?void 0:T.data)==null?void 0:R.message)!=null&&G.includes("already exists")?qe("A product with this name already exists. Please choose a different name."):ae(T,"Product Update")}):te(B).unwrap().then(()=>{ne("Product created successfully"),se()}).catch(T=>{var H,R,G;((H=T==null?void 0:T.data)==null?void 0:H.code)==="DUPLICATE_PRODUCT_NAME"||(G=(R=T==null?void 0:T.data)==null?void 0:R.message)!=null&&G.includes("already exists")?qe("A product with this name already exists. Please choose a different name or edit the existing product."):ae(T,"Product Creation")})},jn=()=>{s(!1),l(null)},wn=f=>{r(f)},Nn=()=>{r({}),e("")},En=re.useMemo(()=>{var f,L,B;return k?Array.isArray(k)?k:(f=k==null?void 0:k.data)!=null&&f.products?k.data.products:k!=null&&k.products?k.products:(B=(L=k==null?void 0:k.data)==null?void 0:L.data)!=null&&B.products?k.data.data.products:k!=null&&k.items?k.items:[]:[]},[k]),oe=Xn(En,t,["name","description","brand","category.name"],{threshold:.4,minScore:.3,limit:null}),z=ma(oe,{idField:"_id",enableUndo:!0}),On=async f=>{const L=z.getSelectedItems();if(L.length===0)return;const B=L.map(V=>V._id);await z.executeBulkOperation("update",f);try{await mn({productIds:B,updates:f}).unwrap(),ne(`Successfully updated ${L.length} products`),A(!1),v(null),se()}catch(V){ae(V,"Bulk Update")}},Sn=async()=>{const f=z.getSelectedItems();if(f.length===0||!window.confirm(`Are you sure you want to delete ${f.length} products? This action cannot be undone.`))return;const L=f.map(B=>B._id);try{await hn({productIds:L}).unwrap(),ne(`Successfully deleted ${f.length} products`),z.deselectAll(),se()}catch(B){ae(B,"Bulk Delete")}},kn=()=>{const f=z.getSelectedItems();if(f.length===0)return;const L=["Name","Description","SKU","Stock","Cost","Retail","Wholesale","Category","Status"],B=f.map(G=>{var fe,or,lr,cr,dr;return[G.name||"",G.description||"",G.sku||"",((fe=G.inventory)==null?void 0:fe.currentStock)||0,((or=G.pricing)==null?void 0:or.cost)||0,((lr=G.pricing)==null?void 0:lr.retail)||0,((cr=G.pricing)==null?void 0:cr.wholesale)||0,((dr=G.category)==null?void 0:dr.name)||"",G.status||""]}),V=[L,...B].map(G=>G.map(fe=>`"${fe}"`).join(",")).join(`
`),T=new Blob([V],{type:"text/csv"}),H=window.URL.createObjectURL(T),R=document.createElement("a");R.href=H,R.download=`products_export_${new Date().toISOString().split("T")[0]}.csv`,R.click(),window.URL.revokeObjectURL(H),ne(`Exported ${f.length} products`)};if(ve&&!k)return n.jsx(Mn,{message:"Loading products..."});if(I&&!k){let f="Unable to load products. Please try again.";if((er=(Zt=I==null?void 0:I.response)==null?void 0:Zt.data)!=null&&er.errors){const B=I.response.data.errors.map(V=>{const T=V.param||V.field||"",H=V.msg||V.message||"Invalid value";return T?`${T}: ${H}`:H});f=B.length>0?B.join(", "):I.response.data.message||"Invalid request parameters"}else(rr=(tr=I==null?void 0:I.response)==null?void 0:tr.data)!=null&&rr.details?f=Array.isArray(I.response.data.details)?I.response.data.details.join(", "):I.response.data.details:(ar=(nr=I==null?void 0:I.response)==null?void 0:nr.data)!=null&&ar.message?f=I.response.data.message:I!=null&&I.message&&(f=I.message);return n.jsxs("div",{className:"text-center py-12",children:[n.jsx(We,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to Load Products"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:f}),n.jsxs("button",{onClick:()=>se(),className:"btn btn-primary btn-md",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Products"}),n.jsx("p",{className:"text-gray-600",children:"Manage your product catalog"})]}),n.jsxs("div",{className:"flex-shrink-0 flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{const f=Dn("/categories");f&&K({title:"Add Product Category",path:"/categories?action=add",component:f.component,icon:f.icon,allowMultiple:!0,props:{action:"add"}})},className:"btn btn-outline btn-md w-full sm:w-auto",children:[n.jsx(gt,{className:"h-4 w-4 mr-2"}),"Add Product Category"]}),n.jsxs("button",{onClick:S,className:"btn btn-outline btn-md w-full sm:w-auto",title:"Refresh categories list",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Refresh Categories"]}),n.jsxs("button",{onClick:()=>c(!0),className:"btn btn-outline btn-md w-full sm:w-auto",title:"Scan barcode to search product",children:[n.jsx(Ir,{className:"h-4 w-4 mr-2"}),"Scan Barcode"]}),n.jsxs("button",{onClick:()=>y(!0),className:"btn btn-outline btn-md w-full sm:w-auto",title:"Print barcode labels",children:[n.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Print Labels"]}),n.jsxs("button",{onClick:()=>s(!0),className:"btn btn-primary btn-md w-full sm:w-auto",children:[n.jsx(oa,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search products...",value:t,onChange:f=>e(f.target.value),className:"input pl-10"})]})}),n.jsx(ua,{onImportComplete:()=>queryClient.invalidateQueries("products"),filters:C}),n.jsx(fa,{filters:a,onFiltersChange:wn,onClearFilters:Nn,categories:ee||[]}),n.jsx(ha,{selectedCount:z.selectedCount,isOperationInProgress:z.isOperationInProgress,operationProgress:z.operationProgress,canUndo:z.canUndo,onBulkUpdate:()=>{v("update"),A(!0)},onBulkDelete:Sn,onBulkExport:kn,onBulkStatusChange:()=>{v("status"),A(!0)},onBulkCategoryChange:()=>{v("category"),A(!0)},onBulkPriceUpdate:()=>{v("price"),A(!0)},onBulkStockAdjust:()=>{v("stock"),A(!0)},onUndo:z.undoLastOperation,onClearSelection:z.deselectAll,availableActions:["update","delete","export","status","category","price","stock"]}),n.jsx(xa,{isOpen:P,onClose:()=>{A(!1),v(null)},selectedCount:z.selectedCount,updateType:w,onConfirm:On,categories:ee||[],statusOptions:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"discontinued",label:"Discontinued"}],isLoading:z.isOperationInProgress}),oe.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Re,{className:"mx-auto h-12 w-12 text-gray-400"}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No products found"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t?"Try adjusting your search terms.":"Get started by adding a new product."})]}):n.jsx("div",{className:"card w-full",children:n.jsxs("div",{className:"card-content p-0 w-full",children:[n.jsx("div",{className:"bg-gray-50 px-8 py-6 border-b border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-12 gap-6 items-center",children:[n.jsx("div",{className:"col-span-1",children:n.jsx(hr,{checked:z.isSelectAll,onChange:()=>z.toggleSelectAll(oe)})}),n.jsxs("div",{className:"col-span-4",children:[n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Product Name"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Description"})]}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Stock"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Cost"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Retail"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Wholesale"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Category"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Status"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Actions"})})]})}),n.jsx("div",{className:"divide-y divide-gray-200",children:oe.map(f=>{var L,B,V,T,H;return n.jsx("div",{className:"px-8 py-6 hover:bg-gray-50",children:n.jsxs("div",{className:"grid grid-cols-12 gap-6 items-center",children:[n.jsx("div",{className:"col-span-1",children:n.jsx(hr,{checked:z.isSelected(f._id),onChange:()=>z.toggleSelection(f._id)})}),n.jsx("div",{className:"col-span-4",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(Re,{className:"h-6 w-6 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-base font-medium text-gray-900",children:f.name}),f.expiryDate&&(()=>{const R=bd(f);return(R==null?void 0:R.status)==="expired"?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",title:`Expired ${R.days} day${R.days>1?"s":""} ago`,children:"Expired"}):(R==null?void 0:R.status)==="expiring_soon"?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",title:`Expires in ${R.days} day${R.days>1?"s":""}`,children:"Expires Soon"}):R?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",title:`Expires in ${R.days} day${R.days>1?"s":""}`,children:new Date(f.expiryDate).toLocaleDateString()}):null})()]}),n.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",f._id]}),n.jsx("p",{className:"text-sm text-gray-500",children:f.description||"No description"}),f.expiryDate&&n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Expiry: ",new Date(f.expiryDate).toLocaleDateString()]})]})]})}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("p",{className:`text-sm font-medium ${Pr(f)?"text-danger-600":"text-gray-600"}`,children:((L=f.inventory)==null?void 0:L.currentStock)||0}),Pr(f)&&n.jsx("p",{className:"text-xs text-danger-600",children:"Low Stock"})]}),n.jsx("div",{className:"col-span-1",children:n.jsx("p",{className:"text-sm text-gray-600",children:Math.round(((B=f.pricing)==null?void 0:B.cost)||0)})}),n.jsx("div",{className:"col-span-1",children:n.jsx("p",{className:"text-sm text-gray-600",children:Math.round(((V=f.pricing)==null?void 0:V.retail)||0)})}),n.jsx("div",{className:"col-span-1",children:n.jsx("p",{className:"text-sm text-gray-600",children:Math.round(((T=f.pricing)==null?void 0:T.wholesale)||0)})}),n.jsx("div",{className:"col-span-1",children:n.jsx("p",{className:"text-sm text-gray-600",children:((H=f.category)==null?void 0:H.name)||"-"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("span",{className:`badge ${f.status==="active"?"badge-success":"badge-gray"}`,children:f.status})}),n.jsxs("div",{className:"col-span-1",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("button",{onClick:()=>{l(f),E(!0)},className:"text-green-600 hover:text-green-800",title:"Generate Barcode",children:n.jsx(Tr,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>{h(f),u(!0)},className:"text-blue-600 hover:text-blue-800",title:"Manage Investors",children:n.jsx(Ln,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>xn(f),className:"text-primary-600 hover:text-primary-800",title:"Edit Product",children:n.jsx(Cr,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>bn(f),className:"text-danger-600 hover:text-danger-800",title:"Delete Product",children:n.jsx(Ar,{className:"h-5 w-5"})})]}),f.hasInvestors&&n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mt-2",children:"Has Investors"})]})]})},f._id)})})]})}),n.jsx(_d,{product:o,isOpen:i,onClose:jn,onSave:_n,isSubmitting:$e||dn,allProducts:oe||[],onEditExisting:pn,categories:ee||[]}),n.jsx(Kn,{isOpen:Jt.isOpen,onClose:yn,onConfirm:vn,itemName:((sr=(ir=Jt.message)==null?void 0:ir.match(/"([^"]*)"/))==null?void 0:sr[1])||"",itemType:"Product",isLoading:fn}),m&&n.jsx(jd,{product:m,isOpen:j,onClose:()=>{u(!1),h(null)},onSave:async(f,L)=>{try{await productsAPI.linkInvestors(f,L),U.success("Investors linked successfully!"),queryClient.invalidateQueries(["products"]),u(!1),h(null)}catch(B){ae(B,"Link Investors")}}}),n.jsx(aa,{isOpen:N,onClose:()=>c(!1),onScan:f=>{e(f),r({barcode:f}),c(!1),U.success(`Searching for barcode: ${f}`)},scanMode:"both"}),g&&o&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-75 flex items-center justify-center p-4",children:n.jsx("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full",children:n.jsx(gd,{product:o,barcodeValue:o.barcode,onClose:()=>{E(!1),l(null)}})})}),X&&n.jsx(vd,{products:oe||[],onClose:()=>y(!1)}),d&&_&&n.jsx(sa,{entityType:_.type,entityId:_.id,entityName:_.name,onClose:()=>{x(!1),D(null)}})]})};export{au as Products};
