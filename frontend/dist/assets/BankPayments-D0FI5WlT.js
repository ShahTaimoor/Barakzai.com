import{r as i,bE as Pe,ar as Le,bH as $e,o as e,S as M,ae as O,a2 as Ae,U as Te,b2 as De,q as Re,v as Q,R as de,w as V,A as H,z as oe,x as B}from"./index-jd7Ax_Ed.js";import{P as _e}from"./PrintModal-BkQ6aCj8.js";import{b as Fe}from"./suppliersApi-CEk3wVdz.js";import{u as Me}from"./chartOfAccountsApi-DmTn-F78.js";import{u as Oe}from"./banksApi-DQwHDPrA.js";import{D as Ue}from"./download-bwqK3ulf.js";import{P as Ie}from"./plus-C2o0386P.js";import{P as J}from"./phone-Dkvr6QGJ.js";import{S as qe}from"./save-CRYWlTlc.js";import{F as ze}from"./filter-CQLYjJyW.js";import{P as Ke}from"./printer-BkLl9NNZ.js";import{E as Ge}from"./eye-DMmE8Niy.js";import{P as Qe}from"./pen-square-CzKMgeH3.js";import{T as Ve}from"./trash-2-DCbqoVbR.js";import"./useCompanyInfo-kGS5xcZ6.js";const pa=()=>{var le,ce,ie;const[h,me]=i.useState({fromDate:new Date().toISOString().split("T")[0],toDate:new Date().toISOString().split("T")[0],voucherCode:"",amount:"",particular:""}),[W,xe]=i.useState({page:1,limit:50}),[X,ue]=i.useState({key:"date",direction:"desc"}),[pe,Y]=i.useState(!1),[f,Z]=i.useState(null),[l,o]=i.useState({date:new Date().toISOString().split("T")[0],amount:"",particular:"",bank:"",transactionReference:"",supplier:"",customer:"",notes:""}),[n,E]=i.useState(null),[r,P]=i.useState(null),[$,U]=i.useState(null),[g,y]=i.useState(""),[N,v]=i.useState(""),[w,A]=i.useState(""),[m,I]=i.useState("supplier"),[D,C]=i.useState(-1),[R,k]=i.useState(-1),[_,S]=i.useState(-1),{data:c,isLoading:he,error:ee,refetch:q}=Pe({...h,...W,sortConfig:X},{refetchOnMountOrArgChange:!0}),{data:u,isLoading:He,error:Je}=Fe({search:"",limit:100},{refetchOnMountOrArgChange:!0}),{data:p,isLoading:We,error:Xe}=Le({search:"",limit:100},{refetchOnMountOrArgChange:!0}),{data:z,isLoading:ge,error:Ne}=Oe({isActive:!0},{refetchOnMountOrArgChange:!0}),{data:b,isLoading:Ye}=Me({accountType:"expense",isActive:"true"},{refetchOnMountOrArgChange:!0});i.useEffect(()=>{if(n&&u){const a=u.find(t=>t._id===n._id);a&&(a.pendingBalance!==n.pendingBalance||a.advanceBalance!==n.advanceBalance||a.currentBalance!==n.currentBalance)&&E(a)}},[u]),i.useEffect(()=>{if(r&&p){const a=p.find(t=>t._id===r._id);a&&(a.pendingBalance!==r.pendingBalance||a.advanceBalance!==r.advanceBalance||a.currentBalance!==r.currentBalance)&&P(a)}},[p]);const[be,{isLoading:ae}]=$e(),K=()=>{o({date:new Date().toISOString().split("T")[0],amount:"",particular:"",bank:"",transactionReference:"",supplier:"",customer:"",notes:""}),E(null),P(null),U(null),y(""),v(""),A(""),I("supplier"),C(-1),k(-1),S(-1)},se=a=>{const t=u==null?void 0:u.find(s=>s._id===a);E(t),o(s=>({...s,supplier:a,customer:""})),P(null),v("")},te=a=>{const t=p==null?void 0:p.find(s=>s._id===a);P(t),o(s=>({...s,customer:a,supplier:""})),E(null),y("")},je=a=>{y(a),C(-1),a===""&&(E(null),o(t=>({...t,supplier:""})))},fe=a=>{v(a),k(-1),a===""&&(P(null),o(t=>({...t,customer:""})))},ne=a=>{const t=b==null?void 0:b.find(s=>s._id===a);U(t),o(s=>({...s,particular:(t==null?void 0:t.accountName)||""}))},ye=a=>{A(a),S(-1),a===""&&(U(null),o(t=>({...t,particular:""})))},ve=a=>{const t=(b==null?void 0:b.filter(s=>(s.accountName||"").toLowerCase().includes(w.toLowerCase())||(s.accountCode||"").includes(w)))||[];if(!(!w||t.length===0))switch(a.key){case"ArrowDown":a.preventDefault(),S(s=>s<t.length-1?s+1:0);break;case"ArrowUp":a.preventDefault(),S(s=>s>0?s-1:t.length-1);break;case"Enter":if(a.preventDefault(),_>=0&&_<t.length){const s=t[_];ne(s._id),A(s.accountName||""),S(-1)}break;case"Escape":a.preventDefault(),A(""),S(-1);break}},we=a=>{const t=(u==null?void 0:u.filter(s=>(s.companyName||s.name||s.displayName||"").toLowerCase().includes(g.toLowerCase())||(s.phone||"").includes(g)||(s.email||"").toLowerCase().includes(g.toLowerCase())))||[];if(!(!g||t.length===0))switch(a.key){case"ArrowDown":a.preventDefault(),C(s=>s<t.length-1?s+1:0);break;case"ArrowUp":a.preventDefault(),C(s=>s>0?s-1:t.length-1);break;case"Enter":if(a.preventDefault(),D>=0&&D<t.length){const s=t[D];se(s._id),y(s.displayName||s.companyName||s.name||""),C(-1)}break;case"Escape":a.preventDefault(),y(""),C(-1);break}},Ce=a=>{const t=(p==null?void 0:p.filter(s=>(s.displayName||s.businessName||s.name||`${s.firstName||""} ${s.lastName||""}`.trim()||s.email||"").toLowerCase().includes(N.toLowerCase())||(s.phone||"").includes(N)||(s.email||"").toLowerCase().includes(N.toLowerCase())))||[];if(!(!N||t.length===0))switch(a.key){case"ArrowDown":a.preventDefault(),k(s=>s<t.length-1?s+1:0);break;case"ArrowUp":a.preventDefault(),k(s=>s>0?s-1:t.length-1);break;case"Enter":if(a.preventDefault(),R>=0&&R<t.length){const s=t[R],d=s.displayName||s.businessName||s.name||`${s.firstName||""} ${s.lastName||""}`.trim()||s.email||"";te(s._id),v(d),k(-1)}break;case"Escape":a.preventDefault(),v(""),k(-1);break}},T=(a,t)=>{me(s=>({...s,[a]:t})),xe(s=>({...s,page:1}))},G=a=>{ue(t=>({key:a,direction:t.key===a&&t.direction==="asc"?"desc":"asc"}))},ke=()=>{if(!l.amount||l.amount<=0){B("Please enter a valid amount");return}if(!l.bank){B("Please select a bank account");return}if(m==="expense"&&!$){B("Please select an expense account");return}if(m==="supplier"&&!n){B("Please select a supplier");return}if(m==="customer"&&!r){B("Please select a customer");return}const a={date:l.date,amount:parseFloat(l.amount),particular:l.particular||void 0,bank:l.bank,transactionReference:l.transactionReference||void 0,notes:l.notes||void 0};m==="supplier"&&l.supplier?a.supplier=l.supplier:m==="customer"&&l.customer&&(a.customer=l.customer),m==="expense"&&($!=null&&$._id)&&(a.expenseAccount=$._id),be(a).unwrap().then(()=>{K(),oe("Bank payment created successfully"),q()}).catch(t=>{B(V(t))})},Se=async(a="csv")=>{try{const t={...h,...W,sortConfig:X};let s;a==="excel"?s=await exportExcelMutation(t).unwrap():a==="pdf"?s=await exportPDFMutation(t).unwrap():a==="json"?s=await exportJSONMutation(t).unwrap():s=await exportCSVMutation(t).unwrap();const d=(s==null?void 0:s.filename)||(a==="excel"?"bank_payments.xlsx":a==="pdf"?"bank_payments.pdf":a==="json"?"bank_payments.json":"bank_payments.csv"),x=await downloadFileMutation(d).unwrap(),L=x instanceof Blob?x:new Blob([x],{type:a==="excel"?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":a==="pdf"?"application/pdf":a==="json"?"application/json":"text/csv"}),F=URL.createObjectURL(L),j=document.createElement("a");j.href=F,j.download=d,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(F),oe(`Exported bank payments as ${a.toUpperCase()}`)}catch(t){B(V(t,"Bank Payments Export"))}},Be=a=>{const t={invoiceNumber:a.voucherCode,orderNumber:a.voucherCode,createdAt:a.date,invoiceDate:a.date,customer:a.customer||null,customerInfo:a.customer||null,supplier:a.supplier||null,pricing:{subtotal:a.amount||0,total:a.amount||0,discountAmount:0,taxAmount:0},total:a.amount||0,subtotal:a.amount||0,items:[],payment:{method:"Bank Transfer",status:"Paid",amountPaid:a.amount||0},notes:a.notes||a.particular||"",bankAccount:a.bank?`${a.bank.bankName} - ${a.bank.accountNumber}`:"",transactionReference:a.transactionReference||""};Z(t),Y(!0)},re=((le=c==null?void 0:c.data)==null?void 0:le.bankPayments)||(c==null?void 0:c.bankPayments)||((ce=c==null?void 0:c.data)==null?void 0:ce.payments)||(c==null?void 0:c.payments)||[],Ee=((ie=c==null?void 0:c.data)==null?void 0:ie.pagination)||(c==null?void 0:c.pagination)||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Bank Payments"}),e.jsx("p",{className:"text-gray-600",children:"Manage and view all bank payment transactions"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:Se,className:"btn btn-secondary flex items-center space-x-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{onClick:K,className:"btn btn-primary btn-md",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"New Payment"]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Payment Details"})}),e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Type"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"supplier",checked:m==="supplier",onChange:a=>{I(a.target.value),P(null),v(""),o(t=>({...t,customer:""}))},className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Supplier"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"customer",checked:m==="customer",onChange:a=>{I(a.target.value),E(null),y(""),o(t=>({...t,supplier:""}))},className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Customer"})]})]})]}),m==="supplier"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:g,onChange:a=>je(a.target.value),onKeyDown:we,className:"input w-full pr-10",placeholder:"Search or select supplier..."}),e.jsx(M,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]}),g&&e.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg",children:u==null?void 0:u.filter(a=>(a.companyName||a.name||a.displayName||"").toLowerCase().includes(g.toLowerCase())||(a.phone||"").includes(g)||(a.email||"").toLowerCase().includes(g.toLowerCase())).map((a,t)=>e.jsxs("div",{onClick:()=>{se(a._id),y(a.displayName||a.companyName||a.name||""),C(-1)},className:`px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 ${D===t?"bg-blue-50":""}`,children:[e.jsx("div",{className:"font-medium text-gray-900",children:a.displayName||a.companyName||a.name||"Unknown"}),e.jsx("div",{className:"text-sm text-gray-600 capitalize mt-0.5",children:a.businessType&&a.reliability?`${a.businessType} • ${a.reliability}`:a.businessType||a.reliability||""}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"text-gray-500",children:"Outstanding Balance:"})," ",e.jsxs("span",{className:`font-medium ${(a.pendingBalance||0)>0?"text-red-600":"text-green-600"}`,children:["$",Math.round(a.pendingBalance||0)]})]}),a.phone&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx(J,{className:"h-3 w-3"}),e.jsx("span",{children:a.phone})]}),a.email&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx(O,{className:"h-3 w-3"}),e.jsx("span",{children:a.email})]})]})]},a._id))}),n&&e.jsx("div",{className:"mt-3 bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ae,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:n.displayName||n.companyName||n.name||"Unknown Supplier"}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:n.businessType&&n.reliability?`${n.businessType} • ${n.reliability}`:n.businessType||n.reliability||"Supplier Information"}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Outstanding Balance:"}),e.jsxs("span",{className:`text-sm font-medium ${(n.pendingBalance||0)>0?"text-red-600":"text-green-600"}`,children:["$",Math.round(n.pendingBalance||0)]})]}),n.phone&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(J,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:n.phone})]}),n.email&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(O,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:n.email})]})]})]})]})})]}),m==="customer"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:N,onChange:a=>fe(a.target.value),onKeyDown:Ce,className:"input w-full pr-10",placeholder:"Search customers by name, email, or business..."}),e.jsx(M,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]}),N&&e.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg",children:p==null?void 0:p.filter(a=>(a.displayName||a.businessName||a.name||`${a.firstName||""} ${a.lastName||""}`.trim()||a.email||"").toLowerCase().includes(N.toLowerCase())||(a.phone||"").includes(N)||(a.email||"").toLowerCase().includes(N.toLowerCase())).map((a,t)=>{const s=a.pendingBalance||0,d=a.advanceBalance||0,x=s-d,L=x<0,F=s>0||d>0,j=a.displayName||a.businessName||a.name||`${a.firstName||""} ${a.lastName||""}`.trim()||a.email||"Unknown";return e.jsxs("div",{onClick:()=>{te(a._id),v(j),k(-1)},className:`px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 ${R===t?"bg-blue-50":""}`,children:[e.jsx("div",{className:"font-medium text-gray-900",children:j}),e.jsx("div",{className:"text-sm text-gray-600 capitalize mt-0.5",children:a.businessType||""}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[F&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"text-gray-500",children:L?"Payables:":"Receivables:"})," ",e.jsxs("span",{className:`font-medium ${L?"text-red-600":"text-green-600"}`,children:["$",Math.abs(x).toFixed(2)]})]}),a.phone&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx(J,{className:"h-3 w-3"}),e.jsx("span",{children:a.phone})]}),a.email&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx(O,{className:"h-3 w-3"}),e.jsx("span",{children:a.email})]})]})]},a._id)})}),r&&e.jsx("div",{className:"mt-3 bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Te,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:r.displayName||r.businessName||r.name||`${r.firstName||""} ${r.lastName||""}`.trim()||r.email||"Unknown Customer"}),e.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[r.businessType?`${r.businessType} • `:"",r.phone||"No phone"]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[(()=>{const a=r.pendingBalance||0,t=r.advanceBalance||0,s=a-t,d=s<0,x=s>0;return a>0||t>0?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:d?"Payables:":"Receivables:"}),e.jsxs("span",{className:`text-sm font-medium ${d?"text-red-600":x?"text-green-600":"text-gray-600"}`,children:["$",Math.abs(s).toFixed(2)]})]}):null})(),r.email&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(O,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:r.email})]})]})]})]})})]}),m==="expense"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expense Description *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:w,onChange:a=>ye(a.target.value),onKeyDown:ve,className:"input w-full pr-10",placeholder:"Search expense account (e.g., Rent Expense, Utilities Expense, etc.)",required:!0}),e.jsx(M,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]}),w&&e.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg",children:b==null?void 0:b.filter(a=>(a.accountName||"").toLowerCase().includes(w.toLowerCase())||(a.accountCode||"").includes(w)).map((a,t)=>e.jsxs("div",{onClick:()=>{ne(a._id),A(a.accountName||""),S(-1)},className:`px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 ${_===t?"bg-blue-50":""}`,children:[e.jsx("div",{className:"font-medium text-gray-900",children:a.accountName||"Unknown"}),a.accountCode&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Code: ",a.accountCode]})]},a._id))})]}),(n||r)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Balance"}),e.jsxs("div",{className:"space-y-1",children:[m==="supplier"&&n&&e.jsxs(e.Fragment,{children:[n.pendingBalance>0&&e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-red-50 border border-red-200 rounded",children:[e.jsx("span",{className:"text-sm font-medium text-red-700",children:"Payables:"}),e.jsx("span",{className:"text-sm font-bold text-red-700",children:n.pendingBalance.toFixed(2)})]}),n.advanceBalance>0&&e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-green-50 border border-green-200 rounded",children:[e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Advance:"}),e.jsx("span",{className:"text-sm font-bold text-green-700",children:n.advanceBalance.toFixed(2)})]}),n.pendingBalance===0&&n.advanceBalance===0&&e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded text-sm text-gray-600 text-center",children:"No balance"}),n.pendingBalance>0&&n.advanceBalance>0&&e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-blue-50 border-2 border-blue-300 rounded",children:[e.jsx("span",{className:"text-sm font-bold text-blue-700",children:"Net Balance:"}),e.jsx("span",{className:`text-sm font-bold ${n.pendingBalance-n.advanceBalance>0?"text-red-700":"text-green-700"}`,children:(n.pendingBalance-n.advanceBalance).toFixed(2)})]})]}),m==="customer"&&r&&e.jsx(e.Fragment,{children:(()=>{const a=r.pendingBalance||0,t=r.advanceBalance||0,s=a-t,d=s<0,x=s>0;return a>0||t>0?e.jsxs("div",{className:`flex items-center justify-between px-3 py-2 rounded ${d?"bg-red-50 border border-red-200":x?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[e.jsx("span",{className:`text-sm font-medium ${d?"text-red-700":x?"text-green-700":"text-gray-700"}`,children:d?"Payables:":x?"Receivables:":"Balance:"}),e.jsx("span",{className:`text-sm font-bold ${d?"text-red-700":x?"text-green-700":"text-gray-700"}`,children:Math.abs(s).toFixed(2)})]}):e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded text-sm text-gray-600 text-center",children:"No balance"})})()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:l.amount,onChange:a=>{const t=a.target.value===""?"":parseFloat(a.target.value)||"";o(s=>({...s,amount:t}))},className:"input w-full",placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:l.date,onChange:a=>o(t=>({...t,date:a.target.value})),className:"input w-full pr-10"}),e.jsx(De,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Account *"}),e.jsxs("select",{value:l.bank,onChange:a=>o(t=>({...t,bank:a.target.value})),className:"input w-full",required:!0,children:[e.jsx("option",{value:"",children:"Select bank account..."}),z==null?void 0:z.map(a=>e.jsxs("option",{value:a._id,children:[a.bankName," - ",a.accountNumber," ",a.accountName?`(${a.accountName})`:""]},a._id))]}),ge&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Loading banks..."}),Ne&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:"Error loading banks"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Reference"}),e.jsx("input",{type:"text",value:l.transactionReference,onChange:a=>o(t=>({...t,transactionReference:a.target.value})),className:"input w-full",placeholder:"Enter transaction reference..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("input",{type:"text",value:l.particular,onChange:a=>o(t=>({...t,particular:a.target.value})),className:"input w-full",placeholder:"Enter payment description or notes..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:l.notes,onChange:a=>o(t=>({...t,notes:a.target.value})),className:"input w-full h-20 resize-none",placeholder:"Additional notes..."})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:K,className:"btn btn-secondary flex items-center space-x-2",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{children:"Reset"})]}),e.jsxs("button",{onClick:ke,disabled:ae,className:"btn btn-primary flex items-center space-x-2",children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsx("span",{children:ae?"Saving...":"Save Payment"})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ze,{className:"h-5 w-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters"})]})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",value:h.fromDate,onChange:a=>T("fromDate",a.target.value),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",value:h.toDate,onChange:a=>T("toDate",a.target.value),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Voucher Code"}),e.jsx("input",{type:"text",placeholder:"Contains...",value:h.voucherCode,onChange:a=>T("voucherCode",a.target.value),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),e.jsx("input",{type:"number",placeholder:"Equals...",value:h.amount,onChange:a=>T("amount",a.target.value),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Particular"}),e.jsx("input",{type:"text",placeholder:"Contains...",value:h.particular,onChange:a=>T("particular",a.target.value),className:"input"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:()=>q(),className:"btn btn-primary w-full flex items-center justify-center space-x-2",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{children:"Search"})]})})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Bank Payments From: ",Q(h.fromDate)," To: ",Q(h.toDate)]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[Ee.totalItems||0," records"]}),e.jsx("button",{onClick:()=>q(),className:"p-2 text-gray-400 hover:text-gray-600",title:"Refresh",children:e.jsx(de,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"card-content p-0",children:he?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(de,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading bank payments..."})]}):ee?e.jsx("div",{className:"p-8 text-center text-red-600",children:e.jsxs("p",{children:["Error loading bank payments: ",V(ee).message]})}):re.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:e.jsx("p",{children:"No bank payments found for the selected criteria."})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>G("date"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Date"}),e.jsx(H,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>G("voucherCode"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Voucher Code"}),e.jsx(H,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>G("amount"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Amount"}),e.jsx(H,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Particular"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bank Account"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier/Customer/Expense"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:re.map((a,t)=>e.jsxs("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Q(a.date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:a.voucherCode}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Math.round(a.amount)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",children:a.particular}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.bank?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.bank.bankName}),e.jsx("div",{className:"text-gray-500 text-xs",children:a.bank.accountNumber})]}):a.bankAccount||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.supplier?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.supplier.displayName||a.supplier.companyName||a.supplier.name||"Unknown Supplier"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Supplier"})]}):a.customer?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.customer.displayName||a.customer.businessName||a.customer.name||`${a.customer.firstName||""} ${a.customer.lastName||""}`.trim()||a.customer.email||"Unknown Customer"}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Customer"})]}):a.paymentType==="expense"?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-orange-600",children:"Expense"}),e.jsx("div",{className:"text-gray-500 text-xs",children:a.particular||"N/A"})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Be(a),className:"text-green-600 hover:text-green-900",title:"Print",children:e.jsx(Ke,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-blue-600 hover:text-blue-900",title:"View",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",title:"Edit",children:e.jsx(Qe,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(Ve,{className:"h-4 w-4"})})]})})]},a._id))})]})})})})]}),e.jsx(_e,{isOpen:pe,onClose:()=>{Y(!1),Z(null)},orderData:f,documentTitle:"Bank Payment",partyLabel:f!=null&&f.supplier?"Supplier":f!=null&&f.customer?"Customer":"Payee"}),!1]})};export{pa as default};
