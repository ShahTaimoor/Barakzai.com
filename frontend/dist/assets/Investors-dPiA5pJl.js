import{D as te,r as u,u as ae,p as e,ao as ne,S as le,U as A,ad as $,P as F,T as L,ak as D,Q as j,az as re,X as P,ae as ie,O as T}from"./index-WAoT78o_.js";import{u as ce,a as de,b as oe,c as me,d as xe,e as ue,f as he,g as pe}from"./investorsApi-CLWoaj-y.js";import{D as ge}from"./ConfirmationDialog-BVkssRvv.js";import{a as je}from"./useConfirmation-DDIXYmYw.js";import{P as ye}from"./plus-CNtrfzq0.js";import{P as _}from"./phone-ehtvFRIM.js";import{E as ve}from"./eye-DhWj5Adg.js";import{P as Ne}from"./pen-square-BWW9zxzE.js";import{T as be}from"./trash-2-DLkCb2w3.js";import"./shield-DJvHNBkB.js";import"./check-circle-Bs4hD_Mn.js";import"./info-oCKN89Ja.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=te("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),we=({investor:r,onSave:p,onCancel:a,isSubmitting:d})=>{const{register:n,handleSubmit:t,formState:{errors:l},reset:x}=re({defaultValues:r||{name:"",email:"",phone:"",address:{street:"",city:"",state:"",zipCode:"",country:""},totalInvestment:0,status:"active",notes:""}}),i=o=>{p(o),x()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r?"Edit Investor":"Add New Investor"}),e.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(P,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:t(i),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Investor Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{...n("name",{required:"Investor name is required"}),className:"input pl-10",placeholder:"Enter investor name"})]}),l.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.name.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{...n("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",className:"input pl-10",placeholder:"Enter email address"})]}),l.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{...n("phone"),type:"tel",className:"input pl-10",placeholder:"Enter phone number"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Address Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{...n("address.street"),className:"input pl-10",placeholder:"Enter street address"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),e.jsx("input",{...n("address.city"),className:"input",placeholder:"Enter city"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State/Province"}),e.jsx("input",{...n("address.state"),className:"input",placeholder:"Enter state"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zip Code"}),e.jsx("input",{...n("address.zipCode"),className:"input",placeholder:"Enter zip code"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),e.jsx("input",{...n("address.country"),className:"input",placeholder:"Enter country"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Investment Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Investment ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{...n("totalInvestment",{valueAsNumber:!0,min:{value:0,message:"Investment must be positive"}}),type:"number",step:"0.01",className:"input pl-10",placeholder:"0.00"})]}),l.totalInvestment&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.totalInvestment.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{...n("status"),className:"input",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{...n("notes"),rows:3,className:"input",placeholder:"Enter any additional notes"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:a,className:"btn btn-secondary",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d,children:d?"Saving...":r?"Update Investor":"Add Investor"})]})]})]})})})},Oe=({tabId:r})=>{const[p,a]=u.useState(""),[d,n]=u.useState(""),[t,l]=u.useState(!1),[x,i]=u.useState(null),[o,v]=u.useState(null),[y,b]=u.useState(null),[f,w]=u.useState(null),[I,k]=u.useState(null),{updateTabTitle:S}=ae(),N={search:p||void 0,status:d||void 0},{data:m,isLoading:R,error:M}=ce(N,{keepPreviousData:!0}),E=u.useMemo(()=>{var g;const s=((g=m==null?void 0:m.data)==null?void 0:g.investors)||(m==null?void 0:m.data)||(m==null?void 0:m.investors)||m||[];return Array.isArray(s)?s:[]},[m]),[z,{isLoading:Ce}]=de(),[B,{isLoading:Ae}]=oe(),[U,{isLoading:Fe}]=me(),[q,{isLoading:O}]=xe(),[V,{isLoading:Q}]=ue(),{confirmation:C,confirmDelete:Z,handleConfirm:G,handleCancel:H}=je(),X=s=>{i(s),l(!0)},Y=async s=>{const g=s.name||s.email||"Unknown Investor";Z(g,"Investor",async()=>{var c;try{await U(s._id).unwrap(),j.success("Investor deleted successfully")}catch(h){j.error(((c=h==null?void 0:h.data)==null?void 0:c.message)||(h==null?void 0:h.message)||"Failed to delete investor")}})},J=async s=>{var g;try{x?(await B({id:x._id,...s}).unwrap(),j.success("Investor updated successfully"),l(!1),i(null)):(await z(s).unwrap(),j.success("Investor created successfully"),l(!1),i(null))}catch(c){j.error(((g=c==null?void 0:c.data)==null?void 0:g.message)||(c==null?void 0:c.message)||"Failed to save investor")}},K=s=>{v(s._id.toString())},W=s=>{k(s)},ee=s=>{b(s)},se=s=>{w(s)};return R?e.jsx(ne,{}):M?e.jsxs("div",{className:"p-6 text-red-600",children:["Error loading investors: ",M.message]}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Investors"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage investors and track profit distributions"})]}),e.jsxs("button",{onClick:()=>{i(null),l(!0)},className:"btn btn-primary flex items-center space-x-2",children:[e.jsx(ye,{className:"h-5 w-5"}),e.jsx("span",{children:"Add Investor"})]})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-[2] relative",children:[e.jsx(le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search investors by name, email, or phone...",value:p,onChange:s=>a(s.target.value),className:"input pl-10 w-full"})]}),e.jsxs("select",{value:d,onChange:s=>n(s.target.value),className:"input flex-1 sm:w-auto min-w-[150px]",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]}),E.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg",children:[e.jsx(A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No investors found"})]}):e.jsx("div",{className:"card w-full",children:e.jsxs("div",{className:"card-content p-0 w-full",children:[e.jsx("div",{className:"bg-gray-50 px-8 py-6 border-b border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-12 gap-6 items-center",children:[e.jsxs("div",{className:"col-span-3",children:[e.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Investor Name"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Contact Information"})]}),e.jsx("div",{className:"col-span-1",children:e.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Total Investment"})}),e.jsx("div",{className:"col-span-1",children:e.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Earned Profit"})}),e.jsx("div",{className:"col-span-1",children:e.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Paid Out"})}),e.jsx("div",{className:"col-span-1",children:e.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Current Balance"})}),e.jsx("div",{className:"col-span-1",children:e.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Status"})}),e.jsx("div",{className:"col-span-4",children:e.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Actions"})})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:E.map(s=>e.jsx("div",{className:"px-8 py-6 hover:bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-12 gap-6 items-center",children:[e.jsx("div",{className:"col-span-3",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(A,{className:"h-6 w-6 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mt-1",children:[e.jsx($,{className:"h-3 w-3"}),e.jsx("span",{children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mt-1",children:[e.jsx(_,{className:"h-3 w-3"}),e.jsx("span",{children:s.phone})]})]})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["$",(s.totalInvestment||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs("p",{className:"text-sm font-semibold text-green-600",children:["$",(s.totalEarnedProfit||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["$",(s.totalPaidOut||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),e.jsx("div",{className:"col-span-1",children:e.jsxs("p",{className:"text-sm font-bold text-blue-600",children:["$",(s.currentBalance||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),e.jsx("div",{className:"col-span-1",children:e.jsx("span",{className:`badge ${s.status==="active"?"badge-success":s.status==="inactive"?"badge-gray":"badge-danger"}`,children:s.status})}),e.jsx("div",{className:"col-span-4",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-wrap",children:[e.jsx("button",{onClick:()=>W(s),className:"text-blue-600 hover:text-blue-800",title:"View Linked Products",children:e.jsx(F,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>K(s),className:"text-green-600 hover:text-green-800",title:"View Profit Shares",children:e.jsx(ve,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>se(s),className:"text-green-600 hover:text-green-800",title:"Record Investment (Receive Money)",children:e.jsx(L,{className:"h-5 w-5"})}),s.currentBalance>0&&e.jsx("button",{onClick:()=>ee(s),className:"text-primary-600 hover:text-primary-800",title:"Record Payout (Pay Money)",children:e.jsx(D,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>X(s),className:"text-primary-600 hover:text-primary-800",title:"Edit Investor",children:e.jsx(Ne,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>Y(s),className:"text-danger-600 hover:text-danger-800",title:"Delete Investor",children:e.jsx(be,{className:"h-5 w-5"})})]})})]})},s._id))})]})}),t&&e.jsx(we,{investor:x,onSave:J,onCancel:()=>{l(!1),i(null)},isSubmitting:createMutation.isLoading||updateMutation.isLoading}),o&&e.jsx(Ie,{investorId:o,onClose:()=>v(null)}),y&&e.jsx(ke,{investor:y,onSave:async s=>{var g;try{await q({id:y._id,amount:s}).unwrap(),j.success("Payout recorded successfully"),b(null)}catch(c){j.error(((g=c==null?void 0:c.data)==null?void 0:g.message)||(c==null?void 0:c.message)||"Failed to record payout")}},onCancel:()=>b(null),isSubmitting:O}),f&&e.jsx(Pe,{investor:f,onSave:async(s,g)=>{var c;try{await V({id:f._id,amount:s,notes:g}).unwrap(),j.success("Investment recorded successfully"),w(null)}catch(h){j.error(((c=h==null?void 0:h.data)==null?void 0:c.message)||(h==null?void 0:h.message)||"Failed to record investment")}},onCancel:()=>w(null),isSubmitting:Q}),I&&e.jsx(Se,{investor:I,onClose:()=>k(null)}),e.jsx(ge,{isOpen:C.isOpen,onConfirm:G,onCancel:H,title:C.title,message:C.message})]})},Se=({investor:r,onClose:p})=>{const{data:a,isLoading:d}=pe(r._id,{skip:!r}),n=u.useMemo(()=>{var l;const t=((l=a==null?void 0:a.data)==null?void 0:l.products)||(a==null?void 0:a.data)||(a==null?void 0:a.products)||a||[];return Array.isArray(t)?t:[]},[a]);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Linked Products - ",r.name]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Products this investor is linked to with profit sharing"})]}),e.jsx("button",{onClick:p,className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(P,{className:"h-5 w-5"})})]}),d?e.jsx(T,{}):n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(F,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"No products linked"}),e.jsx("p",{className:"text-sm text-gray-500",children:"This investor is not linked to any products yet. Link them from the Products page."})]}):e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.map(t=>{var l,x,i,o,v,y;return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(F,{className:"h-5 w-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.status==="active"?"bg-green-100 text-green-800":t.status==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:t.status})]}),t.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:t.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Category:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:((l=t.category)==null?void 0:l.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Stock:"}),e.jsx("span",{className:`ml-2 font-medium ${(((x=t.inventory)==null?void 0:x.currentStock)||0)<=(((i=t.inventory)==null?void 0:i.reorderPoint)||0)?"text-red-600":"text-gray-900"}`,children:((o=t.inventory)==null?void 0:o.currentStock)||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Cost:"}),e.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:["$",(((v=t.pricing)==null?void 0:v.cost)||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Retail:"}),e.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:["$",(((y=t.pricing)==null?void 0:y.retail)||0).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"ml-4 text-right",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-2",children:[e.jsx("div",{className:"text-xs text-blue-600 mb-1",children:"Profit Share"}),e.jsxs("div",{className:"text-lg font-bold text-blue-700",children:[t.sharePercentage,"%"]})]}),t.linkedAt&&e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Linked: ",new Date(t.linkedAt).toLocaleDateString()]}),e.jsxs("button",{onClick:()=>{window.open("/products","_blank")},className:"mt-2 text-xs text-blue-600 hover:text-blue-800 flex items-center space-x-1",title:"View Product",children:[e.jsx(fe,{className:"h-3 w-3"}),e.jsx("span",{children:"View Products"})]})]})]})},t._id)})})})]})})})},Ie=({investorId:r,onClose:p})=>{const{data:a,isLoading:d}=he({id:r},{skip:!r}),n=u.useMemo(()=>{var l;const t=((l=a==null?void 0:a.data)==null?void 0:l.profitShares)||(a==null?void 0:a.data)||(a==null?void 0:a.profitShares)||a||[];return Array.isArray(t)?t:[]},[a]);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Profit Shares"}),e.jsx("button",{onClick:p,className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(P,{className:"h-5 w-5"})})]}),d?e.jsx(T,{}):n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(L,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No profit shares found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Order #"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Sale Amount"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Profit"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Share %"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Your Share"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(t=>{var v,y,b,f,w,I,k;const l=((v=t.investor)==null?void 0:v._id)||t.investor||null,x=l&&l.toString()===r.toString(),i=x?t.investorShare||0:((b=(y=t.investors)==null?void 0:y.find(S=>{var m;const N=((m=S.investor)==null?void 0:m._id)||S.investor;return N&&N.toString()===r.toString()}))==null?void 0:b.shareAmount)||0,o=x?t.investorSharePercentage||0:((w=(f=t.investors)==null?void 0:f.find(S=>{var m;const N=((m=S.investor)==null?void 0:m._id)||S.investor;return N&&N.toString()===r.toString()}))==null?void 0:w.sharePercentage)||0;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:new Date(t.orderDate||t.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.orderNumber||((I=t.order)==null?void 0:I.orderNumber)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.productName||((k=t.product)==null?void 0:k.name)||"N/A"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:["$",(t.saleAmount||0).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:["$",(t.totalProfit||0).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-blue-600 text-right",children:[o,"%"]}),e.jsxs("td",{className:"px-4 py-3 text-sm font-semibold text-green-600 text-right",children:["$",(i||0).toFixed(2)]})]},t._id)})})]})})]})})})},ke=({investor:r,onSave:p,onCancel:a,isSubmitting:d})=>{var x;const[n,t]=u.useState(""),l=()=>{const i=parseFloat(n);if(i<=0){j.error("Payout amount must be greater than 0");return}if(i>r.currentBalance){j.error(`Payout amount cannot exceed current balance of $${r.currentBalance.toFixed(2)}`);return}p(i)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Record Payout"}),e.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(P,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:i=>{i.preventDefault(),l()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Investor"}),e.jsx("input",{type:"text",value:r.name,disabled:!0,className:"input bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Balance"}),e.jsx("input",{type:"text",value:`$${((x=r.currentBalance)==null?void 0:x.toFixed(2))||"0.00"}`,disabled:!0,className:"input bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payout Amount ($) *"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",max:r.currentBalance,value:n,onChange:i=>t(i.target.value),className:"input pl-10",placeholder:"0.00",required:!0})]}),parseFloat(n)>r.currentBalance&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Amount exceeds current balance"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:a,className:"btn btn-secondary",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d||parseFloat(n)<=0||parseFloat(n)>r.currentBalance,children:d?"Recording...":"Record Payout"})]})]})]})})})},Pe=({investor:r,onSave:p,onCancel:a,isSubmitting:d})=>{const[n,t]=u.useState(""),[l,x]=u.useState(""),i=()=>{const o=parseFloat(n);if(o<=0){j.error("Investment amount must be greater than 0");return}p(o,l)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Record Investment"}),e.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600",children:e.jsx(P,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:o=>{o.preventDefault(),i()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Investor"}),e.jsx("input",{type:"text",value:r.name,disabled:!0,className:"input bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Total Investment"}),e.jsx("input",{type:"text",value:`$${(r.totalInvestment||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,disabled:!0,className:"input bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Investment Amount ($) *"}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:n,onChange:o=>t(o.target.value),className:"input pl-10",placeholder:"0.00",required:!0})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will be added to the investor's total investment"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:l,onChange:o=>x(o.target.value),className:"input",rows:3,placeholder:"Add any notes about this investment...",maxLength:500})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:a,className:"btn btn-secondary",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d||parseFloat(n)<=0,children:d?"Recording...":"Record Investment"})]})]})]})})})};export{Oe as Investors,Oe as default};
