const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-WAoT78o_.js","assets/index-C2xurfOJ.css"])))=>i.map(i=>d[i]);
import{D as Xe,R as te,p as n,I as Ke,r as p,a2 as ur,L as Ie,X as ue,B as ae,y as ie,ah as Pn,z as He,Q as F,ai as Cn,ag as dr,S as ft,P as Te,aj as pt,ak as An,al as In,am as Tn,H as Rn,u as Mn,an as Dn,ao as Bn,x as fr,ap as Ln,T as Fn}from"./index-WAoT78o_.js";import{u as Un}from"./investorsApi-CLWoaj-y.js";import{c as Gn,d as zn,e as Vn,f as Hn,a as qn,g as Xn,h as Kn,i as Wn,j as Qn,k as Yn,l as Jn}from"./productsApi-PDeXJ7KD.js";import{u as Zn}from"./useFuzzySearch-3T44_vhU.js";import{D as ea}from"./ConfirmationDialog-BVkssRvv.js";import{a as ta}from"./useConfirmation-DDIXYmYw.js";import"./ValidatedInput-CwlIv5KF.js";import{C as gt}from"./chevron-up-DF4Mn3Zl.js";import{C as vt}from"./chevron-down-BWZz_AVk.js";import{D as ra}from"./database-r0dxkTOc.js";import{U as na}from"./upload-WwXfDfAY.js";import{D as _e}from"./download-CqTUNGzV.js";import{F as aa}from"./file-spreadsheet-yD2pgwZk.js";import{H as ia}from"./help-circle-CpMXN55K.js";import{C as sa}from"./check-circle-Bs4hD_Mn.js";import{A as oa}from"./alert-circle-ipmQBT-s.js";import{F as la}from"./filter-BTES_dtq.js";import{P as Cr}from"./pen-square-BWW9zxzE.js";import{T as Ar}from"./trash-2-DLkCb2w3.js";import{S as ca}from"./save-lWD1Nme9.js";import{C as Ir,B as ua}from"./BarcodeScanner-DBxEK0Lz.js";import{C as da}from"./check-C3uKB0YI.js";import{P as qe}from"./printer-CLmMJmx9.js";import{N as fa}from"./NotesPanel-BRdWidwV.js";import{P as ma}from"./plus-CNtrfzq0.js";import"./shield-DJvHNBkB.js";import"./info-oCKN89Ja.js";import"./eye-off-9_qjsF1r.js";import"./eye-DhWj5Adg.js";import"./message-square-B3B6AV4c.js";import"./history-DkQEo-UP.js";import"./lock-v7yhMTQC.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=Xe("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=Xe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=Xe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Xe("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]),pa=({errors:t={},title:e="Please fix the following errors:",showCount:a=!0,collapsible:r=!0,className:i="",onFieldClick:s=null})=>{const[o,l]=te.useState(!0),f=Object.entries(t).filter(([N,d])=>d!=null),m=f.length;return m===0?null:n.jsx("div",{className:`bg-red-50 border border-red-200 rounded-lg p-4 ${i}`,children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(Ke,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5 mr-3"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("h3",{className:"text-sm font-medium text-red-800",children:[e,a&&n.jsxs("span",{className:"ml-2 text-red-600",children:["(",m," ",m===1?"error":"errors",")"]})]}),r&&n.jsx("button",{onClick:()=>l(!o),className:"text-red-600 hover:text-red-800","aria-label":o?"Collapse":"Expand",children:o?n.jsx(gt,{className:"h-4 w-4"}):n.jsx(vt,{className:"h-4 w-4"})})]}),o&&n.jsx("ul",{className:"list-disc list-inside space-y-1",children:f.map(([N,d])=>n.jsxs("li",{className:`text-sm text-red-700 ${s?"cursor-pointer hover:text-red-900 hover:underline":""}`,onClick:()=>s==null?void 0:s(N),children:[n.jsxs("span",{className:"font-medium capitalize",children:[N.replace(/([A-Z])/g," $1").trim(),":"]})," ",d]},N))})]})]})})},ga=({onImportComplete:t,filters:e={}})=>{const[a,r]=p.useState(!1),[i,s]=p.useState(!1),[o,l]=p.useState(!1),[f,m]=p.useState(null),[N,d]=p.useState(null),[E,v]=p.useState(!1),[A,I]=p.useState("csv"),[S]=Gn(),[c]=zn(),[g]=Vn(),[k]=Hn(),X=async j=>{const h=(await dr(async()=>{const{default:y}=await import("./index-WAoT78o_.js").then(J=>J.c6);return{default:y}},__vite__mapDeps([0,1]))).default,O=localStorage.getItem("token");return{data:(await h.get(`/api/products/download/${j}`,{headers:{Authorization:`Bearer ${O}`},responseType:"blob"})).data}},b=async()=>{const j=(await dr(async()=>{const{default:w}=await import("./index-WAoT78o_.js").then(y=>y.c6);return{default:w}},__vite__mapDeps([0,1]))).default,h=localStorage.getItem("token");return{data:(await j.get("/api/products/template",{headers:{Authorization:`Bearer ${h}`},responseType:"blob"})).data}},L=async()=>{try{s(!0);const j=await S(e).unwrap(),h=await X(j.filename),O=(h==null?void 0:h.data)||h,w=new Blob([O],{type:"text/csv;charset=utf-8;"}),y=document.createElement("a"),J=URL.createObjectURL(w);y.setAttribute("href",J),y.setAttribute("download",j.filename),y.style.visibility="hidden",document.body.appendChild(y),y.click(),document.body.removeChild(y),ae(`Exported ${j.recordCount} products to CSV`)}catch(j){ie(j,"CSV Export")}finally{s(!1)}},x=async()=>{try{s(!0);const j=await c(e).unwrap(),h=await X(j.filename),O=(h==null?void 0:h.data)||h,w=new Blob([O],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),y=document.createElement("a"),J=URL.createObjectURL(w);y.setAttribute("href",J),y.setAttribute("download",j.filename),y.style.visibility="hidden",document.body.appendChild(y),y.click(),document.body.removeChild(y),ae(`Exported ${j.recordCount} products to Excel`)}catch(j){ie(j,"Excel Export")}finally{s(!1)}},_=j=>{const h=j.target.files[0];if(h){const w=Pn(h,{allowedTypes:["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],maxSizeInMB:10,required:!0});if(w){He(w),j.target.value="";return}m(h),I(h.type.includes("csv")?"csv":"excel")}},M=async()=>{var j,h,O;if(!f){F.error("Please select a file to import");return}try{l(!0);const w=A==="csv"?await k(f).unwrap():await g(f).unwrap();d(w.results||((j=w.data)==null?void 0:j.results));const y=w.results||((h=w.data)==null?void 0:h.results);(y==null?void 0:y.success)>0&&(ae(`Successfully imported ${y.success} products`),t&&t()),((O=y==null?void 0:y.errors)==null?void 0:O.length)>0&&Cn(`${y.errors.length} products failed to import`)}catch(w){ie(w,"Product Import")}finally{l(!1)}},$=async()=>{try{const j=await b(),h=(j==null?void 0:j.data)||j,O=new Blob([h],{type:"text/csv;charset=utf-8;"}),w=document.createElement("a"),y=URL.createObjectURL(O);w.setAttribute("href",y),w.setAttribute("download","product_template.csv"),w.style.visibility="hidden",document.body.appendChild(w),w.click(),document.body.removeChild(w),ae("Template downloaded successfully")}catch(j){ie(j,"Template Download")}},q=()=>{m(null),d(null),v(!1)};return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:()=>r(!a),children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(ra,{className:"h-5 w-5 text-gray-600"}),n.jsx("span",{className:"font-medium text-gray-900",children:"Import / Export Products"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{onClick:j=>{j.stopPropagation(),v(!0)},className:"btn btn-primary btn-sm",children:[n.jsx(na,{className:"h-4 w-4 mr-2"}),"Import Products"]}),a?n.jsx(gt,{className:"h-4 w-4 text-gray-400"}):n.jsx(vt,{className:"h-4 w-4 text-gray-400"})]})]}),a&&n.jsxs("div",{className:"border-t border-gray-200 p-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(ur,{className:"h-5 w-5 text-blue-600 mr-2"}),n.jsx("h4",{className:"font-medium text-gray-900",children:"Export to CSV"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Export all products to a CSV file for backup or analysis."}),n.jsxs(Ie,{onClick:L,isLoading:i,className:"btn btn-secondary btn-sm w-full",children:[n.jsx(_e,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(aa,{className:"h-5 w-5 text-green-600 mr-2"}),n.jsx("h4",{className:"font-medium text-gray-900",children:"Export to Excel"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Export all products to an Excel file with formatting."}),n.jsxs(Ie,{onClick:x,isLoading:i,className:"btn btn-secondary btn-sm w-full",children:[n.jsx(_e,{className:"h-4 w-4 mr-2"}),"Export Excel"]})]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(ia,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Import Guidelines"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:"• Download the template to see the required format"}),n.jsx("li",{children:"• Required fields: Product Name, Category"}),n.jsx("li",{children:"• Supported formats: CSV, Excel (.xlsx)"}),n.jsx("li",{children:"• Maximum file size: 10MB"}),n.jsx("li",{children:"• Products with duplicate names will be skipped"})]}),n.jsxs("button",{onClick:$,className:"btn btn-primary btn-xs mt-3",children:[n.jsx(_e,{className:"h-3 w-3 mr-1"}),"Download Template"]})]})]})}),E&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Import Products"}),n.jsx("button",{onClick:q,className:"text-gray-400 hover:text-gray-600",children:n.jsx(ue,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"p-6",children:N?n.jsxs("div",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Import Results"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[n.jsx(sa,{className:"h-6 w-6 text-green-600 mx-auto mb-1"}),n.jsx("div",{className:"text-lg font-semibold text-green-600",children:N.success}),n.jsx("div",{className:"text-sm text-green-700",children:"Success"})]}),n.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[n.jsx(oa,{className:"h-6 w-6 text-red-600 mx-auto mb-1"}),n.jsx("div",{className:"text-lg font-semibold text-red-600",children:N.errors.length}),n.jsx("div",{className:"text-sm text-red-700",children:"Errors"})]})]}),N.errors.length>0&&n.jsxs("div",{className:"max-h-40 overflow-y-auto",children:[n.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Errors:"}),n.jsxs("div",{className:"space-y-2",children:[N.errors.slice(0,10).map((j,h)=>n.jsxs("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:["Row ",j.row,": ",j.error]},h)),N.errors.length>10&&n.jsxs("div",{className:"text-sm text-gray-500",children:["... and ",N.errors.length-10," more errors"]})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:q,className:"btn btn-primary btn-sm",children:"Close"})})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File"}),n.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:_,className:"input w-full"})]}),f&&n.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(ur,{className:"h-4 w-4 text-gray-600 mr-2"}),n.jsx("span",{className:"text-sm text-gray-700",children:f.name}),n.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[(f.size/1024/1024).toFixed(2)," MB"]})]})}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{onClick:q,className:"btn btn-secondary btn-sm",children:"Cancel"}),n.jsx(Ie,{onClick:M,isLoading:o,disabled:!f,className:"btn btn-primary btn-sm",children:"Import Products"})]})]})})]})})]})]})},va=({filters:t,onFiltersChange:e,categories:a=[],onClearFilters:r})=>{const[i,s]=p.useState(!1),o=(d,E)=>{e({...t,[d]:E})},l=d=>{const E={...t};delete E[d],e(E)},f=()=>{e({}),r&&r()},m=Object.keys(t).some(d=>t[d]!==""&&t[d]!==null&&t[d]!==void 0),N=()=>Object.keys(t).filter(d=>t[d]!==""&&t[d]!==null&&t[d]!==void 0).length;return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:()=>s(!i),children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(la,{className:"h-5 w-5 text-gray-600"}),n.jsx("span",{className:"font-medium text-gray-900",children:"Filters"}),m&&n.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full",children:[N()," active"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[m&&n.jsx("button",{onClick:d=>{d.stopPropagation(),f()},className:"text-sm text-red-600 hover:text-red-800 font-medium",children:"Clear All"}),i?n.jsx(gt,{className:"h-4 w-4 text-gray-400"}):n.jsx(vt,{className:"h-4 w-4 text-gray-400"})]})]}),i&&n.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(ft,{className:"h-4 w-4 inline mr-1"}),"Search Products"]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Product name or description...",value:t.search||"",onChange:d=>o("search",d.target.value),className:"input pl-8"}),n.jsx(ft,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.search&&n.jsx("button",{onClick:()=>l("search"),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n.jsx(ue,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Te,{className:"h-4 w-4 inline mr-1"}),"Status"]}),n.jsxs("select",{value:t.status||"",onChange:d=>o("status",d.target.value),className:"input",children:[n.jsx("option",{value:"",children:"All Statuses"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive"}),n.jsx("option",{value:"discontinued",children:"Discontinued"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(pt,{className:"h-4 w-4 inline mr-1"}),"Category"]}),n.jsxs("select",{value:t.category||"",onChange:d=>o("category",d.target.value),className:"input",children:[n.jsx("option",{value:"",children:"All Categories"}),a.map(d=>n.jsx("option",{value:d._id,children:d.name},d._id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Ke,{className:"h-4 w-4 inline mr-1"}),"Stock Status"]}),n.jsxs("select",{value:t.stockStatus||"",onChange:d=>o("stockStatus",d.target.value),className:"input",children:[n.jsx("option",{value:"",children:"All Stock Levels"}),n.jsx("option",{value:"lowStock",children:"Low Stock"}),n.jsx("option",{value:"outOfStock",children:"Out of Stock"}),n.jsx("option",{value:"inStock",children:"In Stock"})]})]})]}),m&&n.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Active Filters:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(t).map(([d,E])=>{if(!E||E==="")return null;let v=E,A=d;switch(d){case"status":A="Status",v=E.charAt(0).toUpperCase()+E.slice(1);break;case"category":A="Category";const I=a.find(S=>S._id===E);v=I?I.name:E;break;case"stockStatus":A="Stock",v=E==="lowStock"?"Low Stock":E==="outOfStock"?"Out of Stock":E==="inStock"?"In Stock":E;break;case"search":A="Search",v=`"${E}"`;break;default:A=d.charAt(0).toUpperCase()+d.slice(1)}return n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[A,": ",v,n.jsx("button",{onClick:()=>l(d),className:"ml-1 hover:text-blue-600",children:n.jsx(ue,{className:"h-3 w-3"})})]},d)})})]})]})]})},ya=(t=[],e={})=>{const{idField:a="_id",onBulkOperation:r=null,enableUndo:i=!0,maxUndoHistory:s=10}=e,[o,l]=p.useState(new Set),[f,m]=p.useState(!1),[N,d]=p.useState(!1),[E,v]=p.useState({current:0,total:0,message:""}),[A,I]=p.useState([]),[S,c]=p.useState(null),g=p.useRef([]),k=p.useCallback(h=>{l(O=>{const w=new Set(O);return w.has(h)?w.delete(h):w.add(h),m(w.size===t.length&&t.length>0),w})},[t]),X=p.useCallback((h=null)=>{const O=h||t,w=new Set(O.map(y=>y[a]));l(w),m(!0)},[t,a]),b=p.useCallback(()=>{l(new Set),m(!1)},[]),L=p.useCallback((h=null)=>{f?b():X(h||t)},[f,t,X,b]),x=p.useCallback(()=>t.filter(h=>o.has(h[a])),[t,o,a]),_=p.useCallback(h=>o.has(h),[o]),M=o.size,$=p.useCallback(async(h,O={})=>{const w=x();if(w.length===0)return{success:!1,message:"No items selected"};d(!0),v({current:0,total:w.length,message:"Starting operation..."});const y=w.map(T=>({...T})),J={id:Date.now().toString(),type:h,timestamp:new Date().toISOString(),items:y,data:O};try{let T=0,oe=0;const U=[];for(let re=0;re<w.length;re++){const ne=w[re];v({current:re+1,total:w.length,message:`Processing ${ne.name||ne.orderNumber||ne.businessName||"item"}...`});try{r&&await r(ne,h,O),T++}catch(ke){oe++,U.push({item:ne,error:ke.message||"Unknown error"})}await new Promise(ke=>setTimeout(ke,50))}return i&&(I(re=>{const ne=[J,...re].slice(0,s);return g.current=ne,ne}),c(J)),T>0&&b(),d(!1),v({current:0,total:0,message:""}),{success:!0,successCount:T,failureCount:oe,errors:U,operationRecord:J}}catch(T){return d(!1),v({current:0,total:0,message:""}),{success:!1,message:T.message||"Operation failed",operationRecord:J}}},[x,r,i,s,b]),q=p.useCallback(async()=>{if(A.length===0||!S)return{success:!1,message:"No operation to undo"};d(!0),v({current:0,total:S.items.length,message:"Undoing operation..."});try{for(let h=0;h<S.items.length;h++){const O=S.items[h];v({current:h+1,total:S.items.length,message:`Reverting ${O.name||O.orderNumber||O.businessName||"item"}...`}),r&&await r(O,`undo_${S.type}`,S.data),await new Promise(w=>setTimeout(w,50))}return I(h=>h.filter(O=>O.id!==S.id)),c(A[1]||null),d(!1),v({current:0,total:0,message:""}),{success:!0,message:"Operation undone successfully"}}catch(h){return d(!1),v({current:0,total:0,message:""}),{success:!1,message:h.message||"Undo failed"}}},[A,S,r]),j=p.useCallback(()=>{I([]),c(null),g.current=[]},[]);return{selectedIds:Array.from(o),selectedCount:M,isSelectAll:f,isSelected:_,getSelectedItems:x,toggleSelection:k,selectAll:X,deselectAll:b,toggleSelectAll:L,isOperationInProgress:N,operationProgress:E,canUndo:i&&S!==null,undoHistory:A,executeBulkOperation:$,undoLastOperation:q,clearUndoHistory:j}},ba=({selectedCount:t,isOperationInProgress:e,operationProgress:a,canUndo:r,onBulkUpdate:i,onBulkDelete:s,onBulkExport:o,onBulkStatusChange:l,onBulkCategoryChange:f,onBulkPriceUpdate:m,onBulkStockAdjust:N,onUndo:d,onClearSelection:E,availableActions:v=["update","delete","export","status","category","price","stock"],className:A=""})=>t===0&&!e?null:n.jsxs("div",{className:`bg-primary-50 border border-primary-200 rounded-lg p-4 ${A}`,children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(mr,{className:"h-5 w-5 text-primary-600"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[t," ",t===1?"item":"items"," selected"]})]}),e&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-primary-600 border-t-transparent"}),n.jsxs("span",{className:"text-sm text-gray-600",children:[a.message||"Processing..."," (",a.current,"/",a.total,")"]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 flex-wrap",children:[r&&n.jsxs("button",{onClick:d,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",title:"Undo last operation",children:[n.jsx(xa,{className:"h-4 w-4 mr-1"}),"Undo"]}),v.includes("update")&&i&&n.jsxs("button",{onClick:i,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Cr,{className:"h-4 w-4 mr-1"}),"Update"]}),v.includes("status")&&l&&n.jsxs("button",{onClick:l,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(mr,{className:"h-4 w-4 mr-1"}),"Change Status"]}),v.includes("category")&&f&&n.jsxs("button",{onClick:f,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(pt,{className:"h-4 w-4 mr-1"}),"Change Category"]}),v.includes("price")&&m&&n.jsxs("button",{onClick:m,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(An,{className:"h-4 w-4 mr-1"}),"Update Prices"]}),v.includes("stock")&&N&&n.jsxs("button",{onClick:N,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Te,{className:"h-4 w-4 mr-1"}),"Adjust Stock"]}),v.includes("export")&&o&&n.jsxs("button",{onClick:o,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(_e,{className:"h-4 w-4 mr-1"}),"Export"]}),v.includes("delete")&&s&&n.jsxs("button",{onClick:s,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-red-700 bg-white border border-red-300 rounded-md hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(Ar,{className:"h-4 w-4 mr-1"}),"Delete"]}),n.jsxs("button",{onClick:E,disabled:e,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(ue,{className:"h-4 w-4 mr-1"}),"Clear"]})]})]}),e&&a.total>0&&n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${a.current/a.total*100}%`}})})})]}),_a=({isOpen:t,onClose:e,selectedCount:a,updateType:r,onConfirm:i,categories:s=[],statusOptions:o=[],tierOptions:l=[],isLoading:f=!1})=>{const[m,N]=p.useState({}),[d,E]=p.useState({});if(!t)return null;const v=(c,g)=>{N(k=>({...k,[c]:g})),E(k=>({...k,[c]:null}))},A=c=>{c.preventDefault();const g={};if(r==="price"&&!m.priceType&&(g.priceType="Please select a price type"),r==="price"&&m.priceValue===void 0&&(g.priceValue="Please enter a price value"),r==="category"&&!m.category&&(g.category="Please select a category"),r==="status"&&!m.status&&(g.status="Please select a status"),r==="stock"&&m.stockAdjustment===void 0&&(g.stockAdjustment="Please enter a stock adjustment"),r==="tier"&&!m.tier&&(g.tier="Please select a tier"),Object.keys(g).length>0){E(g);return}i(m)},I=()=>{switch(r){case"price":return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Type"}),n.jsxs("select",{value:m.priceType||"",onChange:c=>v("priceType",c.target.value),className:`w-full px-3 py-2 border rounded-md ${d.priceType?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select price type"}),n.jsx("option",{value:"retail",children:"Retail Price"}),n.jsx("option",{value:"wholesale",children:"Wholesale Price"}),n.jsx("option",{value:"cost",children:"Cost Price"})]}),d.priceType&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.priceType})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Update Method"}),n.jsxs("select",{value:m.updateMethod||"set",onChange:c=>v("updateMethod",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"set",children:"Set to value"}),n.jsx("option",{value:"increase",children:"Increase by amount"}),n.jsx("option",{value:"decrease",children:"Decrease by amount"}),n.jsx("option",{value:"percentage",children:"Change by percentage"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value"}),n.jsx("input",{type:"number",step:"0.01",value:m.priceValue||"",onChange:c=>v("priceValue",parseFloat(c.target.value)),className:`w-full px-3 py-2 border rounded-md ${d.priceValue?"border-red-300":"border-gray-300"}`,placeholder:"Enter value"}),d.priceValue&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.priceValue})]})]});case"category":return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{value:m.category||"",onChange:c=>v("category",c.target.value),className:`w-full px-3 py-2 border rounded-md ${d.category?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select category"}),s.map(c=>n.jsx("option",{value:c._id||c.id,children:c.name},c._id||c.id))]}),d.category&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.category})]});case"status":return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{value:m.status||"",onChange:c=>v("status",c.target.value),className:`w-full px-3 py-2 border rounded-md ${d.status?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select status"}),o.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))]}),d.status&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.status})]});case"stock":return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adjustment Method"}),n.jsxs("select",{value:m.stockMethod||"set",onChange:c=>v("stockMethod",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"set",children:"Set to value"}),n.jsx("option",{value:"increase",children:"Increase by amount"}),n.jsx("option",{value:"decrease",children:"Decrease by amount"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Adjustment"}),n.jsx("input",{type:"number",value:m.stockAdjustment||"",onChange:c=>v("stockAdjustment",parseInt(c.target.value)),className:`w-full px-3 py-2 border rounded-md ${d.stockAdjustment?"border-red-300":"border-gray-300"}`,placeholder:"Enter amount"}),d.stockAdjustment&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.stockAdjustment})]})]});case"tier":return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Tier"}),n.jsxs("select",{value:m.tier||"",onChange:c=>v("tier",c.target.value),className:`w-full px-3 py-2 border rounded-md ${d.tier?"border-red-300":"border-gray-300"}`,children:[n.jsx("option",{value:"",children:"Select tier"}),l.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))]}),d.tier&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.tier})]});case"tags":return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (comma-separated)"}),n.jsx("input",{type:"text",value:m.tags||"",onChange:c=>v("tags",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"tag1, tag2, tag3"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter tags separated by commas. Existing tags will be replaced."})]});default:return null}},S=()=>({price:"Bulk Update Prices",category:"Bulk Change Category",status:"Bulk Change Status",stock:"Bulk Adjust Stock",tier:"Bulk Change Customer Tier",tags:"Bulk Update Tags"})[r]||"Bulk Update";return n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),n.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:n.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:S()}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(ue,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(Ke,{className:"h-5 w-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-800",children:["This will update ",n.jsx("strong",{children:a})," ",a===1?"item":"items","."]})]})}),n.jsxs("form",{onSubmit:A,children:[I(),n.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:e,disabled:f,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),n.jsxs(Ie,{type:"submit",isLoading:f,className:"px-4 py-2 bg-primary-600 text-white rounded-md text-sm font-medium hover:bg-primary-700",children:[n.jsx(ca,{className:"h-4 w-4 mr-2"}),"Update ",a," ",a===1?"Item":"Items"]})]})]})]})})]})})},hr=({checked:t,onChange:e,disabled:a=!1,className:r="",...i})=>n.jsx("input",{type:"checkbox",checked:t,onChange:s=>e==null?void 0:e(s.target.checked),disabled:a,className:`h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded ${r}`,...i});var yt={},We={},K={};Object.defineProperty(K,"__esModule",{value:!0});function ja(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var wa=function t(e,a){ja(this,t),this.data=e,this.text=a.text||e,this.options=a};K.default=wa;Object.defineProperty(We,"__esModule",{value:!0});We.CODE39=void 0;var Na=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ea=K,Oa=Sa(Ea);function Sa(t){return t&&t.__esModule?t:{default:t}}function ka(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Pa(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ca=function(t){Pa(e,t);function e(a,r){return ka(this,e),a=a.toUpperCase(),r.mod43&&(a+=Ta(Ra(a))),$a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Na(e,[{key:"encode",value:function(){for(var r=st("*"),i=0;i<this.data.length;i++)r+=st(this.data[i])+"0";return r+=st("*"),{data:r,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(Oa.default),Rr=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],Aa=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function st(t){return Ia(Mr(t))}function Ia(t){return Aa[t].toString(2)}function Ta(t){return Rr[t]}function Mr(t){return Rr.indexOf(t)}function Ra(t){for(var e=0,a=0;a<t.length;a++)e+=Mr(t[a]);return e=e%43,e}We.CODE39=Ca;var se={},bt={},Ne={},B={};Object.defineProperty(B,"__esModule",{value:!0});var $e;function ot(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var Dr=B.SET_A=0,Br=B.SET_B=1,Lr=B.SET_C=2;B.SHIFT=98;var Ma=B.START_A=103,Da=B.START_B=104,Ba=B.START_C=105;B.MODULO=103;B.STOP=106;B.FNC1=207;B.SET_BY_CODE=($e={},ot($e,Ma,Dr),ot($e,Da,Br),ot($e,Ba,Lr),$e);B.SWAP={101:Dr,100:Br,99:Lr};B.A_START_CHAR="Ð";B.B_START_CHAR="Ñ";B.C_START_CHAR="Ò";B.A_CHARS="[\0-_È-Ï]";B.B_CHARS="[ -È-Ï]";B.C_CHARS="(Ï*[0-9]{2}Ï*)";B.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(Ne,"__esModule",{value:!0});var La=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Fa=K,Ua=Ga(Fa),Q=B;function Ga(t){return t&&t.__esModule?t:{default:t}}function za(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Va(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ha(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var qa=function(t){Ha(e,t);function e(a,r){za(this,e);var i=Va(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.substring(1),r));return i.bytes=a.split("").map(function(s){return s.charCodeAt(0)}),i}return La(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var r=this.bytes,i=r.shift()-105,s=Q.SET_BY_CODE[i];if(s===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&r.unshift(Q.FNC1);var o=e.next(r,1,s);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(i)+o.result+e.getBar((o.checksum+i)%Q.MODULO)+e.getBar(Q.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var r=this.options.ean128||!1;return typeof r=="string"&&(r=r.toLowerCase()==="true"),r}}],[{key:"getBar",value:function(r){return Q.BARS[r]?Q.BARS[r].toString():""}},{key:"correctIndex",value:function(r,i){if(i===Q.SET_A){var s=r.shift();return s<32?s+64:s-32}else return i===Q.SET_B?r.shift()-32:(r.shift()-48)*10+r.shift()-48}},{key:"next",value:function(r,i,s){if(!r.length)return{result:"",checksum:0};var o=void 0,l=void 0;if(r[0]>=200){l=r.shift()-105;var f=Q.SWAP[l];f!==void 0?o=e.next(r,i+1,f):((s===Q.SET_A||s===Q.SET_B)&&l===Q.SHIFT&&(r[0]=s===Q.SET_A?r[0]>95?r[0]-96:r[0]:r[0]<32?r[0]+96:r[0]),o=e.next(r,i+1,s))}else l=e.correctIndex(r,s),o=e.next(r,i+1,s);var m=e.getBar(l),N=l*i;return{result:m+o.result,checksum:N+o.checksum}}}]),e}(Ua.default);Ne.default=qa;var _t={};Object.defineProperty(_t,"__esModule",{value:!0});var de=B,Fr=function(e){return e.match(new RegExp("^"+de.A_CHARS+"*"))[0].length},Ur=function(e){return e.match(new RegExp("^"+de.B_CHARS+"*"))[0].length},Gr=function(e){return e.match(new RegExp("^"+de.C_CHARS+"*"))[0]};function jt(t,e){var a=e?de.A_CHARS:de.B_CHARS,r=t.match(new RegExp("^("+a+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(r)return r[1]+"Ì"+zr(t.substring(r[1].length));var i=t.match(new RegExp("^"+a+"+"))[0];return i.length===t.length?t:i+String.fromCharCode(e?205:206)+jt(t.substring(i.length),!e)}function zr(t){var e=Gr(t),a=e.length;if(a===t.length)return t;t=t.substring(a);var r=Fr(t)>=Ur(t);return e+String.fromCharCode(r?206:205)+jt(t,r)}_t.default=function(t){var e=void 0,a=Gr(t).length;if(a>=2)e=de.C_START_CHAR+zr(t);else{var r=Fr(t)>Ur(t);e=(r?de.A_START_CHAR:de.B_START_CHAR)+jt(t,r)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(i,s){return"Ë"+s})};Object.defineProperty(bt,"__esModule",{value:!0});var Xa=Ne,Ka=Vr(Xa),Wa=_t,Qa=Vr(Wa);function Vr(t){return t&&t.__esModule?t:{default:t}}function Ya(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ja(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Za=function(t){Ja(e,t);function e(a,r){if(Ya(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(a))var i=lt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,Qa.default)(a),r));else var i=lt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return lt(i)}return e}(Ka.default);bt.default=Za;var wt={};Object.defineProperty(wt,"__esModule",{value:!0});var ei=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),ti=Ne,ri=ni(ti),xr=B;function ni(t){return t&&t.__esModule?t:{default:t}}function ai(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ii(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function si(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var oi=function(t){si(e,t);function e(a,r){return ai(this,e),ii(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,xr.A_START_CHAR+a,r))}return ei(e,[{key:"valid",value:function(){return new RegExp("^"+xr.A_CHARS+"+$").test(this.data)}}]),e}(ri.default);wt.default=oi;var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});var li=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),ci=Ne,ui=di(ci),pr=B;function di(t){return t&&t.__esModule?t:{default:t}}function fi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function hi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var xi=function(t){hi(e,t);function e(a,r){return fi(this,e),mi(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,pr.B_START_CHAR+a,r))}return li(e,[{key:"valid",value:function(){return new RegExp("^"+pr.B_CHARS+"+$").test(this.data)}}]),e}(ui.default);Nt.default=xi;var Et={};Object.defineProperty(Et,"__esModule",{value:!0});var pi=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),gi=Ne,vi=yi(gi),gr=B;function yi(t){return t&&t.__esModule?t:{default:t}}function bi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ji(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var wi=function(t){ji(e,t);function e(a,r){return bi(this,e),_i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,gr.C_START_CHAR+a,r))}return pi(e,[{key:"valid",value:function(){return new RegExp("^"+gr.C_CHARS+"+$").test(this.data)}}]),e}(vi.default);Et.default=wi;Object.defineProperty(se,"__esModule",{value:!0});se.CODE128C=se.CODE128B=se.CODE128A=se.CODE128=void 0;var Ni=bt,Ei=Qe(Ni),Oi=wt,Si=Qe(Oi),ki=Nt,$i=Qe(ki),Pi=Et,Ci=Qe(Pi);function Qe(t){return t&&t.__esModule?t:{default:t}}se.CODE128=Ei.default;se.CODE128A=Si.default;se.CODE128B=$i.default;se.CODE128C=Ci.default;var W={},Ot={},ee={};Object.defineProperty(ee,"__esModule",{value:!0});ee.SIDE_BIN="101";ee.MIDDLE_BIN="01010";ee.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};ee.EAN2_STRUCTURE=["LL","LG","GL","GG"];ee.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];ee.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var Ye={},xe={};Object.defineProperty(xe,"__esModule",{value:!0});var Ai=ee,Ii=function(e,a,r){var i=e.split("").map(function(o,l){return Ai.BINARIES[a[l]]}).map(function(o,l){return o?o[e[l]]:""});if(r){var s=e.length-1;i=i.map(function(o,l){return l<s?o+r:o})}return i.join("")};xe.default=Ii;Object.defineProperty(Ye,"__esModule",{value:!0});var Ti=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),ve=ee,Ri=xe,vr=Hr(Ri),Mi=K,Di=Hr(Mi);function Hr(t){return t&&t.__esModule?t:{default:t}}function Bi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Li(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Fi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ui=function(t){Fi(e,t);function e(a,r){Bi(this,e);var i=Li(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return i.fontSize=!r.flat&&r.fontSize>r.width*10?r.width*10:r.fontSize,i.guardHeight=r.height+i.fontSize/2+r.textMargin,i}return Ti(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(r,i){return this.text.substr(r,i)}},{key:"leftEncode",value:function(r,i){return(0,vr.default)(r,i)}},{key:"rightText",value:function(r,i){return this.text.substr(r,i)}},{key:"rightEncode",value:function(r,i){return(0,vr.default)(r,i)}},{key:"encodeGuarded",value:function(){var r={fontSize:this.fontSize},i={height:this.guardHeight};return[{data:ve.SIDE_BIN,options:i},{data:this.leftEncode(),text:this.leftText(),options:r},{data:ve.MIDDLE_BIN,options:i},{data:this.rightEncode(),text:this.rightText(),options:r},{data:ve.SIDE_BIN,options:i}]}},{key:"encodeFlat",value:function(){var r=[ve.SIDE_BIN,this.leftEncode(),ve.MIDDLE_BIN,this.rightEncode(),ve.SIDE_BIN];return{data:r.join(""),text:this.text}}}]),e}(Di.default);Ye.default=Ui;Object.defineProperty(Ot,"__esModule",{value:!0});var Gi=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Pe=function t(e,a,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,a);if(i===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,a,r)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(r)}},zi=ee,Vi=Ye,Hi=qi(Vi);function qi(t){return t&&t.__esModule?t:{default:t}}function Xi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ki(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Wi(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var yr=function(e){var a=e.substr(0,12).split("").map(function(r){return+r}).reduce(function(r,i,s){return s%2?r+i*3:r+i},0);return(10-a%10)%10},Qi=function(t){Wi(e,t);function e(a,r){Xi(this,e),a.search(/^[0-9]{12}$/)!==-1&&(a+=yr(a));var i=Ki(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return i.lastChar=r.lastChar,i}return Gi(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===yr(this.data)}},{key:"leftText",value:function(){return Pe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var r=this.data.substr(1,6),i=zi.EAN13_STRUCTURE[this.data[0]];return Pe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,r,i)}},{key:"rightText",value:function(){return Pe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var r=this.data.substr(7,6);return Pe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,r,"RRRRRR")}},{key:"encodeGuarded",value:function(){var r=Pe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(r.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(r.push({data:"00"}),r.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),r}}]),e}(Hi.default);Ot.default=Qi;var St={};Object.defineProperty(St,"__esModule",{value:!0});var Yi=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Fe=function t(e,a,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,a);if(i===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,a,r)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(r)}},Ji=Ye,Zi=es(Ji);function es(t){return t&&t.__esModule?t:{default:t}}function ts(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rs(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ns(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var br=function(e){var a=e.substr(0,7).split("").map(function(r){return+r}).reduce(function(r,i,s){return s%2?r+i:r+i*3},0);return(10-a%10)%10},as=function(t){ns(e,t);function e(a,r){return ts(this,e),a.search(/^[0-9]{7}$/)!==-1&&(a+=br(a)),rs(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Yi(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===br(this.data)}},{key:"leftText",value:function(){return Fe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var r=this.data.substr(0,4);return Fe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,r,"LLLL")}},{key:"rightText",value:function(){return Fe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var r=this.data.substr(4,4);return Fe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,r,"RRRR")}}]),e}(Zi.default);St.default=as;var kt={};Object.defineProperty(kt,"__esModule",{value:!0});var is=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),ss=ee,os=xe,ls=qr(os),cs=K,us=qr(cs);function qr(t){return t&&t.__esModule?t:{default:t}}function ds(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fs(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ms(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var hs=function(e){var a=e.split("").map(function(r){return+r}).reduce(function(r,i,s){return s%2?r+i*9:r+i*3},0);return a%10},xs=function(t){ms(e,t);function e(a,r){return ds(this,e),fs(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return is(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var r=ss.EAN5_STRUCTURE[hs(this.data)];return{data:"1011"+(0,ls.default)(this.data,r,"01"),text:this.text}}}]),e}(us.default);kt.default=xs;var $t={};Object.defineProperty($t,"__esModule",{value:!0});var ps=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),gs=ee,vs=xe,ys=Xr(vs),bs=K,_s=Xr(bs);function Xr(t){return t&&t.__esModule?t:{default:t}}function js(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ws(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ns(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Es=function(t){Ns(e,t);function e(a,r){return js(this,e),ws(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return ps(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var r=gs.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,ys.default)(this.data,r,"01"),text:this.text}}}]),e}(_s.default);$t.default=Es;var Re={};Object.defineProperty(Re,"__esModule",{value:!0});var Os=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}();Re.checksum=mt;var Ss=xe,ye=Kr(Ss),ks=K,$s=Kr(ks);function Kr(t){return t&&t.__esModule?t:{default:t}}function Ps(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cs(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function As(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Is=function(t){As(e,t);function e(a,r){Ps(this,e),a.search(/^[0-9]{11}$/)!==-1&&(a+=mt(a));var i=Cs(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return i.displayValue=r.displayValue,r.fontSize>r.width*10?i.fontSize=r.width*10:i.fontSize=r.fontSize,i.guardHeight=r.height+i.fontSize/2+r.textMargin,i}return Os(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==mt(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var r="";return r+="101",r+=(0,ye.default)(this.data.substr(0,6),"LLLLLL"),r+="01010",r+=(0,ye.default)(this.data.substr(6,6),"RRRRRR"),r+="101",{data:r,text:this.text}}},{key:"guardedEncoding",value:function(){var r=[];return this.displayValue&&r.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),r.push({data:"101"+(0,ye.default)(this.data[0],"L"),options:{height:this.guardHeight}}),r.push({data:(0,ye.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),r.push({data:"01010",options:{height:this.guardHeight}}),r.push({data:(0,ye.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),r.push({data:(0,ye.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&r.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),r}}]),e}($s.default);function mt(t){var e=0,a;for(a=1;a<11;a+=2)e+=parseInt(t[a]);for(a=0;a<11;a+=2)e+=parseInt(t[a])*3;return(10-e%10)%10}Re.default=Is;var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});var Ts=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Rs=xe,Ms=Wr(Rs),Ds=K,Bs=Wr(Ds),Ls=Re;function Wr(t){return t&&t.__esModule?t:{default:t}}function Fs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ct(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Us(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Gs=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],zs=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],Vs=function(t){Us(e,t);function e(a,r){Fs(this,e);var i=ct(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));if(i.isValid=!1,a.search(/^[0-9]{6}$/)!==-1)i.middleDigits=a,i.upcA=_r(a,"0"),i.text=r.text||""+i.upcA[0]+a+i.upcA[i.upcA.length-1],i.isValid=!0;else if(a.search(/^[01][0-9]{7}$/)!==-1)if(i.middleDigits=a.substring(1,a.length-1),i.upcA=_r(i.middleDigits,a[0]),i.upcA[i.upcA.length-1]===a[a.length-1])i.isValid=!0;else return ct(i);else return ct(i);return i.displayValue=r.displayValue,r.fontSize>r.width*10?i.fontSize=r.width*10:i.fontSize=r.fontSize,i.guardHeight=r.height+i.fontSize/2+r.textMargin,i}return Ts(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var r="";return r+="101",r+=this.encodeMiddleDigits(),r+="010101",{data:r,text:this.text}}},{key:"guardedEncoding",value:function(){var r=[];return this.displayValue&&r.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),r.push({data:"101",options:{height:this.guardHeight}}),r.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),r.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&r.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),r}},{key:"encodeMiddleDigits",value:function(){var r=this.upcA[0],i=this.upcA[this.upcA.length-1],s=zs[parseInt(i)][parseInt(r)];return(0,Ms.default)(this.middleDigits,s)}}]),e}(Bs.default);function _r(t,e){for(var a=parseInt(t[t.length-1]),r=Gs[a],i="",s=0,o=0;o<r.length;o++){var l=r[o];l==="X"?i+=t[s++]:i+=l}return i=""+e+i,""+i+(0,Ls.checksum)(i)}Pt.default=Vs;Object.defineProperty(W,"__esModule",{value:!0});W.UPCE=W.UPC=W.EAN2=W.EAN5=W.EAN8=W.EAN13=void 0;var Hs=Ot,qs=Ee(Hs),Xs=St,Ks=Ee(Xs),Ws=kt,Qs=Ee(Ws),Ys=$t,Js=Ee(Ys),Zs=Re,eo=Ee(Zs),to=Pt,ro=Ee(to);function Ee(t){return t&&t.__esModule?t:{default:t}}W.EAN13=qs.default;W.EAN8=Ks.default;W.EAN5=Qs.default;W.EAN2=Js.default;W.UPC=eo.default;W.UPCE=ro.default;var je={},Je={},Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.START_BIN="1010";Me.END_BIN="11101";Me.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(Je,"__esModule",{value:!0});var no=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ue=Me,ao=K,io=so(ao);function so(t){return t&&t.__esModule?t:{default:t}}function oo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function co(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var uo=function(t){co(e,t);function e(){return oo(this,e),lo(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return no(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var r=this,i=this.data.match(/.{2}/g).map(function(s){return r.encodePair(s)}).join("");return{data:Ue.START_BIN+i+Ue.END_BIN,text:this.text}}},{key:"encodePair",value:function(r){var i=Ue.BINARIES[r[1]];return Ue.BINARIES[r[0]].split("").map(function(s,o){return(s==="1"?"111":"1")+(i[o]==="1"?"000":"0")}).join("")}}]),e}(io.default);Je.default=uo;var Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});var fo=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),mo=Je,ho=xo(mo);function xo(t){return t&&t.__esModule?t:{default:t}}function po(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function go(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function vo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var jr=function(e){var a=e.substr(0,13).split("").map(function(r){return parseInt(r,10)}).reduce(function(r,i,s){return r+i*(3-s%2*2)},0);return Math.ceil(a/10)*10-a},yo=function(t){vo(e,t);function e(a,r){return po(this,e),a.search(/^[0-9]{13}$/)!==-1&&(a+=jr(a)),go(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return fo(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===jr(this.data)}}]),e}(ho.default);Ct.default=yo;Object.defineProperty(je,"__esModule",{value:!0});je.ITF14=je.ITF=void 0;var bo=Je,_o=Qr(bo),jo=Ct,wo=Qr(jo);function Qr(t){return t&&t.__esModule?t:{default:t}}je.ITF=_o.default;je.ITF14=wo.default;var Z={},pe={};Object.defineProperty(pe,"__esModule",{value:!0});var No=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Eo=K,Oo=So(Eo);function So(t){return t&&t.__esModule?t:{default:t}}function ko(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Po(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Co=function(t){Po(e,t);function e(a,r){return ko(this,e),$o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return No(e,[{key:"encode",value:function(){for(var r="110",i=0;i<this.data.length;i++){var s=parseInt(this.data[i]),o=s.toString(2);o=Ao(o,4-o.length);for(var l=0;l<o.length;l++)r+=o[l]=="0"?"100":"110"}return r+="1001",{data:r,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(Oo.default);function Ao(t,e){for(var a=0;a<e;a++)t="0"+t;return t}pe.default=Co;var At={},ge={};Object.defineProperty(ge,"__esModule",{value:!0});ge.mod10=Io;ge.mod11=To;function Io(t){for(var e=0,a=0;a<t.length;a++){var r=parseInt(t[a]);(a+t.length)%2===0?e+=r:e+=r*2%10+Math.floor(r*2/10)}return(10-e%10)%10}function To(t){for(var e=0,a=[2,3,4,5,6,7],r=0;r<t.length;r++){var i=parseInt(t[t.length-1-r]);e+=a[r%a.length]*i}return(11-e%11)%11}Object.defineProperty(At,"__esModule",{value:!0});var Ro=pe,Mo=Bo(Ro),Do=ge;function Bo(t){return t&&t.__esModule?t:{default:t}}function Lo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Uo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Go=function(t){Uo(e,t);function e(a,r){return Lo(this,e),Fo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a+(0,Do.mod10)(a),r))}return e}(Mo.default);At.default=Go;var It={};Object.defineProperty(It,"__esModule",{value:!0});var zo=pe,Vo=qo(zo),Ho=ge;function qo(t){return t&&t.__esModule?t:{default:t}}function Xo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ko(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Wo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Qo=function(t){Wo(e,t);function e(a,r){return Xo(this,e),Ko(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a+(0,Ho.mod11)(a),r))}return e}(Vo.default);It.default=Qo;var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});var Yo=pe,Jo=Zo(Yo),wr=ge;function Zo(t){return t&&t.__esModule?t:{default:t}}function el(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function rl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var nl=function(t){rl(e,t);function e(a,r){return el(this,e),a+=(0,wr.mod10)(a),a+=(0,wr.mod10)(a),tl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return e}(Jo.default);Tt.default=nl;var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});var al=pe,il=sl(al),Nr=ge;function sl(t){return t&&t.__esModule?t:{default:t}}function ol(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ll(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function cl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ul=function(t){cl(e,t);function e(a,r){return ol(this,e),a+=(0,Nr.mod11)(a),a+=(0,Nr.mod10)(a),ll(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return e}(il.default);Rt.default=ul;Object.defineProperty(Z,"__esModule",{value:!0});Z.MSI1110=Z.MSI1010=Z.MSI11=Z.MSI10=Z.MSI=void 0;var dl=pe,fl=De(dl),ml=At,hl=De(ml),xl=It,pl=De(xl),gl=Tt,vl=De(gl),yl=Rt,bl=De(yl);function De(t){return t&&t.__esModule?t:{default:t}}Z.MSI=fl.default;Z.MSI10=hl.default;Z.MSI11=pl.default;Z.MSI1010=vl.default;Z.MSI1110=bl.default;var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.pharmacode=void 0;var _l=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),jl=K,wl=Nl(jl);function Nl(t){return t&&t.__esModule?t:{default:t}}function El(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ol(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Sl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var kl=function(t){Sl(e,t);function e(a,r){El(this,e);var i=Ol(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r));return i.number=parseInt(a,10),i}return _l(e,[{key:"encode",value:function(){for(var r=this.number,i="";!isNaN(r)&&r!=0;)r%2===0?(i="11100"+i,r=(r-2)/2):(i="100"+i,r=(r-1)/2);return i=i.slice(0,-2),{data:i,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(wl.default);Ze.pharmacode=kl;var et={};Object.defineProperty(et,"__esModule",{value:!0});et.codabar=void 0;var $l=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Pl=K,Cl=Al(Pl);function Al(t){return t&&t.__esModule?t:{default:t}}function Il(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Rl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ml=function(t){Rl(e,t);function e(a,r){Il(this,e),a.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(a="A"+a+"A");var i=Tl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a.toUpperCase(),r));return i.text=i.options.text||i.text.replace(/[A-D]/g,""),i}return $l(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var r=[],i=this.getEncodings(),s=0;s<this.data.length;s++)r.push(i[this.data.charAt(s)]),s!==this.data.length-1&&r.push("0");return{text:this.text,data:r.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(Cl.default);et.codabar=Ml;var we={},tt={},Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)","ÿ"];Be.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"];Be.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]};Object.defineProperty(tt,"__esModule",{value:!0});var Dl=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ge=Be,Bl=K,Ll=Fl(Bl);function Fl(t){return t&&t.__esModule?t:{default:t}}function Ul(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function zl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Vl=function(t){zl(e,t);function e(a,r){return Ul(this,e),Gl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Dl(e,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var r=this.data.split("").flatMap(function(l){return Ge.MULTI_SYMBOLS[l]||l}),i=r.map(function(l){return e.getEncoding(l)}).join(""),s=e.checksum(r,20),o=e.checksum(r.concat(s),15);return{text:this.text,data:e.getEncoding("ÿ")+i+e.getEncoding(s)+e.getEncoding(o)+e.getEncoding("ÿ")+"1"}}}],[{key:"getEncoding",value:function(r){return Ge.BINARIES[e.symbolValue(r)]}},{key:"getSymbol",value:function(r){return Ge.SYMBOLS[r]}},{key:"symbolValue",value:function(r){return Ge.SYMBOLS.indexOf(r)}},{key:"checksum",value:function(r,i){var s=r.slice().reverse().reduce(function(o,l,f){var m=f%i+1;return o+e.symbolValue(l)*m},0);return e.getSymbol(s%47)}}]),e}(Ll.default);tt.default=Vl;var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});var Hl=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),ql=tt,Xl=Kl(ql);function Kl(t){return t&&t.__esModule?t:{default:t}}function Wl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ql(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Yl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Jl=function(t){Yl(e,t);function e(a,r){return Wl(this,e),Ql(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return Hl(e,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),e}(Xl.default);Mt.default=Jl;Object.defineProperty(we,"__esModule",{value:!0});we.CODE93FullASCII=we.CODE93=void 0;var Zl=tt,ec=Yr(Zl),tc=Mt,rc=Yr(tc);function Yr(t){return t&&t.__esModule?t:{default:t}}we.CODE93=ec.default;we.CODE93FullASCII=rc.default;var rt={};Object.defineProperty(rt,"__esModule",{value:!0});rt.GenericBarcode=void 0;var nc=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),ac=K,ic=sc(ac);function sc(t){return t&&t.__esModule?t:{default:t}}function oc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lc(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function cc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var uc=function(t){cc(e,t);function e(a,r){return oc(this,e),lc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r))}return nc(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(ic.default);rt.GenericBarcode=uc;Object.defineProperty(yt,"__esModule",{value:!0});var dc=We,ze=se,be=W,Er=je,Ce=Z,fc=Ze,mc=et,Or=we,hc=rt;yt.default={CODE39:dc.CODE39,CODE128:ze.CODE128,CODE128A:ze.CODE128A,CODE128B:ze.CODE128B,CODE128C:ze.CODE128C,EAN13:be.EAN13,EAN8:be.EAN8,EAN5:be.EAN5,EAN2:be.EAN2,UPC:be.UPC,UPCE:be.UPCE,ITF14:Er.ITF14,ITF:Er.ITF,MSI:Ce.MSI,MSI10:Ce.MSI10,MSI11:Ce.MSI11,MSI1010:Ce.MSI1010,MSI1110:Ce.MSI1110,pharmacode:fc.pharmacode,codabar:mc.codabar,CODE93:Or.CODE93,CODE93FullASCII:Or.CODE93FullASCII,GenericBarcode:hc.GenericBarcode};var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});var xc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t};Oe.default=function(t,e){return xc({},t,e)};var Dt={};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.default=pc;function pc(t){var e=[];function a(r){if(Array.isArray(r))for(var i=0;i<r.length;i++)a(r[i]);else r.text=r.text||"",r.data=r.data||"",e.push(r)}return a(t),e}var Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.default=gc;function gc(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}var Lt={},Ft={},nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.default=vc;function vc(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var a in e)e.hasOwnProperty(a)&&(a=e[a],typeof t[a]=="string"&&(t[a]=parseInt(t[a],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}var at={};Object.defineProperty(at,"__esModule",{value:!0});var yc={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};at.default=yc;Object.defineProperty(Ft,"__esModule",{value:!0});var bc=nt,_c=Jr(bc),jc=at,Sr=Jr(jc);function Jr(t){return t&&t.__esModule?t:{default:t}}function wc(t){var e={};for(var a in Sr.default)Sr.default.hasOwnProperty(a)&&(t.hasAttribute("jsbarcode-"+a.toLowerCase())&&(e[a]=t.getAttribute("jsbarcode-"+a.toLowerCase())),t.hasAttribute("data-"+a.toLowerCase())&&(e[a]=t.getAttribute("data-"+a.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,_c.default)(e),e}Ft.default=wc;var Ut={},Gt={},Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.getTotalWidthOfEncodings=Y.calculateEncodingAttributes=Y.getBarcodePadding=Y.getEncodingHeight=Y.getMaximumHeightOfEncodings=void 0;var Nc=Oe,Ec=Oc(Nc);function Oc(t){return t&&t.__esModule?t:{default:t}}function Zr(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function en(t,e,a){if(a.displayValue&&e<t){if(a.textAlign=="center")return Math.floor((t-e)/2);if(a.textAlign=="left")return 0;if(a.textAlign=="right")return Math.floor(t-e)}return 0}function Sc(t,e,a){for(var r=0;r<t.length;r++){var i=t[r],s=(0,Ec.default)(e,i.options),o;s.displayValue?o=Pc(i.text,s,a):o=0;var l=i.data.length*s.width;i.width=Math.ceil(Math.max(o,l)),i.height=Zr(i,s),i.barcodePadding=en(o,l,s)}}function kc(t){for(var e=0,a=0;a<t.length;a++)e+=t[a].width;return e}function $c(t){for(var e=0,a=0;a<t.length;a++)t[a].height>e&&(e=t[a].height);return e}function Pc(t,e,a){var r;if(a)r=a;else if(typeof document<"u")r=document.createElement("canvas").getContext("2d");else return 0;r.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var i=r.measureText(t);if(!i)return 0;var s=i.width;return s}Y.getMaximumHeightOfEncodings=$c;Y.getEncodingHeight=Zr;Y.getBarcodePadding=en;Y.calculateEncodingAttributes=Sc;Y.getTotalWidthOfEncodings=kc;Object.defineProperty(Gt,"__esModule",{value:!0});var Cc=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Ac=Oe,Ic=Tc(Ac),ut=Y;function Tc(t){return t&&t.__esModule?t:{default:t}}function Rc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Mc=function(){function t(e,a,r){Rc(this,t),this.canvas=e,this.encodings=a,this.options=r}return Cc(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var a=0;a<this.encodings.length;a++){var r=(0,Ic.default)(this.options,this.encodings[a].options);this.drawCanvasBarcode(r,this.encodings[a]),this.drawCanvasText(r,this.encodings[a]),this.moveCanvasDrawing(this.encodings[a])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var a=this.canvas.getContext("2d");a.save(),(0,ut.calculateEncodingAttributes)(this.encodings,this.options,a);var r=(0,ut.getTotalWidthOfEncodings)(this.encodings),i=(0,ut.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=r+this.options.marginLeft+this.options.marginRight,this.canvas.height=i,a.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(a.fillStyle=this.options.background,a.fillRect(0,0,this.canvas.width,this.canvas.height)),a.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(a,r){var i=this.canvas.getContext("2d"),s=r.data,o;a.textPosition=="top"?o=a.marginTop+a.fontSize+a.textMargin:o=a.marginTop,i.fillStyle=a.lineColor;for(var l=0;l<s.length;l++){var f=l*a.width+r.barcodePadding;s[l]==="1"?i.fillRect(f,o,a.width,a.height):s[l]&&i.fillRect(f,o,a.width,a.height*s[l])}}},{key:"drawCanvasText",value:function(a,r){var i=this.canvas.getContext("2d"),s=a.fontOptions+" "+a.fontSize+"px "+a.font;if(a.displayValue){var o,l;a.textPosition=="top"?l=a.marginTop+a.fontSize-a.textMargin:l=a.height+a.textMargin+a.marginTop+a.fontSize,i.font=s,a.textAlign=="left"||r.barcodePadding>0?(o=0,i.textAlign="left"):a.textAlign=="right"?(o=r.width-1,i.textAlign="right"):(o=r.width/2,i.textAlign="center"),i.fillText(r.text,o,l)}}},{key:"moveCanvasDrawing",value:function(a){var r=this.canvas.getContext("2d");r.translate(a.width,0)}},{key:"restoreCanvas",value:function(){var a=this.canvas.getContext("2d");a.restore()}}]),t}();Gt.default=Mc;var zt={};Object.defineProperty(zt,"__esModule",{value:!0});var Dc=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Bc=Oe,Lc=Fc(Bc),dt=Y;function Fc(t){return t&&t.__esModule?t:{default:t}}function Uc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Ve="http://www.w3.org/2000/svg",Gc=function(){function t(e,a,r){Uc(this,t),this.svg=e,this.encodings=a,this.options=r,this.document=r.xmlDocument||document}return Dc(t,[{key:"render",value:function(){var a=this.options.marginLeft;this.prepareSVG();for(var r=0;r<this.encodings.length;r++){var i=this.encodings[r],s=(0,Lc.default)(this.options,i.options),o=this.createGroup(a,s.marginTop,this.svg);this.setGroupOptions(o,s),this.drawSvgBarcode(o,s,i),this.drawSVGText(o,s,i),a+=i.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,dt.calculateEncodingAttributes)(this.encodings,this.options);var a=(0,dt.getTotalWidthOfEncodings)(this.encodings),r=(0,dt.getMaximumHeightOfEncodings)(this.encodings),i=a+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(i,r),this.options.background&&this.drawRect(0,0,i,r,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(a,r,i){var s=i.data,o;r.textPosition=="top"?o=r.fontSize+r.textMargin:o=0;for(var l=0,f=0,m=0;m<s.length;m++)f=m*r.width+i.barcodePadding,s[m]==="1"?l++:l>0&&(this.drawRect(f-r.width*l,o,r.width*l,r.height,a),l=0);l>0&&this.drawRect(f-r.width*(l-1),o,r.width*l,r.height,a)}},{key:"drawSVGText",value:function(a,r,i){var s=this.document.createElementNS(Ve,"text");if(r.displayValue){var o,l;s.setAttribute("style","font:"+r.fontOptions+" "+r.fontSize+"px "+r.font),r.textPosition=="top"?l=r.fontSize-r.textMargin:l=r.height+r.textMargin+r.fontSize,r.textAlign=="left"||i.barcodePadding>0?(o=0,s.setAttribute("text-anchor","start")):r.textAlign=="right"?(o=i.width-1,s.setAttribute("text-anchor","end")):(o=i.width/2,s.setAttribute("text-anchor","middle")),s.setAttribute("x",o),s.setAttribute("y",l),s.appendChild(this.document.createTextNode(i.text)),a.appendChild(s)}}},{key:"setSvgAttributes",value:function(a,r){var i=this.svg;i.setAttribute("width",a+"px"),i.setAttribute("height",r+"px"),i.setAttribute("x","0px"),i.setAttribute("y","0px"),i.setAttribute("viewBox","0 0 "+a+" "+r),i.setAttribute("xmlns",Ve),i.setAttribute("version","1.1"),i.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(a,r,i){var s=this.document.createElementNS(Ve,"g");return s.setAttribute("transform","translate("+a+", "+r+")"),i.appendChild(s),s}},{key:"setGroupOptions",value:function(a,r){a.setAttribute("style","fill:"+r.lineColor+";")}},{key:"drawRect",value:function(a,r,i,s,o){var l=this.document.createElementNS(Ve,"rect");return l.setAttribute("x",a),l.setAttribute("y",r),l.setAttribute("width",i),l.setAttribute("height",s),o.appendChild(l),l}}]),t}();zt.default=Gc;var Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});var zc=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}();function Vc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Hc=function(){function t(e,a,r){Vc(this,t),this.object=e,this.encodings=a,this.options=r}return zc(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();Vt.default=Hc;Object.defineProperty(Ut,"__esModule",{value:!0});var qc=Gt,Xc=Ht(qc),Kc=zt,Wc=Ht(Kc),Qc=Vt,Yc=Ht(Qc);function Ht(t){return t&&t.__esModule?t:{default:t}}Ut.default={CanvasRenderer:Xc.default,SVGRenderer:Wc.default,ObjectRenderer:Yc.default};var Se={};Object.defineProperty(Se,"__esModule",{value:!0});function qt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Kt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Jc=function(t){Kt(e,t);function e(a,r){qt(this,e);var i=Xt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="InvalidInputException",i.symbology=a,i.input=r,i.message='"'+i.input+'" is not a valid input for '+i.symbology,i}return e}(Error),Zc=function(t){Kt(e,t);function e(){qt(this,e);var a=Xt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.name="InvalidElementException",a.message="Not supported type to render on",a}return e}(Error),eu=function(t){Kt(e,t);function e(){qt(this,e);var a=Xt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.name="NoElementException",a.message="No element to render on.",a}return e}(Error);Se.InvalidInputException=Jc;Se.InvalidElementException=Zc;Se.NoElementException=eu;Object.defineProperty(Lt,"__esModule",{value:!0});var tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ru=Ft,ht=tn(ru),nu=Ut,Ae=tn(nu),au=Se;function tn(t){return t&&t.__esModule?t:{default:t}}function Wt(t){if(typeof t=="string")return iu(t);if(Array.isArray(t)){for(var e=[],a=0;a<t.length;a++)e.push(Wt(t[a]));return e}else{if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLImageElement)return su(t);if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&t instanceof SVGElement)return{element:t,options:(0,ht.default)(t),renderer:Ae.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement)return{element:t,options:(0,ht.default)(t),renderer:Ae.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:Ae.default.CanvasRenderer};if(t&&(typeof t>"u"?"undefined":tu(t))==="object"&&!t.nodeName)return{element:t,renderer:Ae.default.ObjectRenderer};throw new au.InvalidElementException}}function iu(t){var e=document.querySelectorAll(t);if(e.length!==0){for(var a=[],r=0;r<e.length;r++)a.push(Wt(e[r]));return a}}function su(t){var e=document.createElement("canvas");return{element:e,options:(0,ht.default)(t),renderer:Ae.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}Lt.default=Wt;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});var ou=function(){function t(e,a){for(var r=0;r<a.length;r++){var i=a[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}();function lu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var cu=function(){function t(e){lu(this,t),this.api=e}return ou(t,[{key:"handleCatch",value:function(a){if(a.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw a.message;else throw a;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(a){try{var r=a.apply(void 0,arguments);return this.api._options.valid(!0),r}catch(i){return this.handleCatch(i),this.api}}}]),t}();Qt.default=cu;var uu=yt,he=fe(uu),du=Oe,Le=fe(du),fu=Dt,rn=fe(fu),mu=Bt,kr=fe(mu),hu=Lt,xu=fe(hu),pu=nt,gu=fe(pu),vu=Qt,yu=fe(vu),nn=Se,bu=at,an=fe(bu);function fe(t){return t&&t.__esModule?t:{default:t}}var ce=function(){},it=function(e,a,r){var i=new ce;if(typeof e>"u")throw Error("No element to render on was provided.");return i._renderProperties=(0,xu.default)(e),i._encodings=[],i._options=an.default,i._errorHandler=new yu.default(i),typeof a<"u"&&(r=r||{},r.format||(r.format=on()),i.options(r)[r.format](a,r).render()),i};it.getModule=function(t){return he.default[t]};for(var $r in he.default)he.default.hasOwnProperty($r)&&_u(he.default,$r);function _u(t,e){ce.prototype[e]=ce.prototype[e.toUpperCase()]=ce.prototype[e.toLowerCase()]=function(a,r){var i=this;return i._errorHandler.wrapBarcodeCall(function(){r.text=typeof r.text>"u"?void 0:""+r.text;var s=(0,Le.default)(i._options,r);s=(0,gu.default)(s);var o=t[e],l=sn(a,o,s);return i._encodings.push(l),i})}}function sn(t,e,a){t=""+t;var r=new e(t,a);if(!r.valid())throw new nn.InvalidInputException(r.constructor.name,t);var i=r.encode();i=(0,rn.default)(i);for(var s=0;s<i.length;s++)i[s].options=(0,Le.default)(a,i[s].options);return i}function on(){return he.default.CODE128?"CODE128":Object.keys(he.default)[0]}ce.prototype.options=function(t){return this._options=(0,Le.default)(this._options,t),this};ce.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this};ce.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var a=(0,Le.default)(this._options,t.options);a.format=="auto"&&(a.format=on()),this._errorHandler.wrapBarcodeCall(function(){var r=a.value,i=he.default[a.format.toUpperCase()],s=sn(r,i,a);xt(t,s,a)})}}};ce.prototype.render=function(){if(!this._renderProperties)throw new nn.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)xt(this._renderProperties[t],this._encodings,this._options);else xt(this._renderProperties,this._encodings,this._options);return this};ce.prototype._defaults=an.default;function xt(t,e,a){e=(0,rn.default)(e);for(var r=0;r<e.length;r++)e[r].options=(0,Le.default)(a,e[r].options),(0,kr.default)(e[r].options);(0,kr.default)(a);var i=t.renderer,s=new i(t.element,e,a);s.render(),t.afterRender&&t.afterRender()}typeof window<"u"&&(window.JsBarcode=it);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(t,e){var a=[];return jQuery(this).each(function(){a.push(this)}),it(a,t,e)});var ju=it;const ln=In(ju),wu=({product:t,barcodeValue:e,format:a="CODE128",onClose:r})=>{const i=p.useRef(null),[s,o]=p.useState(!1),[l,f]=p.useState(a),[m,N]=p.useState(e||(t==null?void 0:t.barcode)||""),d=[{value:"CODE128",label:"CODE128 (Recommended)"},{value:"CODE39",label:"CODE39"},{value:"EAN13",label:"EAN-13"},{value:"EAN8",label:"EAN-8"},{value:"UPC",label:"UPC-A"},{value:"ITF14",label:"ITF-14"},{value:"MSI",label:"MSI"},{value:"pharmacode",label:"Pharmacode"},{value:"codabar",label:"Codabar"}];p.useEffect(()=>{E()},[m,l]);const E=()=>{if(!(!i.current||!m))try{ln(i.current,m,{format:l,width:2,height:100,displayValue:!0,fontSize:16,margin:10,background:"#ffffff",lineColor:"#000000"})}catch(c){console.error("Error generating barcode:",c),F.error(`Invalid barcode format for ${l}. Please try a different format.`)}},v=()=>{if(!i.current)return;const g=i.current.toDataURL("image/png"),k=document.createElement("a");k.download=`barcode-${m}.png`,k.href=g,k.click(),F.success("Barcode downloaded successfully")},A=()=>{m&&navigator.clipboard.writeText(m).then(()=>{o(!0),F.success("Barcode copied to clipboard"),setTimeout(()=>o(!1),2e3)}).catch(()=>{F.error("Failed to copy barcode")})},I=()=>{if(!i.current)return;const c=i.current,g=window.open("","_blank");g.document.write(`
      <html>
        <head>
          <title>Barcode Print</title>
          <style>
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              min-height: 100vh;
            }
            img {
              max-width: 100%;
              height: auto;
            }
          </style>
        </head>
        <body>
          <img src="${c.toDataURL("image/png")}" alt="Barcode" />
          <script>
            window.onload = function() {
              window.print();
            };
          <\/script>
        </body>
      </html>
    `),g.document.close()},S=()=>{const c=Math.floor(1e12+Math.random()*9e12);N(c.toString())};return!t&&!e?n.jsx("div",{className:"p-4 text-center text-gray-500",children:n.jsx("p",{children:"No product or barcode value provided"})}):n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Tr,{className:"h-5 w-5 text-primary-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t?`Barcode for ${t.name}`:"Generate Barcode"})]}),r&&n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(ue,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode Value"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{type:"text",value:m,onChange:c=>N(c.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter barcode value"}),n.jsx("button",{onClick:S,className:"px-3 py-2 text-sm text-primary-600 hover:text-primary-700 border border-primary-300 rounded-md hover:bg-primary-50 transition-colors",children:"Generate Random"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode Format"}),n.jsx("select",{value:l,onChange:c=>f(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:d.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]}),n.jsx("div",{className:"flex justify-center p-4 bg-gray-50 rounded-lg",children:n.jsx("canvas",{ref:i,className:"max-w-full"})}),n.jsxs("div",{className:"flex items-center justify-end space-x-2 pt-4 border-t",children:[n.jsxs("button",{onClick:A,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[s?n.jsx(da,{className:"h-4 w-4"}):n.jsx(ha,{className:"h-4 w-4"}),n.jsx("span",{children:s?"Copied!":"Copy Value"})]}),n.jsxs("button",{onClick:v,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[n.jsx(_e,{className:"h-4 w-4"}),n.jsx("span",{children:"Download"})]}),n.jsxs("button",{onClick:I,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[n.jsx(qe,{className:"h-4 w-4"}),n.jsx("span",{children:"Print"})]})]})]})]})},Nu=({products:t=[],onClose:e,initialLabelSize:a="standard"})=>{const[r,i]=p.useState([]),[s,o]=p.useState(a),[l,f]=p.useState("CODE128"),[m,N]=p.useState(!1),[d,E]=p.useState(!0),[v,A]=p.useState(2);p.useRef(null),p.useEffect(()=>{t.length>0&&i(t.map(b=>b._id||b.id))},[t]);const I=b=>{i(L=>L.includes(b)?L.filter(x=>x!==b):[...L,b])},S=()=>{i(t.map(b=>b._id||b.id))},c=()=>{i([])},g=(b,L)=>{const x=document.createElement("canvas");try{return ln(x,b,{format:L,width:s==="small"?1.5:s==="large"?3:2,height:s==="small"?60:s==="large"?120:80,displayValue:!0,fontSize:s==="small"?12:s==="large"?18:14,margin:5,background:"#ffffff",lineColor:"#000000"}),x}catch(_){return console.error("Error generating barcode:",_),null}},k=()=>{if(r.length===0){F.error("Please select at least one product");return}const b=t.filter(_=>r.includes(_._id||_.id)),L=window.open("","_blank"),x=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Barcode Labels</title>
          <style>
            @media print {
              @page {
                size: A4;
                margin: 10mm;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              font-family: Arial, sans-serif;
              margin: 0;
              padding: 20px;
            }
            .labels-container {
              display: grid;
              grid-template-columns: repeat(${v}, 1fr);
              gap: 10px;
              width: 100%;
            }
            .label {
              border: 1px solid #ddd;
              padding: 10px;
              text-align: center;
              page-break-inside: avoid;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              min-height: ${s==="small"?"80px":s==="large"?"150px":"120px"};
            }
            .label-name {
              font-size: ${s==="small"?"10px":s==="large"?"16px":"12px"};
              font-weight: bold;
              margin-bottom: 5px;
              word-wrap: break-word;
            }
            .label-price {
              font-size: ${s==="small"?"9px":s==="large"?"14px":"11px"};
              color: #666;
              margin-top: 5px;
            }
            .barcode-container {
              margin: 5px 0;
            }
          </style>
        </head>
        <body>
          <div class="labels-container">
            ${b.map(_=>{var j;const M=_.barcode||_.sku||_._id||_.id;if(!M)return"";const $=g(M,l);if(!$)return"";const q=$.toDataURL("image/png");return`
                <div class="label">
                  ${d?`<div class="label-name">${_.name||"Product"}</div>`:""}
                  <div class="barcode-container">
                    <img src="${q}" alt="Barcode" />
                  </div>
                  ${m&&((j=_.pricing)!=null&&j.retail)?`<div class="label-price">$${_.pricing.retail.toFixed(2)}</div>`:""}
                </div>
              `}).join("")}
          </div>
          <script>
            window.onload = function() {
              window.print();
            };
          <\/script>
        </body>
      </html>
    `;L.document.write(x),L.document.close(),F.success(`Printing ${b.length} label(s)`)},X=()=>{if(r.length===0){F.error("Please select at least one product");return}const b=t.filter(_=>r.includes(_._id||_.id)),L=window.open("","_blank"),x=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Barcode Labels</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 0;
              padding: 20px;
            }
            .labels-container {
              display: grid;
              grid-template-columns: repeat(${v}, 1fr);
              gap: 10px;
              width: 100%;
            }
            .label {
              border: 1px solid #ddd;
              padding: 10px;
              text-align: center;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              min-height: ${s==="small"?"80px":s==="large"?"150px":"120px"};
            }
            .label-name {
              font-size: ${s==="small"?"10px":s==="large"?"16px":"12px"};
              font-weight: bold;
              margin-bottom: 5px;
              word-wrap: break-word;
            }
            .label-price {
              font-size: ${s==="small"?"9px":s==="large"?"14px":"11px"};
              color: #666;
              margin-top: 5px;
            }
            .barcode-container {
              margin: 5px 0;
            }
          </style>
        </head>
        <body>
          <div class="labels-container">
            ${b.map(_=>{var j;const M=_.barcode||_.sku||_._id||_.id;if(!M)return"";const $=g(M,l);if(!$)return"";const q=$.toDataURL("image/png");return`
                <div class="label">
                  ${d?`<div class="label-name">${_.name||"Product"}</div>`:""}
                  <div class="barcode-container">
                    <img src="${q}" alt="Barcode" />
                  </div>
                  ${m&&((j=_.pricing)!=null&&j.retail)?`<div class="label-price">$${_.pricing.retail.toFixed(2)}</div>`:""}
                </div>
              `}).join("")}
          </div>
        </body>
      </html>
    `;L.document.write(x),L.document.close(),F.success("Labels ready for download/print")};return n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-75 flex items-center justify-center p-4",children:n.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(qe,{className:"h-5 w-5 text-primary-600"}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Print Barcode Labels"})]}),e&&n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(ue,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[n.jsx("div",{className:"lg:col-span-1 space-y-4",children:n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[n.jsx(Tn,{className:"h-4 w-4 text-gray-600"}),n.jsx("h3",{className:"font-medium text-gray-900",children:"Label Settings"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Label Size"}),n.jsxs("select",{value:s,onChange:b=>o(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[n.jsx("option",{value:"small",children:"Small"}),n.jsx("option",{value:"standard",children:"Standard"}),n.jsx("option",{value:"large",children:"Large"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode Format"}),n.jsxs("select",{value:l,onChange:b=>f(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[n.jsx("option",{value:"CODE128",children:"CODE128"}),n.jsx("option",{value:"CODE39",children:"CODE39"}),n.jsx("option",{value:"EAN13",children:"EAN-13"}),n.jsx("option",{value:"EAN8",children:"EAN-8"}),n.jsx("option",{value:"UPC",children:"UPC-A"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labels Per Row"}),n.jsxs("select",{value:v,onChange:b=>A(Number(b.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[n.jsx("option",{value:"1",children:"1"}),n.jsx("option",{value:"2",children:"2"}),n.jsx("option",{value:"3",children:"3"}),n.jsx("option",{value:"4",children:"4"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:d,onChange:b=>E(b.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Include Product Name"})]}),n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:m,onChange:b=>N(b.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Include Price"})]})]})]})]})}),n.jsxs("div",{className:"lg:col-span-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"font-medium text-gray-900",children:["Select Products (",r.length," of ",t.length,")"]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:S,className:"text-sm text-primary-600 hover:text-primary-700",children:"Select All"}),n.jsx("span",{className:"text-gray-300",children:"|"}),n.jsx("button",{onClick:c,className:"text-sm text-gray-600 hover:text-gray-700",children:"Deselect All"})]})]}),n.jsx("div",{className:"border rounded-lg max-h-96 overflow-y-auto",children:t.length===0?n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx(Te,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),n.jsx("p",{children:"No products available"})]}):n.jsx("div",{className:"divide-y",children:t.map(b=>{const L=r.includes(b._id||b.id),x=!!(b.barcode||b.sku);return n.jsxs("label",{className:`flex items-center p-3 cursor-pointer hover:bg-gray-50 ${L?"bg-primary-50":""}`,children:[n.jsx("input",{type:"checkbox",checked:L,onChange:()=>I(b._id||b.id),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),n.jsxs("div",{className:"ml-3 flex-1",children:[n.jsx("div",{className:"font-medium text-gray-900",children:b.name}),n.jsx("div",{className:"text-sm text-gray-500",children:x?n.jsx("span",{className:"font-mono",children:b.barcode||b.sku}):n.jsx("span",{className:"text-yellow-600",children:"No barcode"})})]})]},b._id||b.id)})})})]})]})}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-4 border-t bg-gray-50",children:[e&&n.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:X,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[n.jsx(_e,{className:"h-4 w-4"}),n.jsx("span",{children:"Preview"})]}),n.jsxs("button",{onClick:k,disabled:r.length===0,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[n.jsx(qe,{className:"h-4 w-4"}),n.jsx("span",{children:"Print Labels"})]})]})]})})},Eu=t=>{p.useEffect(()=>{const e=a=>{if(!a.key)return;const r=a.target;if(r.tagName==="INPUT"||r.tagName==="TEXTAREA"||r.contentEditable==="true"||r.isContentEditable)return;const s=a.key.toLowerCase(),l=a.ctrlKey||a.metaKey?`ctrl+${s}`:s;t[l]&&(a.preventDefault(),t[l]())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t])},Pr=t=>t.inventory.currentStock<=t.inventory.reorderPoint,Ou=t=>{if(!t.expiryDate)return null;const e=new Date(t.expiryDate),a=new Date;a.setHours(0,0,0,0),e.setHours(0,0,0,0);const r=e-a,i=Math.ceil(r/(1e3*60*60*24));return i<0?{status:"expired",days:Math.abs(i)}:i<=7?{status:"expiring_soon",days:i}:{status:"valid",days:i}},Su=({product:t,isOpen:e,onClose:a,onSave:r,isSubmitting:i,allProducts:s=[],onEditExisting:o,categories:l=[]})=>{const[f,m]=p.useState({name:"",description:"",category:"",status:"active",expiryDate:"",pricing:{cost:"",retail:"",wholesale:""},inventory:{currentStock:"",reorderPoint:""}}),[N,d]=p.useState(!1),[E,v]=p.useState([]),[A,I]=p.useState(null),[S,c]=p.useState({}),g=te.useCallback(x=>{const{name:_,value:M,type:$,checked:q}=x.target;let j=$==="checkbox"?q:M;if(_.includes(".")){const[h,O]=_.split(".");m(w=>({...w,[h]:{...w[h],[O]:j}}))}else m(h=>({...h,[_]:j}));if(_==="name"&&M.length>2&&!t){const h=s.find(O=>O.name.toLowerCase()===M.toLowerCase());if(h)I(h),d(!1),v([]);else{I(null);const O=s.filter(w=>w.name.toLowerCase().includes(M.toLowerCase())).slice(0,3);O.length>0?(v(O),d(!0)):(d(!1),v([]))}}else _==="name"&&(d(!1),v([]),I(null));c(h=>h[_]?{...h,[_]:null}:h)},[t,s]),k=te.useCallback(x=>{const{name:_,value:M}=x.target;_==="name"&&(!M||M.trim()==="")?c($=>({...$,[_]:"Product name is required"})):_==="name"&&M.length<2?c($=>({...$,[_]:"Product name must be at least 2 characters"})):c($=>({...$,[_]:null}))},[]),X=te.useCallback(()=>{const x={};return!f.name||f.name.trim()===""?x.name="Product name is required":f.name.length<2&&(x.name="Product name must be at least 2 characters"),c(x),Object.keys(x).length===0},[f.name]),b=te.useCallback((x={})=>{var M,$,q,j,h;let _="";if(x.expiryDate){const O=new Date(x.expiryDate);isNaN(O.getTime())||(_=O.toISOString().split("T")[0])}m({name:x.name||"",description:x.description||"",category:x.category||"",status:x.status||"active",expiryDate:_,barcode:x.barcode||"",sku:x.sku||"",brand:x.brand||"",pricing:{cost:((M=x.pricing)==null?void 0:M.cost)||"",retail:(($=x.pricing)==null?void 0:$.retail)||"",wholesale:((q=x.pricing)==null?void 0:q.wholesale)||""},inventory:{currentStock:((j=x.inventory)==null?void 0:j.currentStock)||"",reorderPoint:((h=x.inventory)==null?void 0:h.reorderPoint)||""}}),c({})},[]);te.useEffect(()=>{b(t||{})},[t,b]),te.useEffect(()=>{e&&setTimeout(()=>{const x=document.querySelector('input[name="name"]');x&&x.focus()},100)},[e]);const L=x=>{if(x.preventDefault(),!X()){const M=Object.keys(S).find($=>S[$]);M&&setTimeout(()=>{const $=document.querySelector(`[name="${M}"], #${M}`);$&&($.focus(),$.scrollIntoView({behavior:"smooth",block:"center"}))},100);return}r(f),a()};return e?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:a}),n.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:n.jsxs("form",{onSubmit:L,children:[n.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:t?"Edit Product":"Add New Product"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),n.jsx("input",{id:"name",name:"name",type:"text",value:f.name||"",onChange:g,onBlur:k,placeholder:"Enter product name",className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${S.name?"border-red-300":"border-gray-300"}`,autoComplete:"off"}),S.name&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.name}),A&&n.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-red-800",children:"⚠️ This product already exists!"}),n.jsxs("p",{className:"text-xs text-red-600 mt-1",children:['Product: "',A.name,'"']})]}),n.jsx("button",{type:"button",onClick:()=>{a(),setTimeout(()=>{o&&o(A)},100)},className:"text-red-600 hover:text-red-800 underline text-xs font-medium",children:"Edit Existing"})]})}),N&&E.length>0&&n.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Similar existing products:"}),n.jsx("ul",{className:"space-y-1",children:E.map((x,_)=>n.jsxs("li",{className:"flex items-center justify-between text-sm text-blue-700",children:[n.jsxs("span",{children:["• ",x.name]}),n.jsx("button",{type:"button",onClick:()=>{a(),setTimeout(()=>{o&&o(x)},100)},className:"text-blue-600 hover:text-blue-800 underline text-xs",children:"Edit"})]},_))}),n.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"Choose a unique name to avoid duplicates, or edit an existing product."})]}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Product name must be unique - no duplicates allowed"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),n.jsxs("select",{id:"category",name:"category",value:f.category||"",onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[n.jsx("option",{value:"",children:"Select a category"}),l==null?void 0:l.map(x=>n.jsx("option",{value:x._id,children:x.name},x._id))]}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optional product category"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{id:"description",name:"description",value:f.description||"",onChange:g,onBlur:k,placeholder:"Enter product description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optional description of the product"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{id:"status",name:"status",value:f.status||"active",onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"inactive",children:"Inactive (Disabled)"}),n.jsx("option",{value:"discontinued",children:"Discontinued"})]}),n.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[f.status==="active"&&"Product is active and available for sale",f.status==="inactive"&&"Product is disabled and hidden from sales",f.status==="discontinued"&&"Product is discontinued and no longer available"]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pricing.cost",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Price"}),n.jsx("input",{id:"pricing.cost",name:"pricing.cost",type:"number",step:"0.01",value:f.pricing.cost||"",onChange:g,onBlur:k,placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Product cost"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pricing.retail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Retail Price"}),n.jsx("input",{id:"pricing.retail",name:"pricing.retail",type:"number",step:"0.01",value:f.pricing.retail||"",onChange:g,onBlur:k,placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Retail selling price"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pricing.wholesale",className:"block text-sm font-medium text-gray-700 mb-1",children:"Wholesale Price"}),n.jsx("input",{id:"pricing.wholesale",name:"pricing.wholesale",type:"number",step:"0.01",value:f.pricing.wholesale||"",onChange:g,onBlur:k,placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Wholesale selling price"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"inventory.currentStock",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Stock"}),n.jsx("input",{id:"inventory.currentStock",name:"inventory.currentStock",type:"number",value:f.inventory.currentStock||"",onChange:g,onBlur:k,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Current inventory quantity"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"inventory.reorderPoint",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reorder Point"}),n.jsx("input",{id:"inventory.reorderPoint",name:"inventory.reorderPoint",type:"number",value:f.inventory.reorderPoint||"",onChange:g,onBlur:k,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Minimum stock level for reordering"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"expiryDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),n.jsx("input",{id:"expiryDate",name:"expiryDate",type:"date",value:f.expiryDate||"",onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optional expiry date for the product. Leave empty if product does not expire."})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"barcode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Barcode"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{id:"barcode",name:"barcode",type:"text",value:f.barcode||"",onChange:g,placeholder:"Enter or scan barcode",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("button",{type:"button",onClick:()=>{window.scanBarcode&&window.scanBarcode(x=>{g({target:{name:"barcode",value:x}})})},className:"px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",title:"Scan barcode",children:n.jsx(Ir,{className:"h-4 w-4 text-gray-600"})})]}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Product barcode for scanning"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU"}),n.jsx("input",{id:"sku",name:"sku",type:"text",value:f.sku||"",onChange:g,placeholder:"Enter SKU",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Stock Keeping Unit"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),n.jsx("input",{id:"brand",name:"brand",type:"text",value:f.brand||"",onChange:g,placeholder:"Enter brand name",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Product brand name"})]})]}),Object.keys(S).some(x=>S[x])&&n.jsx(pa,{errors:S,title:"Please fix the following errors before submitting:",onFieldClick:x=>{const _=document.querySelector(`[name="${x}"], #${x}`);_&&(_.focus(),_.scrollIntoView({behavior:"smooth",block:"center"}))}})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[n.jsx(Ie,{type:"submit",isLoading:i,disabled:!f.name||i||Object.keys(S).some(x=>S[x]),className:"btn btn-primary btn-md w-full sm:w-auto sm:ml-3 disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Update Product":"Create Product"}),n.jsx("button",{type:"button",onClick:a,disabled:i,className:"btn btn-secondary btn-md w-full sm:w-auto mt-3 sm:mt-0 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}):null},ku=({product:t,isOpen:e,onClose:a,onSave:r})=>{const[i,s]=p.useState([]),[o,l]=p.useState(""),[f,m]=p.useState(30),{data:N,isLoading:d}=Un({},{skip:!e,refetchOnMountOrArgChange:!0}),E=te.useMemo(()=>{var c;return((c=N==null?void 0:N.data)==null?void 0:c.investors)||(N==null?void 0:N.investors)||N||[]},[N]);te.useEffect(()=>{if(t&&e){const c=(t.investors||[]).map(g=>{var k,X;return{investorId:((k=g.investor)==null?void 0:k._id)||g.investor,investorName:((X=g.investor)==null?void 0:X.name)||"Unknown",sharePercentage:g.sharePercentage||30}});s(c)}},[t,e]);const v=()=>{if(!o){F.error("Please select an investor");return}const c=E.find(g=>g._id===o);if(c){if(i.some(g=>g.investorId===o)){F.error("This investor is already linked to this product");return}s([...i,{investorId:o,investorName:c.name,sharePercentage:f}]),l(""),m(30)}},A=c=>{s(i.filter(g=>g.investorId!==c))},I=(c,g)=>{s(i.map(k=>k.investorId===c?{...k,sharePercentage:parseFloat(g)||0}:k))},S=()=>{if(i.length===0){F.error("Please add at least one investor");return}const c=i.map(g=>({investor:g.investorId,sharePercentage:g.sharePercentage}));r(t._id,c)};return e?n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[n.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:a}),n.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[n.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Manage Investors - ",t==null?void 0:t.name]}),n.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:n.jsx(ue,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Add Investor"}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsx("div",{className:"col-span-2",children:n.jsxs("select",{value:o,onChange:c=>l(c.target.value),disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[n.jsx("option",{value:"",children:d?"Loading investors...":"Select Investor"}),!d&&E.length===0?n.jsx("option",{value:"",disabled:!0,children:"No investors available. Create one from the Investors page."}):E.map(c=>n.jsx("option",{value:c._id,children:c.name},c._id))]})}),n.jsxs("div",{className:"col-span-1 flex gap-2",children:[n.jsx("input",{type:"number",min:"0",max:"100",value:f,onChange:c=>m(parseFloat(c.target.value)||0),placeholder:"%",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"}),n.jsx("button",{type:"button",onClick:v,className:"btn btn-primary px-4",children:"Add"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Set the profit share percentage for this product. This determines what % of profit goes to investors (split among all linked investors), with the remainder going to the company."})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:["Linked Investors (",i.length,")"]}),i.length===0?n.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No investors linked. Add investors above."}):n.jsx("div",{className:"space-y-2",children:i.map(c=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm font-medium text-gray-900",children:c.investorName})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:"0",max:"100",value:c.sharePercentage,onChange:g=>I(c.investorId,g.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm"}),n.jsx("span",{className:"text-sm text-gray-600",children:"%"})]}),n.jsx("button",{onClick:()=>A(c.investorId),className:"text-red-600 hover:text-red-800",children:n.jsx(ue,{className:"h-4 w-4"})})]})]},c.investorId))})]})]}),n.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[n.jsx("button",{type:"button",onClick:S,className:"btn btn-primary btn-md w-full sm:w-auto sm:ml-3",children:"Save Investors"}),n.jsx("button",{type:"button",onClick:a,className:"btn btn-secondary btn-md w-full sm:w-auto mt-3 sm:mt-0",children:"Cancel"})]})]})]})}):null},cd=()=>{var Jt,Zt,er,tr,rr,nr,ar,ir;const[t,e]=p.useState(""),[a,r]=p.useState({}),[i,s]=p.useState(!1),[o,l]=p.useState(null),[f,m]=p.useState(null),[N,d]=p.useState(!1),[E,v]=p.useState(null),[A,I]=p.useState(!1),[S,c]=p.useState(!1),[g,k]=p.useState(!1),[X,b]=p.useState(!1),[L,x]=p.useState(null),[_,M]=p.useState(!1),[$,q]=p.useState(null);Rn();const{openTab:j}=Mn(),h=()=>{queryClient.invalidateQueries(["categories"]),F.success("Categories refreshed")};Eu({"ctrl+n":()=>{s(!0),F.success("Creating new product...")},"ctrl+f":()=>{const u=document.querySelector('input[placeholder*="Search products"]');u&&(u.focus(),u.select())},"ctrl+i":()=>{var D;const u=Array.from(document.querySelectorAll("button")).find(C=>{var G,P,z,R;return((G=C.textContent)==null?void 0:G.includes("Import Products"))||((R=(z=(P=C.querySelector("svg"))==null?void 0:P.parentElement)==null?void 0:z.textContent)==null?void 0:R.includes("Import"))});if(u)u.click(),F.success("Import dialog opened");else{const C=document.querySelector('[class*="Import"]')||((D=document.querySelector("h2, h3, h4"))==null?void 0:D.closest("div"));C?(C.scrollIntoView({behavior:"smooth",block:"center"}),F.success("Please use the Import button in the Import/Export section")):F.success("Use the Import/Export section to import products")}},escape:()=>{i&&(s(!1),l(null),F.success("Cancelled"))},f1:()=>{F.success("Keyboard Shortcuts: Ctrl+N (New Product), Ctrl+F (Search), Ctrl+I (Import), Esc (Cancel)")}});const w={search:t,limit:999999,...a},{data:y,isLoading:J,error:T,refetch:oe}=qn(w,{refetchOnMountOrArgChange:!0}),{data:U}=Dn(void 0,{refetchOnMountOrArgChange:!0}),re=te.useMemo(()=>{var u,D,C;return U?Array.isArray(U)?U:(u=U==null?void 0:U.data)!=null&&u.categories?U.data.categories:U!=null&&U.categories?U.categories:(C=(D=U==null?void 0:U.data)==null?void 0:D.data)!=null&&C.categories?U.data.data.categories:[]:[]},[U]),[ne,{isLoading:ke}]=Xn(),[cn,{isLoading:un}]=Kn(),[dn]=Wn(),[fn,{isLoading:mn}]=Qn(),[hn,{isLoading:$u}]=Yn(),[xn,{isLoading:Pu}]=Jn(),pn=u=>{l(u),s(!0)},gn=u=>{l(u),s(!0)},{confirmation:Yt,confirmDelete:vn,handleConfirm:yn,handleCancel:bn}=ta(),_n=u=>{vn(u.name,"Product",async()=>{try{await fn(u._id).unwrap(),ae("Product deleted successfully"),oe()}catch(D){ie(D,"Product Deletion")}})},jn=u=>{var G;let D=null;if(u.expiryDate&&u.expiryDate.trim()!==""){const P=new Date(u.expiryDate);isNaN(P.getTime())||(D=P.toISOString())}const C={...u,status:u.status||"active",expiryDate:D,pricing:{cost:parseFloat(u.pricing.cost)||0,retail:parseFloat(u.pricing.retail)||0,wholesale:parseFloat(u.pricing.wholesale)||0},inventory:{currentStock:parseInt(u.inventory.currentStock)||0,reorderPoint:parseInt(u.inventory.reorderPoint)||10}};if(!o){const P=(G=u.name)==null?void 0:G.trim().toLowerCase().replace(/\s+/g," ");if(le==null?void 0:le.find(R=>{var me;return((me=R.name)==null?void 0:me.trim().toLowerCase().replace(/\s+/g," "))===P})){He(`A product named "${u.name}" already exists. Please choose a different name.`);return}}o?cn({id:o._id,...C}).unwrap().then(()=>{ae("Product updated successfully"),oe()}).catch(P=>{var z,R,V;((z=P==null?void 0:P.data)==null?void 0:z.code)==="DUPLICATE_PRODUCT_NAME"||(V=(R=P==null?void 0:P.data)==null?void 0:R.message)!=null&&V.includes("already exists")?He("A product with this name already exists. Please choose a different name."):ie(P,"Product Update")}):ne(C).unwrap().then(()=>{ae("Product created successfully"),oe()}).catch(P=>{var z,R,V;((z=P==null?void 0:P.data)==null?void 0:z.code)==="DUPLICATE_PRODUCT_NAME"||(V=(R=P==null?void 0:P.data)==null?void 0:R.message)!=null&&V.includes("already exists")?He("A product with this name already exists. Please choose a different name or edit the existing product."):ie(P,"Product Creation")})},wn=()=>{s(!1),l(null)},Nn=u=>{r(u)},En=()=>{r({}),e("")},On=te.useMemo(()=>{var u,D,C;return y?Array.isArray(y)?y:(u=y==null?void 0:y.data)!=null&&u.products?y.data.products:y!=null&&y.products?y.products:(C=(D=y==null?void 0:y.data)==null?void 0:D.data)!=null&&C.products?y.data.data.products:y!=null&&y.items?y.items:[]:[]},[y]),le=Zn(On,t,["name","description","brand","category.name"],{threshold:.4,minScore:.3,limit:null}),H=ya(le,{idField:"_id",enableUndo:!0}),Sn=async u=>{const D=H.getSelectedItems();if(D.length===0)return;const C=D.map(G=>G._id);await H.executeBulkOperation("update",u);try{await hn({productIds:C,updates:u}).unwrap(),ae(`Successfully updated ${D.length} products`),I(!1),v(null),oe()}catch(G){ie(G,"Bulk Update")}},kn=async()=>{const u=H.getSelectedItems();if(u.length===0||!window.confirm(`Are you sure you want to delete ${u.length} products? This action cannot be undone.`))return;const D=u.map(C=>C._id);try{await xn({productIds:D}).unwrap(),ae(`Successfully deleted ${u.length} products`),H.deselectAll(),oe()}catch(C){ie(C,"Bulk Delete")}},$n=()=>{const u=H.getSelectedItems();if(u.length===0)return;const D=["Name","Description","SKU","Stock","Cost","Retail","Wholesale","Category","Status"],C=u.map(V=>{var me,sr,or,lr,cr;return[V.name||"",V.description||"",V.sku||"",((me=V.inventory)==null?void 0:me.currentStock)||0,((sr=V.pricing)==null?void 0:sr.cost)||0,((or=V.pricing)==null?void 0:or.retail)||0,((lr=V.pricing)==null?void 0:lr.wholesale)||0,((cr=V.category)==null?void 0:cr.name)||"",V.status||""]}),G=[D,...C].map(V=>V.map(me=>`"${me}"`).join(",")).join(`
`),P=new Blob([G],{type:"text/csv"}),z=window.URL.createObjectURL(P),R=document.createElement("a");R.href=z,R.download=`products_export_${new Date().toISOString().split("T")[0]}.csv`,R.click(),window.URL.revokeObjectURL(z),ae(`Exported ${u.length} products`)};if(J&&!y)return n.jsx(Bn,{message:"Loading products..."});if(T&&!y){let u="Unable to load products. Please try again.";if((Zt=(Jt=T==null?void 0:T.response)==null?void 0:Jt.data)!=null&&Zt.errors){const C=T.response.data.errors.map(G=>{const P=G.param||G.field||"",z=G.msg||G.message||"Invalid value";return P?`${P}: ${z}`:z});u=C.length>0?C.join(", "):T.response.data.message||"Invalid request parameters"}else(tr=(er=T==null?void 0:T.response)==null?void 0:er.data)!=null&&tr.details?u=Array.isArray(T.response.data.details)?T.response.data.details.join(", "):T.response.data.details:(nr=(rr=T==null?void 0:T.response)==null?void 0:rr.data)!=null&&nr.message?u=T.response.data.message:T!=null&&T.message&&(u=T.message);return n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Ke,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to Load Products"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:u}),n.jsxs("button",{onClick:()=>oe(),className:"btn btn-primary btn-md",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Products"}),n.jsx("p",{className:"text-gray-600",children:"Manage your product catalog"})]}),n.jsxs("div",{className:"flex-shrink-0 flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{const u=Ln("/categories");u&&j({title:"Add Product Category",path:"/categories?action=add",component:u.component,icon:u.icon,allowMultiple:!0,props:{action:"add"}})},className:"btn btn-outline btn-md w-full sm:w-auto",children:[n.jsx(pt,{className:"h-4 w-4 mr-2"}),"Add Product Category"]}),n.jsxs("button",{onClick:h,className:"btn btn-outline btn-md w-full sm:w-auto",title:"Refresh categories list",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Refresh Categories"]}),n.jsxs("button",{onClick:()=>c(!0),className:"btn btn-outline btn-md w-full sm:w-auto",title:"Scan barcode to search product",children:[n.jsx(Ir,{className:"h-4 w-4 mr-2"}),"Scan Barcode"]}),n.jsxs("button",{onClick:()=>b(!0),className:"btn btn-outline btn-md w-full sm:w-auto",title:"Print barcode labels",children:[n.jsx(qe,{className:"h-4 w-4 mr-2"}),"Print Labels"]}),n.jsxs("button",{onClick:()=>s(!0),className:"btn btn-primary btn-md w-full sm:w-auto",children:[n.jsx(ma,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search products...",value:t,onChange:u=>e(u.target.value),className:"input pl-10"})]})}),n.jsx(ga,{onImportComplete:()=>queryClient.invalidateQueries("products"),filters:w}),n.jsx(va,{filters:a,onFiltersChange:Nn,onClearFilters:En,categories:re||[]}),n.jsx(ba,{selectedCount:H.selectedCount,isOperationInProgress:H.isOperationInProgress,operationProgress:H.operationProgress,canUndo:H.canUndo,onBulkUpdate:()=>{v("update"),I(!0)},onBulkDelete:kn,onBulkExport:$n,onBulkStatusChange:()=>{v("status"),I(!0)},onBulkCategoryChange:()=>{v("category"),I(!0)},onBulkPriceUpdate:()=>{v("price"),I(!0)},onBulkStockAdjust:()=>{v("stock"),I(!0)},onUndo:H.undoLastOperation,onClearSelection:H.deselectAll,availableActions:["update","delete","export","status","category","price","stock"]}),n.jsx(_a,{isOpen:A,onClose:()=>{I(!1),v(null)},selectedCount:H.selectedCount,updateType:E,onConfirm:Sn,categories:re||[],statusOptions:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"discontinued",label:"Discontinued"}],isLoading:H.isOperationInProgress}),le.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Te,{className:"mx-auto h-12 w-12 text-gray-400"}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No products found"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t?"Try adjusting your search terms.":"Get started by adding a new product."})]}):n.jsx("div",{className:"card w-full",children:n.jsxs("div",{className:"card-content p-0 w-full",children:[n.jsx("div",{className:"bg-gray-50 px-8 py-6 border-b border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-12 gap-6 items-center",children:[n.jsx("div",{className:"col-span-1",children:n.jsx(hr,{checked:H.isSelectAll,onChange:()=>H.toggleSelectAll(le)})}),n.jsxs("div",{className:"col-span-4",children:[n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Product Name"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Description"})]}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Stock"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Cost"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Retail"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Wholesale"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Category"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Status"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("h3",{className:"text-base font-medium text-gray-700",children:"Actions"})})]})}),n.jsx("div",{className:"divide-y divide-gray-200",children:le.map(u=>{var D,C,G,P,z;return n.jsx("div",{className:"px-8 py-6 hover:bg-gray-50",children:n.jsxs("div",{className:"grid grid-cols-12 gap-6 items-center",children:[n.jsx("div",{className:"col-span-1",children:n.jsx(hr,{checked:H.isSelected(u._id),onChange:()=>H.toggleSelection(u._id)})}),n.jsx("div",{className:"col-span-4",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(Te,{className:"h-6 w-6 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-base font-medium text-gray-900",children:u.name}),u.expiryDate&&(()=>{const R=Ou(u);return(R==null?void 0:R.status)==="expired"?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",title:`Expired ${R.days} day${R.days>1?"s":""} ago`,children:"Expired"}):(R==null?void 0:R.status)==="expiring_soon"?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",title:`Expires in ${R.days} day${R.days>1?"s":""}`,children:"Expires Soon"}):R?n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",title:`Expires in ${R.days} day${R.days>1?"s":""}`,children:new Date(u.expiryDate).toLocaleDateString()}):null})()]}),n.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["ID: ",u._id]}),n.jsx("p",{className:"text-sm text-gray-500",children:u.description||"No description"}),u.expiryDate&&n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Expiry: ",new Date(u.expiryDate).toLocaleDateString()]})]})]})}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("p",{className:`text-sm font-medium ${Pr(u)?"text-danger-600":"text-gray-600"}`,children:((D=u.inventory)==null?void 0:D.currentStock)||0}),Pr(u)&&n.jsx("p",{className:"text-xs text-danger-600",children:"Low Stock"})]}),n.jsx("div",{className:"col-span-1",children:n.jsx("p",{className:"text-sm text-gray-600",children:Math.round(((C=u.pricing)==null?void 0:C.cost)||0)})}),n.jsx("div",{className:"col-span-1",children:n.jsx("p",{className:"text-sm text-gray-600",children:Math.round(((G=u.pricing)==null?void 0:G.retail)||0)})}),n.jsx("div",{className:"col-span-1",children:n.jsx("p",{className:"text-sm text-gray-600",children:Math.round(((P=u.pricing)==null?void 0:P.wholesale)||0)})}),n.jsx("div",{className:"col-span-1",children:n.jsx("p",{className:"text-sm text-gray-600",children:((z=u.category)==null?void 0:z.name)||"-"})}),n.jsx("div",{className:"col-span-1",children:n.jsx("span",{className:`badge ${u.status==="active"?"badge-success":"badge-gray"}`,children:u.status})}),n.jsxs("div",{className:"col-span-1",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("button",{onClick:()=>{l(u),k(!0)},className:"text-green-600 hover:text-green-800",title:"Generate Barcode",children:n.jsx(Tr,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>{m(u),d(!0)},className:"text-blue-600 hover:text-blue-800",title:"Manage Investors",children:n.jsx(Fn,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>pn(u),className:"text-primary-600 hover:text-primary-800",title:"Edit Product",children:n.jsx(Cr,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>_n(u),className:"text-danger-600 hover:text-danger-800",title:"Delete Product",children:n.jsx(Ar,{className:"h-5 w-5"})})]}),u.hasInvestors&&n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mt-2",children:"Has Investors"})]})]})},u._id)})})]})}),n.jsx(Su,{product:o,isOpen:i,onClose:wn,onSave:jn,isSubmitting:ke||un,allProducts:le||[],onEditExisting:gn,categories:re||[]}),n.jsx(ea,{isOpen:Yt.isOpen,onClose:bn,onConfirm:yn,itemName:((ir=(ar=Yt.message)==null?void 0:ar.match(/"([^"]*)"/))==null?void 0:ir[1])||"",itemType:"Product",isLoading:mn}),f&&n.jsx(ku,{product:f,isOpen:N,onClose:()=>{d(!1),m(null)},onSave:async(u,D)=>{try{await dn({productId:u,investors:D}).unwrap(),F.success("Investors linked successfully!"),queryClient.invalidateQueries(["products"]),d(!1),m(null)}catch(C){ie(C,"Link Investors")}}}),n.jsx(ua,{isOpen:S,onClose:()=>c(!1),onScan:u=>{e(u),r({barcode:u}),c(!1),F.success(`Searching for barcode: ${u}`)},scanMode:"both"}),g&&o&&n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-75 flex items-center justify-center p-4",children:n.jsx("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full",children:n.jsx(wu,{product:o,barcodeValue:o.barcode,onClose:()=>{k(!1),l(null)}})})}),X&&n.jsx(Nu,{products:le||[],onClose:()=>b(!1)}),_&&$&&n.jsx(fa,{entityType:$.type,entityId:$.id,entityName:$.name,onClose:()=>{M(!1),q(null)}})]})};export{cd as Products};
