import{E as He,aZ as Ve,r as f,aC as Xe,c as $e,a$ as Ke,y as Ze,o as e,X as _,S as Be,N as le,b0 as Je,x as ve,w as G,z as we,b1 as De,P as X,a3 as qe,U as Ue,b2 as et,ak as Ye,C as Ae,ae as tt,b3 as st,H as at,O as nt,K as rt,R as Qe,M as lt,T as it,b4 as ot}from"./index-jd7Ax_Ed.js";import{u as dt}from"./settingsApi-BmCVf2XF.js";import{u as ct}from"./useMutation-n-l4Ns3H.js";import{A as Se}from"./alert-circle-yrAHCiEw.js";import{P as Te}from"./plus-C2o0386P.js";import{P as We}from"./printer-BkLl9NNZ.js";import{C as V}from"./check-circle-8oGxTki5.js";import{X as Re}from"./x-circle-CN1zMonK.js";import{M as Ge}from"./message-square-DtCe3QVP.js";import{P as Ce}from"./phone-Dkvr6QGJ.js";import{P as mt}from"./pen-square-CzKMgeH3.js";import{F as xt}from"./filter-CQLYjJyW.js";import{E as ut}from"./eye-DMmE8Niy.js";import{T as ht}from"./trash-2-DCbqoVbR.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=He("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),gt=Ve.injectEndpoints({endpoints:a=>({getReturns:a.query({query:r=>({url:"returns",method:"get",params:r}),providesTags:r=>{var o;return(o=r==null?void 0:r.data)!=null&&o.returns||r!=null&&r.data?[...(r.data.returns||r.data).map(({_id:m,id:v})=>({type:"Returns",id:m||v})),{type:"Returns",id:"LIST"}]:[{type:"Returns",id:"LIST"}]}}),getReturn:a.query({query:r=>({url:`returns/${r}`,method:"get"}),providesTags:(r,o,m)=>[{type:"Returns",id:m}]}),createReturn:a.mutation({query:r=>({url:"returns",method:"post",data:r}),invalidatesTags:[{type:"Returns",id:"LIST"}]}),updateReturnStatus:a.mutation({query:({returnId:r,...o})=>({url:`returns/${r}/status`,method:"put",data:o}),invalidatesTags:(r,o,{returnId:m})=>[{type:"Returns",id:m},{type:"Returns",id:"LIST"}]}),updateInspection:a.mutation({query:({returnId:r,...o})=>({url:`returns/${r}/inspection`,method:"put",data:o}),invalidatesTags:(r,o,{returnId:m})=>[{type:"Returns",id:m},{type:"Returns",id:"LIST"}]}),addNote:a.mutation({query:({returnId:r,...o})=>({url:`returns/${r}/notes`,method:"post",data:o}),invalidatesTags:(r,o,{returnId:m})=>[{type:"Returns",id:m}]}),addCommunication:a.mutation({query:({returnId:r,...o})=>({url:`returns/${r}/communication`,method:"post",data:o}),invalidatesTags:(r,o,{returnId:m})=>[{type:"Returns",id:m}]}),getReturnStats:a.query({query:r=>({url:"returns/stats",method:"get",params:r}),providesTags:[{type:"Returns",id:"STATS"}]}),getReturnTrends:a.query({query:r=>({url:"returns/trends",method:"get",params:r}),providesTags:[{type:"Returns",id:"TRENDS"}]}),getEligibleItems:a.query({query:r=>({url:`returns/order/${r}/eligible-items`,method:"get"}),providesTags:(r,o,m)=>[{type:"Returns",id:`ELIGIBLE_${m}`}]}),deleteReturn:a.mutation({query:r=>({url:`returns/${r}`,method:"delete"}),invalidatesTags:(r,o,m)=>[{type:"Returns",id:m},{type:"Returns",id:"LIST"}]})}),overrideExisting:!1}),{useGetReturnsQuery:bt,useGetReturnQuery:jt,useUpdateReturnStatusMutation:yt,useAddNoteMutation:ft,useAddCommunicationMutation:Nt,useGetReturnStatsQuery:vt,useDeleteReturnMutation:wt}=gt,Rt=({isOpen:a,onClose:r,onSuccess:o,defaultReturnType:m="sales"})=>{var b;const v=m==="purchase",[c,j]=f.useState({originalOrder:"",returnType:"return",priority:"normal",refundMethod:"original_payment",items:[],generalNotes:"",origin:m}),[x,y]=f.useState(null),[$,C]=f.useState(""),[K,I]=f.useState(!1),M=Xe(),z=f.useMemo(()=>["returns-orders-search",v?"purchase":"sales",$],[v,$]),{data:w,isLoading:q}=$e(z,()=>{const t={search:$,limit:10};return v?Ke.getPurchaseInvoices(t):Ze.getOrders({...t,type:"sales"})},{enabled:$.length>2,keepPreviousData:!0,onError:t=>G(t,"Order Search")}),{data:p,isLoading:ee}=$e(["eligible-items",x==null?void 0:x._id,m],()=>De.getEligibleItems(x._id,{origin:m}),{enabled:!!x,onError:t=>{G(t,"Fetch Eligible Items")}}),U=ct(t=>De.createReturn(t),{onSuccess:()=>{we("Return request created successfully"),M.invalidateQueries(["returns"]),o()},onError:t=>{G(t,"Create Return")}});f.useEffect(()=>{a&&(j({originalOrder:"",returnType:"return",priority:"normal",refundMethod:"original_payment",items:[],generalNotes:"",origin:m}),y(null),C(""),I(!1))},[a,m]);const te=t=>{y(t),j(n=>({...n,originalOrder:t._id})),I(!1),C("")},se=(t,n)=>{const u={product:t.product._id,originalOrderItem:t._id,quantity:1,originalPrice:t.price||0,returnReason:"changed_mind",condition:"good",action:"refund",returnReasonDetail:"",refundAmount:0,restockingFee:0};j(g=>({...g,items:[...g.items,{...u,maxQuantity:n}]}))},ae=t=>{j(n=>({...n,items:n.items.filter((u,g)=>g!==t)}))},A=(t,n,u)=>{j(g=>({...g,items:g.items.map((F,E)=>E===t?{...F,[n]:u}:F)}))},D=t=>{if(t.preventDefault(),!x){ve("Please select an order");return}if(c.items.length===0){ve("Please add at least one item to return");return}for(const n of c.items){if(!n.returnReason){ve("Please select a return reason for all items");return}if(!n.condition){ve("Please select a condition for all items");return}if(n.quantity<1||n.quantity>n.maxQuantity){ve("Invalid quantity for one or more items");return}}U.mutate(c)},P=f.useMemo(()=>w!=null&&w.data?v?w.data.purchaseInvoices||w.data.invoices||w.data:w.data.orders||w.data:[],[w,v]),ne=((b=p==null?void 0:p.data)==null?void 0:b.eligibleItems)||[];return a?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Create Return Request"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Original Order *"}),x?e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:x.orderNumber}),e.jsx("div",{className:"text-sm text-gray-500",children:(()=>{var E,Q,L;const t=x.supplier||((E=x.purchaseInvoice)==null?void 0:E.supplier),n=x.customer||((Q=x.salesOrder)==null?void 0:Q.customer),u=v?(t==null?void 0:t.companyName)||(t==null?void 0:t.name)||(t==null?void 0:t.businessName)||((L=t==null?void 0:t.contactPerson)==null?void 0:L.name)||"Unknown supplier":(n==null?void 0:n.businessName)||[n==null?void 0:n.firstName,n==null?void 0:n.lastName].filter(Boolean).join(" ")||(n==null?void 0:n.email)||"Unknown customer",g=x.total??x.grandTotal??x.amount??0,F=x.createdAt||x.invoiceDate||x.orderDate;return`${u} • $${g.toFixed(2)} • ${F?new Date(F).toLocaleDateString():"—"}`})()})]}),e.jsx("button",{type:"button",onClick:()=>{y(null),j(t=>({...t,originalOrder:""}))},className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-4 w-4"})})]})}):e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:v?"Search purchase orders by order number, supplier name...":"Search orders by order number, customer name...",value:$,onChange:t=>{C(t.target.value),I(!0)},onFocus:()=>I(!0),className:"input pl-10"}),K&&$&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none",children:q?e.jsx("div",{className:"px-4 py-2 text-gray-500",children:"Searching..."}):P.length===0?e.jsx("div",{className:"px-4 py-2 text-gray-500",children:"No orders found"}):P.map(t=>{var Q,L,N;const n=t.supplier||((Q=t.purchaseInvoice)==null?void 0:Q.supplier),u=t.customer||((L=t.salesOrder)==null?void 0:L.customer),g=v?(n==null?void 0:n.companyName)||(n==null?void 0:n.name)||(n==null?void 0:n.businessName)||((N=n==null?void 0:n.contactPerson)==null?void 0:N.name)||"Unknown supplier":(u==null?void 0:u.businessName)||[u==null?void 0:u.firstName,u==null?void 0:u.lastName].filter(Boolean).join(" ")||(u==null?void 0:u.email)||"Unknown customer",F=t.total??t.grandTotal??t.amount??0,E=t.createdAt||t.invoiceDate||t.orderDate;return e.jsx("button",{type:"button",onClick:()=>te(t),className:"w-full text-left px-4 py-2 hover:bg-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("span",{className:"text-sm text-gray-500",children:E?new Date(E).toLocaleDateString():"—"}),e.jsx("span",{className:"font-medium flex-1",children:g}),e.jsx("span",{className:"text-sm text-gray-600",children:t.orderNumber}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",F.toFixed(2)]})]})},t._id)})})]})]}),x&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Return Type *"}),e.jsxs("select",{value:c.returnType,onChange:t=>j(n=>({...n,returnType:t.target.value})),className:"input",required:!0,children:[e.jsx("option",{value:"return",children:"Return"}),e.jsx("option",{value:"exchange",children:"Exchange"}),e.jsx("option",{value:"warranty",children:"Warranty"}),e.jsx("option",{value:"recall",children:"Recall"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{value:c.priority,onChange:t=>j(n=>({...n,priority:t.target.value})),className:"input",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Items to Return *"}),ee?e.jsx(le,{message:"Loading eligible items..."}):ne.length===0?e.jsxs("div",{className:"p-4 text-center text-gray-500 bg-gray-50 rounded-lg",children:[e.jsx(Se,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),e.jsx("p",{children:"No items are eligible for return from this order"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Available Items"}),e.jsx("div",{className:"space-y-2",children:ne.map((t,n)=>{var u;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:t.orderItem.product.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Available: ",t.availableQuantity," • Price: $",(u=t.orderItem.price)==null?void 0:u.toFixed(2)]})]}),e.jsxs("button",{type:"button",onClick:()=>se(t.orderItem,t.availableQuantity),className:"btn btn-primary btn-sm",disabled:c.items.some(g=>g.originalOrderItem===t.orderItem._id),children:[e.jsx(Te,{className:"h-4 w-4 mr-1"}),"Add"]})]},t.orderItem._id)})})]}),c.items.length>0&&e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Selected Items"}),e.jsx("div",{className:"space-y-4",children:c.items.map((t,n)=>{var u;return e.jsxs("div",{className:"p-3 bg-gray-50 rounded border",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:(u=ne.find(g=>g.orderItem._id===t.originalOrderItem))==null?void 0:u.orderItem.product.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Max quantity: ",t.maxQuantity]})]}),e.jsx("button",{type:"button",onClick:()=>ae(n),className:"text-red-500 hover:text-red-700",children:e.jsx(Je,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantity *"}),e.jsx("input",{type:"number",min:"1",max:t.maxQuantity,value:t.quantity,onChange:g=>A(n,"quantity",parseInt(g.target.value)||1),className:"input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Return Reason *"}),e.jsxs("select",{value:t.returnReason,onChange:g=>A(n,"returnReason",g.target.value),className:"input",required:!0,children:[e.jsx("option",{value:"",children:"Select reason"}),e.jsx("option",{value:"defective",children:"Defective"}),e.jsx("option",{value:"wrong_item",children:"Wrong Item"}),e.jsx("option",{value:"not_as_described",children:"Not as Described"}),e.jsx("option",{value:"damaged_shipping",children:"Damaged in Shipping"}),e.jsx("option",{value:"changed_mind",children:"Changed Mind"}),e.jsx("option",{value:"duplicate_order",children:"Duplicate Order"}),e.jsx("option",{value:"size_issue",children:"Size Issue"}),e.jsx("option",{value:"quality_issue",children:"Quality Issue"}),e.jsx("option",{value:"late_delivery",children:"Late Delivery"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Condition *"}),e.jsxs("select",{value:t.condition,onChange:g=>A(n,"condition",g.target.value),className:"input",required:!0,children:[e.jsx("option",{value:"",children:"Select condition"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"like_new",children:"Like New"}),e.jsx("option",{value:"good",children:"Good"}),e.jsx("option",{value:"fair",children:"Fair"}),e.jsx("option",{value:"poor",children:"Poor"}),e.jsx("option",{value:"damaged",children:"Damaged"})]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Return Reason Details"}),e.jsx("textarea",{value:t.returnReasonDetail,onChange:g=>A(n,"returnReasonDetail",g.target.value),placeholder:"Additional details about the return reason...",className:"input",rows:2})]})]},n)})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Refund Method"}),e.jsxs("select",{value:c.refundMethod,onChange:t=>j(n=>({...n,refundMethod:t.target.value})),className:"input",children:[e.jsx("option",{value:"original_payment",children:"Original Payment Method"}),e.jsx("option",{value:"store_credit",children:"Store Credit"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"check",children:"Check"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:c.generalNotes,onChange:t=>j(n=>({...n,generalNotes:t.target.value})),placeholder:"Additional notes about this return request...",className:"input",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:U.isLoading||!x||c.items.length===0,className:"btn btn-primary",children:U.isLoading?e.jsx(le,{size:"sm"}):"Create Return Request"})]})]})]})}):null},Ct=({return:a,isOpen:r,onClose:o,onStatusUpdate:m,onAddNote:v,onAddCommunication:c,isLoading:j})=>{var oe,l,h,d,S,Z,B,Y,de,ce,me,xe,ue;const[x,y]=f.useState("details"),[$,C]=f.useState(!1),[K,I]=f.useState(!1),[M,z]=f.useState(!1),[w,q]=f.useState(""),[p,ee]=f.useState(""),[U,te]=f.useState(""),[se,ae]=f.useState(!1),[A,D]=f.useState({type:"email",message:"",recipient:""}),{data:P,isLoading:ne}=$e(["return",a==null?void 0:a._id],()=>De.getReturn(a._id),{enabled:!!(a!=null&&a._id)&&r,initialData:a,onError:s=>{G(s,"Fetch Return Details")}}),{data:b}=$e("company-settings",()=>st.getCompanySettings(),{onError:s=>{console.error("Error fetching company settings:",s)}}),t=(P==null?void 0:P.data)||a,n=s=>{switch(s){case"pending":return e.jsx(Ae,{className:"h-5 w-5 text-yellow-500"});case"approved":return e.jsx(V,{className:"h-5 w-5 text-blue-500"});case"rejected":return e.jsx(Re,{className:"h-5 w-5 text-red-500"});case"processing":return e.jsx(X,{className:"h-5 w-5 text-blue-500"});case"received":return e.jsx(X,{className:"h-5 w-5 text-green-500"});case"completed":return e.jsx(V,{className:"h-5 w-5 text-green-600"});case"cancelled":return e.jsx(Re,{className:"h-5 w-5 text-gray-500"});default:return e.jsx(Se,{className:"h-5 w-5 text-gray-500"})}},u=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"processing":return"bg-blue-100 text-blue-800";case"received":return"bg-green-100 text-green-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},g=s=>{switch(s){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"normal":return"bg-blue-100 text-blue-800";case"low":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},F=()=>{m(w,p),C(!1),q(""),ee("")},E=()=>{v(U,se),I(!1),te(""),ae(!1)},Q=()=>{c(A.type,A.message,A.recipient),z(!1),D({type:"email",message:"",recipient:""})},L=()=>{var H,he,pe,ge,be,je,ye,R,T,fe,Ne,Pe,_e,Fe,Ee,Ie,Me,ze;const s=window.open("","_blank"),i=t,W=((H=b==null?void 0:b.data)==null?void 0:H.companyName)||"Your Company Name",J=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Return Document - ${i.returnNumber}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 10px; font-size: 12px; }
          .header { text-align: center; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px; }
          .company-name { font-size: 16px; font-weight: bold; color: #333; }
          .document-title { font-size: 14px; color: #666; margin-top: 5px; }
          .return-info { margin-bottom: 15px; }
          .info-row { display: flex; justify-content: space-between; margin-bottom: 3px; padding: 2px 0; border-bottom: 1px solid #eee; font-size: 11px; }
          .info-label { font-weight: bold; color: #333; }
          .info-value { color: #666; }
          .items-table { width: 100%; border-collapse: collapse; margin: 10px 0; font-size: 10px; }
          .items-table th, .items-table td { border: 1px solid #ddd; padding: 4px; text-align: left; }
          .items-table th { background-color: #f5f5f5; font-weight: bold; font-size: 10px; }
          .items-table tr:nth-child(even) { background-color: #f9f9f9; }
          .totals { margin-top: 15px; text-align: right; }
          .total-row { display: flex; justify-content: space-between; margin-bottom: 3px; padding: 2px 0; font-size: 11px; }
          .total-label { font-weight: bold; }
          .total-value { font-weight: bold; font-size: 12px; }
          .footer { margin-top: 20px; text-align: center; color: #666; font-size: 10px; }
          @media print {
            body { margin: 5px; font-size: 10px; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="company-name">${W}</div>
          <div class="company-details" style="font-size: 10px; color: #666; margin-top: 5px;">
            ${((he=b==null?void 0:b.data)==null?void 0:he.address)||""} | ${((pe=b==null?void 0:b.data)==null?void 0:pe.contactNumber)||""} | ${((ge=b==null?void 0:b.data)==null?void 0:ge.email)||""}
          </div>
          <div class="document-title">RETURN DOCUMENT</div>
        </div>
        
        <div class="return-info" style="display: flex; gap: 20px; margin-bottom: 15px;">
          <div style="flex: 1;">
            <h3 style="color: #333; margin-bottom: 8px; font-size: 12px; border-bottom: 1px solid #ddd; padding-bottom: 3px;">CUSTOMER DETAILS</h3>
            <div class="info-row">
              <span class="info-label">Customer Name:</span>
              <span class="info-value">${(be=i.customer)!=null&&be.firstName&&((je=i.customer)!=null&&je.lastName)?`${i.customer.firstName} ${i.customer.lastName}`:((ye=i.customer)==null?void 0:ye.name)||((R=i.customer)==null?void 0:R.businessName)||"N/A"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Email:</span>
              <span class="info-value">${((T=i.customer)==null?void 0:T.email)||"N/A"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Phone:</span>
              <span class="info-value">${((fe=i.customer)==null?void 0:fe.phone)||"N/A"}</span>
            </div>
          </div>
          <div style="flex: 1;">
            <h3 style="color: #333; margin-bottom: 8px; font-size: 12px; border-bottom: 1px solid #ddd; padding-bottom: 3px;">RETURN DETAILS</h3>
            <div class="info-row">
              <span class="info-label">Return Number:</span>
              <span class="info-value">${i.returnNumber}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Original Order:</span>
              <span class="info-value">${((Ne=i.originalOrder)==null?void 0:Ne.orderNumber)||"N/A"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Status:</span>
              <span class="info-value">${((Pe=i.status)==null?void 0:Pe.toUpperCase())||"PENDING"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Priority:</span>
              <span class="info-value">${((_e=i.priority)==null?void 0:_e.toUpperCase())||"NORMAL"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Return Date:</span>
              <span class="info-value">${new Date(i.returnDate).toLocaleDateString()}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Refund Method:</span>
              <span class="info-value">${((Fe=i.refundMethod)==null?void 0:Fe.replace("_"," ").toUpperCase())||"ORIGINAL PAYMENT"}</span>
            </div>
          </div>
        </div>
        
        <table class="items-table">
          <thead>
            <tr>
              <th>Product</th>
              <th>Quantity</th>
              <th>Original Price</th>
              <th>Return Reason</th>
              <th>Condition</th>
              <th>Refund Amount</th>
              <th>Restocking Fee</th>
            </tr>
          </thead>
          <tbody>
            ${((Ee=i.items)==null?void 0:Ee.map(k=>{var O,Le,Oe;return`
              <tr>
                <td>${((O=k.product)==null?void 0:O.name)||"N/A"}</td>
                <td>${k.quantity||0}</td>
                <td>$${(k.originalPrice||0).toFixed(2)}</td>
                <td>${((Le=k.returnReason)==null?void 0:Le.replace("_"," ").toUpperCase())||"N/A"}</td>
                <td>${((Oe=k.condition)==null?void 0:Oe.toUpperCase())||"N/A"}</td>
                <td>$${(k.refundAmount||0).toFixed(2)}</td>
                <td>$${(k.restockingFee||0).toFixed(2)}</td>
              </tr>
            `}).join(""))||'<tr><td colspan="7">No items found</td></tr>'}
          </tbody>
        </table>
        
        <div class="totals">
          <div class="total-row">
            <span class="total-label">Total Refund Amount:</span>
            <span class="total-value">$${i.totalRefundAmount?i.totalRefundAmount.toFixed(2):i.items?i.items.reduce((k,O)=>k+(O.refundAmount||0),0).toFixed(2):"0.00"}</span>
          </div>
          <div class="total-row">
            <span class="total-label">Total Restocking Fee:</span>
            <span class="total-value">$${i.totalRestockingFee?i.totalRestockingFee.toFixed(2):i.items?i.items.reduce((k,O)=>k+(O.restockingFee||0),0).toFixed(2):"0.00"}</span>
          </div>
          <div class="total-row">
            <span class="total-label">Net Refund Amount:</span>
            <span class="total-value">$${i.netRefundAmount?i.netRefundAmount.toFixed(2):i.items?(i.items.reduce((k,O)=>k+(O.refundAmount||0),0)-i.items.reduce((k,O)=>k+(O.restockingFee||0),0)).toFixed(2):"0.00"}</span>
          </div>
        </div>
        
        ${i.generalNotes?`
          <div style="margin-top: 30px;">
            <h3 style="color: #333; margin-bottom: 10px;">Notes:</h3>
            <p style="color: #666; line-height: 1.5;">${i.generalNotes}</p>
          </div>
        `:""}
        
        <div class="footer">
          <p>Generated on ${new Date().toLocaleString()}</p>
          <p>This is a computer-generated document.</p>
          <p style="margin-top: 10px; font-weight: bold;">${W}</p>
          <p>${((Ie=b==null?void 0:b.data)==null?void 0:Ie.address)||""}</p>
          <p>Phone: ${((Me=b==null?void 0:b.data)==null?void 0:Me.contactNumber)||""} | Email: ${((ze=b==null?void 0:b.data)==null?void 0:ze.email)||""}</p>
        </div>
      </body>
      </html>
    `;s.document.write(J),s.document.close(),s.onload=()=>{s.print(),s.close()}},N=s=>{switch(s){case"pending":return["approved","rejected"];case"approved":return["processing","rejected"];case"processing":return["received","rejected"];case"received":return["completed","rejected"];default:return[]}};if(!r||!t)return null;const re=[{id:"details",label:"Details",icon:qe},{id:"items",label:"Items",icon:X},{id:"notes",label:"Notes",icon:Ge},{id:"communication",label:"Communication",icon:Ce}],ie=N(t.status);return e.jsxs("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:[e.jsxs("div",{className:"relative top-10 mx-auto p-5 border w-11/12 max-w-6xl shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-medium text-gray-900",children:["Return ",t.returnNumber]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created ",new Date(t.returnDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:L,className:"text-gray-400 hover:text-gray-600",title:"Print Return Document",children:e.jsx(We,{className:"h-6 w-6"})}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-6 w-6"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${u(t.status)}`,children:[n(t.status),e.jsx("span",{className:"ml-2 capitalize",children:t.status})]}),e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${g(t.priority)}`,children:[t.priority||"normal"," priority"]})]}),ie.length>0&&e.jsx("div",{className:"flex space-x-2",children:ie.map(s=>e.jsxs("button",{onClick:()=>{q(s),C(!0)},disabled:j,className:`btn btn-sm ${s==="approved"||s==="completed"?"btn-primary":s==="rejected"?"btn-danger":"btn-secondary"}`,children:[s==="approved"&&e.jsx(V,{className:"h-4 w-4 mr-1"}),s==="rejected"&&e.jsx(Re,{className:"h-4 w-4 mr-1"}),s==="processing"&&e.jsx(X,{className:"h-4 w-4 mr-1"}),s==="received"&&e.jsx(X,{className:"h-4 w-4 mr-1"}),s==="completed"&&e.jsx(V,{className:"h-4 w-4 mr-1"}),s.charAt(0).toUpperCase()+s.slice(1)]},s))})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:re.map(s=>{const i=s.icon;return e.jsxs("button",{onClick:()=>y(s.id),className:`flex items-center py-2 px-1 border-b-2 font-medium text-sm ${x===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(i,{className:"h-4 w-4 mr-2"}),s.label]},s.id)})})}),e.jsxs("div",{className:"min-h-[400px]",children:[x==="details"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Customer Information"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ue,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[(oe=t.customer)==null?void 0:oe.firstName," ",(l=t.customer)==null?void 0:l.lastName]}),e.jsx("div",{className:"text-sm text-gray-500",children:(h=t.customer)==null?void 0:h.email})]})]}),((d=t.customer)==null?void 0:d.phone)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ce,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsx("span",{children:t.customer.phone})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Order Information"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(qe,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:(S=t.originalOrder)==null?void 0:S.orderNumber}),e.jsx("div",{className:"text-sm text-gray-500",children:"Original order"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(et,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsx("span",{children:new Date((Z=t.originalOrder)==null?void 0:Z.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsxs("span",{children:["$",(Y=(B=t.originalOrder)==null?void 0:B.total)==null?void 0:Y.toFixed(2)]})]})]})})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Return Details"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Return Type"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:t.returnType})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Refund Method"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:(de=t.refundMethod)==null?void 0:de.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Refund"}),e.jsxs("p",{className:"mt-1 text-lg font-semibold text-gray-900",children:["$",((ce=t.netRefundAmount)==null?void 0:ce.toFixed(2))||"0.00"]})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Timeline"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Ae,{className:"h-4 w-4 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Return Requested"}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(t.returnDate).toLocaleString()})]})]}),t.approvalDate&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(V,{className:"h-4 w-4 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Approved"}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(t.approvalDate).toLocaleString()})]})]}),t.completionDate&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(V,{className:"h-4 w-4 text-green-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Completed"}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(t.completionDate).toLocaleString()})]})]})]})})]})]}),x==="items"&&e.jsx("div",{className:"space-y-4",children:(me=t.items)==null?void 0:me.map((s,i)=>{var W,J,H;return e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:(W=s.product)==null?void 0:W.name})}),e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.quantity})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Return Reason"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:(J=s.returnReason)==null?void 0:J.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Condition"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:s.condition})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Refund Amount"}),e.jsxs("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:["$",((H=s.refundAmount)==null?void 0:H.toFixed(2))||"0.00"]})]})]}),s.returnReasonDetail&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Reason Details"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.returnReasonDetail})]})]})]},i)})}),x==="notes"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Notes"}),e.jsxs("button",{onClick:()=>I(!0),className:"btn btn-primary btn-sm",children:[e.jsx(mt,{className:"h-4 w-4 mr-1"}),"Add Note"]})]}),((xe=t.notes)==null?void 0:xe.length)>0?e.jsx("div",{className:"space-y-3",children:t.notes.map((s,i)=>e.jsxs("div",{className:`p-3 rounded-lg ${s.isInternal?"bg-blue-50":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-sm text-gray-900",children:s.note}),e.jsx("div",{className:"text-xs text-gray-500 ml-3",children:new Date(s.addedAt).toLocaleDateString()})]}),s.addedBy&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Added by ",s.addedBy.firstName," ",s.addedBy.lastName,s.isInternal&&" (Internal)"]})]},i))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ge,{className:"mx-auto h-12 w-12 text-gray-400 mb-2"}),e.jsx("p",{children:"No notes added yet"})]})]}),x==="communication"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Communication Log"}),e.jsxs("button",{onClick:()=>z(!0),className:"btn btn-primary btn-sm",children:[e.jsx(pt,{className:"h-4 w-4 mr-1"}),"Log Communication"]})]}),((ue=t.communication)==null?void 0:ue.length)>0?e.jsx("div",{className:"space-y-3",children:t.communication.map((s,i)=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[s.type==="email"&&e.jsx(tt,{className:"h-4 w-4 text-gray-400"}),s.type==="phone"&&e.jsx(Ce,{className:"h-4 w-4 text-gray-400"}),s.type==="in_person"&&e.jsx(Ue,{className:"h-4 w-4 text-gray-400"}),s.type==="system"&&e.jsx(Se,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:s.type.replace("_"," ")}),s.recipient&&e.jsxs("span",{className:"text-sm text-gray-500",children:["to ",s.recipient]})]}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:s.message})]}),e.jsx("div",{className:"text-xs text-gray-500 ml-3",children:new Date(s.sentAt).toLocaleDateString()})]}),s.sentBy&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Sent by ",s.sentBy.firstName," ",s.sentBy.lastName]})]},i))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ce,{className:"mx-auto h-12 w-12 text-gray-400 mb-2"}),e.jsx("p",{children:"No communication logged yet"})]})]})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:e.jsx("button",{onClick:o,className:"btn btn-secondary",children:"Close"})})]}),$&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-60",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:["Update Status to ",w.charAt(0).toUpperCase()+w.slice(1)]}),e.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:p,onChange:s=>ee(s.target.value),placeholder:"Add any notes about this status change...",className:"input",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>C(!1),className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:F,disabled:j,className:`btn ${w==="approved"||w==="completed"?"btn-primary":w==="rejected"?"btn-danger":"btn-secondary"}`,children:j?e.jsx(le,{size:"sm"}):"Update Status"})]})]})}),K&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-60",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Add Note"}),e.jsx("button",{onClick:()=>I(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note"}),e.jsx("textarea",{value:U,onChange:s=>te(s.target.value),placeholder:"Enter your note...",className:"input",rows:4,required:!0})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:se,onChange:s=>ae(s.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Internal note (not visible to customer)"})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>I(!1),className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:E,disabled:j||!U.trim(),className:"btn btn-primary",children:j?e.jsx(le,{size:"sm"}):"Add Note"})]})]})}),M&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-60",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Log Communication"}),e.jsx("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),e.jsxs("select",{value:A.type,onChange:s=>D(i=>({...i,type:s.target.value})),className:"input",children:[e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"phone",children:"Phone"}),e.jsx("option",{value:"in_person",children:"In Person"}),e.jsx("option",{value:"system",children:"System"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),e.jsx("textarea",{value:A.message,onChange:s=>D(i=>({...i,message:s.target.value})),placeholder:"Enter communication details...",className:"input",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recipient (Optional)"}),e.jsx("input",{type:"text",value:A.recipient,onChange:s=>D(i=>({...i,recipient:s.target.value})),placeholder:"e.g., customer email or phone",className:"input"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>z(!1),className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:Q,disabled:j||!A.message.trim(),className:"btn btn-primary",children:j?e.jsx(le,{size:"sm"}):"Log Communication"})]})]})})]})},ke=({title:a,value:r,icon:o,color:m="blue",subtitle:v,trend:c})=>{const j={blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",yellow:"bg-yellow-50 text-yellow-600",red:"bg-red-50 text-red-600",purple:"bg-purple-50 text-purple-600",indigo:"bg-indigo-50 text-indigo-600",pink:"bg-pink-50 text-pink-600",gray:"bg-gray-50 text-gray-600"};return e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`p-3 rounded-md ${j[m]}`,children:o})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:a}),e.jsxs("dd",{className:"flex items-baseline",children:[e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:r}),c&&e.jsxs("div",{className:`ml-2 flex items-baseline text-sm font-semibold ${c.direction==="up"?"text-green-600":"text-red-600"}`,children:[c.direction==="up"?e.jsx("svg",{className:"self-center flex-shrink-0 h-5 w-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}):e.jsx("svg",{className:"self-center flex-shrink-0 h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsxs("span",{className:"sr-only",children:[c.direction==="up"?"Increased":"Decreased"," by"]}),c.percentage,"%"]})]}),v&&e.jsx("dd",{className:"text-sm text-gray-500",children:v})]})})]})})})},kt=({filters:a,onFilterChange:r,isLoading:o})=>{const[m,v]=f.useState(!1),c=(y,$)=>{r({[y]:$})},j=()=>{r({status:"",returnType:"",priority:"",search:"",startDate:"",endDate:"",page:1})},x=a.status||a.returnType||a.priority||a.search||a.startDate||a.endDate;return e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters"}),x&&e.jsxs("button",{onClick:j,className:"text-sm text-gray-500 hover:text-gray-700 flex items-center",children:[e.jsx(_,{className:"h-4 w-4 mr-1"}),"Clear filters"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Return #, customer...",value:a.search,onChange:y=>c("search",y.target.value),className:"input pl-10",disabled:o})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:a.status,onChange:y=>c("status",y.target.value),className:"input",disabled:o,children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"received",children:"Received"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:a.returnType,onChange:y=>c("returnType",y.target.value),className:"input",disabled:o,children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"return",children:"Return"}),e.jsx("option",{value:"exchange",children:"Exchange"}),e.jsx("option",{value:"warranty",children:"Warranty"}),e.jsx("option",{value:"recall",children:"Recall"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{value:a.priority,onChange:y=>c("priority",y.target.value),className:"input",disabled:o,children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("button",{onClick:()=>v(!m),className:"flex items-center text-sm text-gray-600 hover:text-gray-800",children:[e.jsx(xt,{className:"h-4 w-4 mr-2"}),m?"Hide":"Show"," Advanced Filters"]}),m&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:a.startDate,onChange:y=>c("startDate",y.target.value),className:"input",disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:a.endDate,onChange:y=>c("endDate",y.target.value),className:"input",disabled:o})]})]})]}),x&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[a.status&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Status: ",a.status,e.jsx("button",{onClick:()=>c("status",""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-blue-400 hover:bg-blue-200 hover:text-blue-500",children:e.jsx(_,{className:"h-3 w-3"})})]}),a.returnType&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:["Type: ",a.returnType,e.jsx("button",{onClick:()=>c("returnType",""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-green-400 hover:bg-green-200 hover:text-green-500",children:e.jsx(_,{className:"h-3 w-3"})})]}),a.priority&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:["Priority: ",a.priority,e.jsx("button",{onClick:()=>c("priority",""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-orange-400 hover:bg-orange-200 hover:text-orange-500",children:e.jsx(_,{className:"h-3 w-3"})})]}),a.search&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:["Search: ",a.search,e.jsx("button",{onClick:()=>c("search",""),className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-purple-400 hover:bg-purple-200 hover:text-purple-500",children:e.jsx(_,{className:"h-3 w-3"})})]}),(a.startDate||a.endDate)&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:["Date: ",a.startDate||"Start"," - ",a.endDate||"End",e.jsx("button",{onClick:()=>{c("startDate",""),c("endDate","")},className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-gray-400 hover:bg-gray-200 hover:text-gray-500",children:e.jsx(_,{className:"h-3 w-3"})})]})]})]})})},qt=()=>{var ie,oe;const[a,r]=f.useState({page:1,limit:10,status:"",returnType:"",priority:"",search:"",startDate:"",endDate:""}),[o,m]=f.useState(null),[v,c]=f.useState(!1),[j,x]=f.useState("sales"),[y,$]=f.useState(!1);at();const{data:C,isLoading:K,error:I,refetch:M}=bt(a,{onError:l=>{G(l,"Fetch Returns")}}),{data:z,isLoading:w}=vt({startDate:a.startDate,endDate:a.endDate},{skip:!a.startDate||!a.endDate}),{data:q}=dt(),p=(q==null?void 0:q.data)||q,[ee]=yt(),[U]=wt(),te=async(l,h,d)=>{try{await ee({returnId:l,status:h,notes:d}).unwrap(),we(`Return status updated to ${h}`),$(!1),m(null),M()}catch(S){G(S,"Update Return Status")}},[se]=ft(),ae=async(l,h,d)=>{try{await se({returnId:l,note:h,isInternal:d}).unwrap(),we("Note added successfully"),M()}catch(S){G(S,"Add Note")}},A=async l=>{try{await U(l).unwrap(),we("Return deleted successfully"),M()}catch(h){G(h,"Delete Return")}},D=l=>{r(h=>({...h,...l,page:1}))},{data:P}=jt(o==null?void 0:o._id,{skip:!(o!=null&&o._id)}),ne=l=>{m({_id:l}),$(!0)};nt.useEffect(()=>{P!=null&&P.data&&m(P.data)},[P]);const b=async(l,h="")=>{o&&await te(o._id,l,h)},[t]=Nt(),n=async(l,h,d=null)=>{if(o)try{await t({returnId:o._id,type:l,message:h,recipient:d}).unwrap(),we("Communication logged successfully"),M()}catch(S){G(S,"Add Communication")}},u=async l=>{window.confirm("Are you sure you want to delete this return? This action cannot be undone.")&&await A(l)},g=l=>{var B,Y,de,ce,me,xe,ue,s,i,W,J,H,he,pe,ge,be,je,ye;const h=window.open("","_blank"),d=l,S=((B=p==null?void 0:p.data)==null?void 0:B.companyName)||"Your Company Name",Z=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Return Document - ${d.returnNumber}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 10px; font-size: 12px; }
          .header { text-align: center; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px; }
          .company-name { font-size: 16px; font-weight: bold; color: #333; }
          .document-title { font-size: 14px; color: #666; margin-top: 5px; }
          .return-info { margin-bottom: 15px; }
          .info-row { display: flex; justify-content: space-between; margin-bottom: 3px; padding: 2px 0; border-bottom: 1px solid #eee; font-size: 11px; }
          .info-label { font-weight: bold; color: #333; }
          .info-value { color: #666; }
          .items-table { width: 100%; border-collapse: collapse; margin: 10px 0; font-size: 10px; }
          .items-table th, .items-table td { border: 1px solid #ddd; padding: 4px; text-align: left; }
          .items-table th { background-color: #f5f5f5; font-weight: bold; font-size: 10px; }
          .items-table tr:nth-child(even) { background-color: #f9f9f9; }
          .totals { margin-top: 15px; text-align: right; }
          .total-row { display: flex; justify-content: space-between; margin-bottom: 3px; padding: 2px 0; font-size: 11px; }
          .total-label { font-weight: bold; }
          .total-value { font-weight: bold; font-size: 12px; }
          .footer { margin-top: 20px; text-align: center; color: #666; font-size: 10px; }
          @media print {
            body { margin: 5px; font-size: 10px; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="company-name">${S}</div>
          <div class="company-details" style="font-size: 10px; color: #666; margin-top: 5px;">
            ${((Y=p==null?void 0:p.data)==null?void 0:Y.address)||""} | ${((de=p==null?void 0:p.data)==null?void 0:de.contactNumber)||""} | ${((ce=p==null?void 0:p.data)==null?void 0:ce.email)||""}
          </div>
          <div class="document-title">RETURN DOCUMENT</div>
        </div>
        
        <div class="return-info" style="display: flex; gap: 20px; margin-bottom: 15px;">
          <div style="flex: 1;">
            <h3 style="color: #333; margin-bottom: 8px; font-size: 12px; border-bottom: 1px solid #ddd; padding-bottom: 3px;">CUSTOMER DETAILS</h3>
            <div class="info-row">
              <span class="info-label">Customer Name:</span>
              <span class="info-value">${(me=d.customer)!=null&&me.firstName&&((xe=d.customer)!=null&&xe.lastName)?`${d.customer.firstName} ${d.customer.lastName}`:((ue=d.customer)==null?void 0:ue.name)||((s=d.customer)==null?void 0:s.businessName)||"N/A"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Email:</span>
              <span class="info-value">${((i=d.customer)==null?void 0:i.email)||"N/A"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Phone:</span>
              <span class="info-value">${((W=d.customer)==null?void 0:W.phone)||"N/A"}</span>
            </div>
          </div>
          <div style="flex: 1;">
            <h3 style="color: #333; margin-bottom: 8px; font-size: 12px; border-bottom: 1px solid #ddd; padding-bottom: 3px;">RETURN DETAILS</h3>
            <div class="info-row">
              <span class="info-label">Return Number:</span>
              <span class="info-value">${d.returnNumber}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Original Order:</span>
              <span class="info-value">${((J=d.originalOrder)==null?void 0:J.orderNumber)||"N/A"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Status:</span>
              <span class="info-value">${((H=d.status)==null?void 0:H.toUpperCase())||"PENDING"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Priority:</span>
              <span class="info-value">${((he=d.priority)==null?void 0:he.toUpperCase())||"NORMAL"}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Return Date:</span>
              <span class="info-value">${new Date(d.returnDate).toLocaleDateString()}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Refund Method:</span>
              <span class="info-value">${((pe=d.refundMethod)==null?void 0:pe.replace("_"," ").toUpperCase())||"ORIGINAL PAYMENT"}</span>
            </div>
          </div>
        </div>
        
        <table class="items-table">
          <thead>
            <tr>
              <th>Product</th>
              <th>Quantity</th>
              <th>Original Price</th>
              <th>Return Reason</th>
              <th>Condition</th>
              <th>Refund Amount</th>
              <th>Restocking Fee</th>
            </tr>
          </thead>
          <tbody>
            ${((ge=d.items)==null?void 0:ge.map(R=>{var T,fe,Ne;return`
              <tr>
                <td>${((T=R.product)==null?void 0:T.name)||"N/A"}</td>
                <td>${R.quantity||0}</td>
                <td>$${(R.originalPrice||0).toFixed(2)}</td>
                <td>${((fe=R.returnReason)==null?void 0:fe.replace("_"," ").toUpperCase())||"N/A"}</td>
                <td>${((Ne=R.condition)==null?void 0:Ne.toUpperCase())||"N/A"}</td>
                <td>$${(R.refundAmount||0).toFixed(2)}</td>
                <td>$${(R.restockingFee||0).toFixed(2)}</td>
              </tr>
            `}).join(""))||'<tr><td colspan="7">No items found</td></tr>'}
          </tbody>
        </table>
        
        <div class="totals">
          <div class="total-row">
            <span class="total-label">Total Refund Amount:</span>
            <span class="total-value">$${d.totalRefundAmount?d.totalRefundAmount.toFixed(2):d.items?d.items.reduce((R,T)=>R+(T.refundAmount||0),0).toFixed(2):"0.00"}</span>
          </div>
          <div class="total-row">
            <span class="total-label">Total Restocking Fee:</span>
            <span class="total-value">$${d.totalRestockingFee?d.totalRestockingFee.toFixed(2):d.items?d.items.reduce((R,T)=>R+(T.restockingFee||0),0).toFixed(2):"0.00"}</span>
          </div>
          <div class="total-row">
            <span class="total-label">Net Refund Amount:</span>
            <span class="total-value">$${d.netRefundAmount?d.netRefundAmount.toFixed(2):d.items?(d.items.reduce((R,T)=>R+(T.refundAmount||0),0)-d.items.reduce((R,T)=>R+(T.restockingFee||0),0)).toFixed(2):"0.00"}</span>
          </div>
        </div>
        
        ${d.generalNotes?`
          <div style="margin-top: 30px;">
            <h3 style="color: #333; margin-bottom: 10px;">Notes:</h3>
            <p style="color: #666; line-height: 1.5;">${d.generalNotes}</p>
          </div>
        `:""}
        
        <div class="footer">
          <p>Generated on ${new Date().toLocaleString()}</p>
          <p>This is a computer-generated document.</p>
          <p style="margin-top: 10px; font-weight: bold;">${S}</p>
          <p>${((be=p==null?void 0:p.data)==null?void 0:be.address)||""}</p>
          <p>Phone: ${((je=p==null?void 0:p.data)==null?void 0:je.contactNumber)||""} | Email: ${((ye=p==null?void 0:p.data)==null?void 0:ye.email)||""}</p>
        </div>
      </body>
      </html>
    `;h.document.write(Z),h.document.close(),h.onload=()=>{h.print(),h.close()}},F=l=>{switch(l){case"pending":return e.jsx(Ae,{className:"h-4 w-4 text-yellow-500"});case"approved":return e.jsx(V,{className:"h-4 w-4 text-blue-500"});case"rejected":return e.jsx(Re,{className:"h-4 w-4 text-red-500"});case"processing":return e.jsx(Qe,{className:"h-4 w-4 text-blue-500"});case"received":return e.jsx(X,{className:"h-4 w-4 text-green-500"});case"completed":return e.jsx(V,{className:"h-4 w-4 text-green-600"});case"cancelled":return e.jsx(Re,{className:"h-4 w-4 text-gray-500"});default:return e.jsx(Se,{className:"h-4 w-4 text-gray-500"})}},E=l=>{switch(l){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"processing":return"bg-blue-100 text-blue-800";case"received":return"bg-green-100 text-green-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},Q=l=>{switch(l){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"normal":return"bg-blue-100 text-blue-800";case"low":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};if(K&&!C)return e.jsx(le,{message:"Loading returns..."});const L=((ie=C==null?void 0:C.data)==null?void 0:ie.returns)||[],N=((oe=C==null?void 0:C.data)==null?void 0:oe.pagination)||{},re=(z==null?void 0:z.data)||{};return e.jsxs(rt,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Return Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage returns, exchanges, and refunds"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>M(),className:"btn btn-secondary",children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs("button",{onClick:()=>{x("sales"),c(!0)},className:"btn btn-primary btn-md",children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Create Sales Return"]}),e.jsxs("button",{onClick:()=>{x("purchase"),c(!0)},className:"btn btn-primary btn-md",children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Create Purchase Return"]})]})]}),!w&&e.jsxs(lt,{cols:{default:1,md:2,lg:4},gap:6,children:[e.jsx(ke,{title:"Total Returns",value:re.totalReturns||0,icon:e.jsx(X,{className:"h-5 w-5"}),color:"blue"}),e.jsx(ke,{title:"Pending Returns",value:re.pendingReturns||0,icon:e.jsx(Ae,{className:"h-5 w-5"}),color:"yellow"}),e.jsx(ke,{title:"Total Refunds",value:`$${(re.totalRefundAmount||0).toFixed(2)}`,icon:e.jsx(Ye,{className:"h-5 w-5"}),color:"green"}),e.jsx(ke,{title:"Return Rate",value:`${(re.returnRate||0).toFixed(1)}%`,icon:e.jsx(it,{className:"h-5 w-5"}),color:"purple"})]}),e.jsx(kt,{filters:a,onFilterChange:D,isLoading:K}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Returns"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[N.total||0," total returns"]})]})}),e.jsx("div",{className:"card-content p-0",children:K?e.jsx(ot,{rows:5,cols:6}):L.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(X,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2",children:"No returns found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your filters or create a new return"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Return #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(l=>{var h,d,S,Z,B,Y;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:new Date(l.returnDate).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(l.returnDate).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:((h=l.customer)==null?void 0:h.name)||((d=l.customer)==null?void 0:d.businessName)||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:((S=l.customer)==null?void 0:S.email)||"N/A"})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:(Z=l.originalOrder)==null?void 0:Z.orderNumber}),e.jsxs("div",{className:"text-sm text-gray-500",children:[((B=l.items)==null?void 0:B.length)||0," items"]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",((Y=l.netRefundAmount)==null?void 0:Y.toFixed(2))||"0.00"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:l.returnNumber}),e.jsx("div",{className:"text-sm text-gray-500 capitalize",children:l.returnType})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${E(l.status)}`,children:[F(l.status),e.jsx("span",{className:"ml-1 capitalize",children:l.status})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Q(l.priority)}`,children:l.priority||"normal"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>ne(l._id),className:"text-blue-600 hover:text-blue-900",title:"View Return Details",children:e.jsx(ut,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>g(l),className:"text-gray-600 hover:text-gray-900",title:"Print Return Document",children:e.jsx(We,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>u(l._id),className:"text-red-600 hover:text-red-900",title:"Delete Return",disabled:!["pending","cancelled"].includes(l.status),children:e.jsx(ht,{className:"h-4 w-4"})})]})})]},l._id)})})]})})}),N.pages>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>D({page:N.current-1}),disabled:!N.hasPrev,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>D({page:N.current+1}),disabled:!N.hasNext,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(N.current-1)*a.limit+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(N.current*a.limit,N.total)})," ","of"," ",e.jsx("span",{className:"font-medium",children:N.total})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>D({page:N.current-1}),disabled:!N.hasPrev,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),[...Array(N.pages)].map((l,h)=>e.jsx("button",{onClick:()=>D({page:h+1}),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${N.current===h+1?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:h+1},h+1)),e.jsx("button",{onClick:()=>D({page:N.current+1}),disabled:!N.hasNext,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]})]}),v&&e.jsx(Rt,{isOpen:v,onClose:()=>c(!1),onSuccess:()=>{c(!1),M()},defaultReturnType:j}),y&&o&&e.jsx(Ct,{return:o,isOpen:y,onClose:()=>{$(!1),m(null)},onStatusUpdate:b,onAddNote:ae,onAddCommunication:n,isLoading:!1})]})};export{qt as default};
