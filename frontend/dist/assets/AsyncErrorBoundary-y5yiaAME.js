var c=Object.defineProperty;var l=(a,t,e)=>t in a?c(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var i=(a,t,e)=>l(a,typeof t!="symbol"?t+"":t,e);import{R as h,p as r,b0 as m,I as d,x as o}from"./index-WAoT78o_.js";class y extends h.Component{constructor(e){super(e);i(this,"handleRetry",async()=>{this.setState({isRetrying:!0});try{await new Promise(e=>setTimeout(e,1e3)),this.setState(e=>({hasError:!1,error:null,isRetrying:!1,retryCount:e.retryCount+1}))}catch{this.setState({isRetrying:!1})}});i(this,"isNetworkError",()=>{var e,s,n;return this.state.error&&(((e=this.state.error.message)==null?void 0:e.includes("Network Error"))||((s=this.state.error.message)==null?void 0:s.includes("Failed to fetch"))||((n=this.state.error.message)==null?void 0:n.includes("timeout"))||this.state.error.code==="NETWORK_ERROR")});this.state={hasError:!1,error:null,isRetrying:!1,retryCount:0}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("AsyncErrorBoundary caught an error:",e,s)}render(){if(this.state.hasError){const e=this.isNetworkError(),s=3,n=this.state.retryCount<s;return r.jsx("div",{className:"card",children:r.jsx("div",{className:"card-content",children:r.jsxs("div",{className:"text-center py-6",children:[e?r.jsx(m,{className:"mx-auto h-8 w-8 text-red-500 mb-4"}):r.jsx(d,{className:"mx-auto h-8 w-8 text-red-500 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e?"Connection Error":"Loading Error"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e?"Unable to connect to the backend server. Please ensure the server is running on localhost:5000.":"There was an error loading the data. Please try again."}),this.state.retryCount>0&&r.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["Retry attempt: ",this.state.retryCount,"/",s]}),r.jsxs("div",{className:"space-y-2",children:[n&&r.jsx("button",{onClick:this.handleRetry,disabled:this.state.isRetrying,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:this.state.isRetrying?r.jsxs(r.Fragment,{children:[r.jsx(o,{className:"h-4 w-4 mr-2 animate-spin"}),"Retrying..."]}):r.jsxs(r.Fragment,{children:[r.jsx(o,{className:"h-4 w-4 mr-2"}),"Try Again"]})}),!n&&r.jsx("div",{className:"text-sm text-gray-500",children:"Maximum retry attempts reached. Please refresh the page."}),r.jsx("button",{onClick:()=>window.location.reload(),className:"block mx-auto mt-2 text-sm text-gray-600 hover:text-gray-900 underline",children:"Refresh Page"})]}),!1]})})})}return this.props.children}}export{y as A};
